(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===S||e===I)return-1;if(e===S||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P=function(t){var e,n,r,i,s;Object(o.f)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function V(){return new U("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function Q(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function z(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function K(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function W(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof U)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function J(t,e){for(var n=G(t,0),r=G(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function X(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Z(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=G(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);et(this)}}();function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",st=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function at(t,e,n){var r;if(Object(o.f)("string"==typeof e,"typeof type must == string"),Object(o.f)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return R(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ut,ct,lt,ht,ft,dt,pt,gt=function(t,e){var n=yt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new st(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new U(n.pathString)}},yt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},vt=/[\[\].#$\/\u0000-\u001F\u007F]/,mt=/[\[\].#$\u0000-\u001F\u007F]/,bt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},wt=function(t){return"string"==typeof t&&0!==t.length&&!mt.test(t)},Ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},Et=function(t,e,n,r,i){i&&void 0===n||Ct(Object(o.o)(t,e,i),n,r)},Ct=function(t,e,n){var r=n instanceof U?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nt(r));if("function"==typeof e)throw new Error(t+"contains a function "+nt(r)+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+nt(r));if("string"==typeof e&&e.length>bt/3&&Object(o.H)(e)>bt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+nt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.H)(u),et(a),Ct(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.H)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nt(r)+" in addition to actual children.")}},Tt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,function(t,e){var n=new U(t);if(Ct(s,e,W(r,n)),".priority"===Q(n)&&!Ot(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=G(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Z(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},St=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ot(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},It=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jt=function(t,e,n,r){if(!(r&&void 0===n||wt(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},At=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jt(t,e,n,r)},kt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},Nt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wt(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Rt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},Pt=function(t){return"number"==typeof t?"number:"+P(t):"string:"+t},Dt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===ut||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Lt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return ct},set:function(t){ct=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Pt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?P(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}(),qt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Bt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new qt(S,t),r=new qt(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return qt.MIN},t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,new Lt("[PRIORITY-POST]",ht))},e.prototype.makePost=function(t,e){var n=lt(t);return new qt(e,new Lt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Bt)),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return ft},set:function(t){ft=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,ft)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qt(t,ft)},e.prototype.toString=function(){return".key"},e}(Bt),zt=new Qt,Gt=Math.log(2),Kt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Gt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Wt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Kt(t.length));return new Vt(r||e,o)},$t={},Yt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)($t&&Ht,"ChildrenNode.ts has not been loaded"),dt=dt||new t({".priority":$t},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==zt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(qt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Wt(s,e.getCompare()):$t;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===$t){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(qt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Wt(a,s.getCompare())}return $t}var l=n.get(e.name),h=t;return l&&(h=h.remove(new qt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,function(t){if(t===$t)return t;var r=n.get(e.name);return r?t.remove(new qt(e.name,r)):t}),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function Xt(t,e){return x(t,e)}var Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return pt||(pt=new t(new Vt(Xt),null,Yt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?pt:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new qt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?pt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.f)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Pt(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===te?-1:0},t.prototype.withIndex=function(e){if(e===zt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===zt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===zt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),te=new(function(t){function e(){return t.call(this,new Vt(Xt),Zt.EMPTY_NODE,Yt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function ee(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Lt(t,ee(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return R(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=ee(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ee(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=ee(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qt(t,n)))}}),0===r.length)return Zt.EMPTY_NODE;var s=Wt(r,Jt,function(t){return t.name},Xt);if(i){var a=Wt(r,Ht.getCompare());return new Zt(s,ee(e),new Yt({".priority":a},{".priority":Ht}))}return new Zt(s,ee(e),Yt.Default)}Object.defineProperties(qt,{MIN:{value:new qt(S,Zt.EMPTY_NODE)},MAX:{value:new qt(I,te)}}),Qt.__EMPTY_NODE=Zt.EMPTY_NODE,Lt.__childrenNodeConstructor=Zt,ut=te,ht=te,lt=ee;var ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ie,oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(e));return new t(V(),n,this.revert)}return Object(o.f)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(ie||(ie=new Vt(j)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new U(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:W(new U(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(V(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(W(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),W(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),W(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(V(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(W(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V()):new t(this.source,H(this.path))},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ne.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ne.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new ue(this.source,V(),n.value):new t(this.source,V(),n)}return Object(o.f)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function he(t,e){return{eventCache:t,serverCache:e}}function fe(t,e,n,r){return he(new le(e,n,r),t.serverCache)}function de(t,e,n,r){return he(t.eventCache,new le(e,n,r))}function pe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function ye(t){return{type:"value",snapshotNode:t}}function ve(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ve(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ve(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ve(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Oe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new se(null))},t}();function Ee(t,e,n){if($(e))return new Oe(new se(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new Oe(t.writeTree_.set(i,o))}var a=new se(n),u=t.writeTree_.setTree(e,a);return new Oe(u)}function Ce(t,e,n){var r=t;return R(n,function(t,n){r=Ee(r,W(e,t),n)}),r}function Te(t,e){if($(e))return Oe.empty();var n=t.writeTree_.setTree(e,new se(null));return new Oe(n)}function Se(t,e){return null!=Ie(t,e)}function Ie(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function xe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new qt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new qt(t,n.value))}),e}function je(t,e){if($(e))return t;var n=Ie(t,e);return new Oe(null!=n?new se(n):t.writeTree_.subtree(e))}function Ae(t){return t.writeTree_.isEmpty()}function ke(t,e){return Ne(V(),t.writeTree_,e)}function Ne(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ne(W(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(W(t,".priority"),r)),n}function Re(t,e){return Qe(e,t)}function Pe(t,e){if(t.snap)return Z(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Z(W(t.path,n),e))return!0;return!1}function De(t){return t.visible}function Le(t,e,n){for(var r=Oe.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Z(n,a)?r=Ee(r,u=Y(n,a),s.snap):Z(a,n)&&(u=Y(a,n),r=Ee(r,V(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(Z(n,a))r=Ce(r,u=Y(n,a),s.children);else if(Z(a,n))if($(u=Y(a,n)))r=Ce(r,V(),s.children);else{var c=Object(o.G)(s.children,q(u));if(c){var l=c.getChild(H(u));r=Ee(r,V(),l)}}}}}return r}function Me(t,e,n,r,i){if(r||i){var o=je(t.visibleWrites,e);return!i&&Ae(o)?n:i||null!=n||Se(o,V())?ke(Le(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Z(t.path,e)||Z(e,t.path))},e),n||Zt.EMPTY_NODE):null}var s=Ie(t.visibleWrites,e);if(null!=s)return s;var a=je(t.visibleWrites,e);return Ae(a)?n:null!=n||Se(a,V())?ke(a,n||Zt.EMPTY_NODE):null}function Fe(t,e,n,r){return Me(t.writeTree,t.treePath,e,n,r)}function Ue(t,e){return function(t,e,n){var r=Zt.EMPTY_NODE,i=Ie(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=je(t.visibleWrites,e);return n.forEachChild(Ht,function(t,e){var n=ke(je(o,new U(t)),e);r=r.updateImmediateChild(t,n)}),xe(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return xe(je(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Ve(t,e,n,r){return function(t,e,n,r,i){Object(o.f)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=W(e,n);if(Se(t.visibleWrites,s))return null;var a=je(t.visibleWrites,s);return Ae(a)?i.getChild(n):ke(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function qe(t,e){return function(t,e){return Ie(t.visibleWrites,e)}(t.writeTree,W(t.treePath,e))}function Be(t,e,n){return function(t,e,n,r){var i=W(e,n),o=Ie(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ke(je(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function He(t,e){return Qe(W(t.treePath,e),t.writeTree)}function Qe(t,e){return{treePath:t,writeTree:e}}var ze=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ge=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Be(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=je(t.visibleWrites,e),c=Ie(u,V());if(null!=c)a=c;else{if(null==n)return[];a=ke(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Ke(t,e,n,r,i,s){var a=e.eventCache;if(null!=qe(r,n))return e;var u=void 0,c=void 0;if($(n))if(Object(o.f)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=ge(e),h=Ue(r,l instanceof Zt?l:Zt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=Fe(r,ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=q(n);if(".priority"===d){Object(o.f)(1===B(n),"Can't have a priority with additional path components");var p=a.getNode(),g=Ve(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=H(n),v=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var m=Ve(r,n,a.getNode(),c);v=null!=m?a.getNode().getImmediateChild(d).updateChild(y,m):a.getNode().getImmediateChild(d)}else v=Be(r,d,e.serverCache);u=null!=v?t.filter.updateChild(a.getNode(),d,v,y,i,s):a.getNode()}}return fe(e,u,a.isFullyInitialized()||$(n),t.filter.filtersNodes())}function We(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if($(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=q(n);if(!c.isCompleteForPath(n)&&B(n)>1)return e;var d=H(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,ze,null)}var g=de(e,u,c.isFullyInitialized()||$(n),l.filtersNodes());return Ke(t,g,n,i,new Ge(i,g,o),a)}function $e(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Ge(i,e,o);if($(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=fe(e,u,!0,t.filter.filtersNodes());else{var h=q(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=fe(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=H(n),d=c.getNode().getImmediateChild(h),p=void 0;if($(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===Q(f)&&g.getChild(K(f)).isEmpty()?g:g.updateChild(f,r):Zt.EMPTY_NODE}a=d.equals(p)?e:fe(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Ye(t,e){return t.eventCache.isCompleteForChild(e)}function Je(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Xe(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=$(n)?r:new se(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=We(t,c,new U(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=We(t,c,new U(n),h,i,o,s,a)}}),c}var Ze=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.g)("Should only compare child_ events.");var r=new qt(e.childName,e.snapshotNode),i=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn,rn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",on=(en=0,nn=[],function(t){var e,n=t===en;en=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=rn.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===nn[e];e--)nn[e]=0;nn[e]++}else for(e=0;e<12;e++)nn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=rn.charAt(nn[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),sn=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=rn.charAt(rn.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},an=function(t){if("-2147483648"===t)return S;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=rn.charAt(rn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},un=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return qt.MAX},e.prototype.makePost=function(t,e){var n=ee(t);return new qt(e,n)},e.prototype.toString=function(){return".value"},e}(Bt)),cn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ee(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qt(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,te);return new qt(I,t)},e.prototype.toString=function(){return G(this.indexPath_,0).join("/")},e}(Bt),ln=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new qt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new qt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(be(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,f));var g=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ve(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me(l.name,l.node)),i.trackChildChange(ve(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),fn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function dn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function pn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function gn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function yn(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=sn(e)),r=gn(t,e,n)):r=gn(t,e,null==n?I:sn(n)),r.startAfterSet_=!0,r}function vn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function mn(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=an(e)),r=vn(t,e,n)):r=vn(t,e,null==n?S:an(n)),r.endBeforeSet_=!0,r}function bn(t,e){var n=t.copy();return n.index_=e,n}function _n(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===un?e="$value":t.index_===zt?e="$key":(Object(o.f)(t.index_ instanceof cn,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.J)(e),t.startSet_&&(n.startAt=Object(o.J)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.J)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.J)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.J)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var wn,On=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new hn(n):new ln(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),l=new le(u,s.isFullyInitialized(),i.filtersNodes()),h=new le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=he(h,l),this.eventGenerator_=new Ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function En(t,e){var n=ge(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!$(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function Cn(t){return 0===t.eventRegistrations_.length}function Tn(t,e,n){var r=[];if(n){Object(o.f)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Sn(t,e,n,r){e.type===ne.MERGE&&null!==e.source.queryId&&(Object(o.f)(ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.f)(pe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new we;if(n.type===ne.OVERWRITE){var c=n;c.source.fromUser?s=$e(t,e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),s=We(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ne.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=W(n,r);Ye(e,q(c))&&(a=$e(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=W(n,r);Ye(e,q(c))||(a=$e(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Xe(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ne.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=qe(r,n))return e;var u=new Ge(r,e,i),c=e.eventCache.getNode(),l=void 0;if($(n)||".priority"===q(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Fe(r,ge(e));else{var f=e.serverCache.getNode();Object(o.f)(f instanceof Zt,"serverChildren would be complete if leaf node"),h=Ue(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=q(n),p=Be(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,H(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,Zt.EMPTY_NODE,H(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Fe(r,ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=qe(r,V()),fe(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=qe(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if($(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return We(t,e,n,u.getNode().getChild(n),i,o,a,s);if($(n)){var c=new se(null);return u.getNode().forEachChild(zt,function(t,e){c=c.set(new U(t),e)}),Xe(t,e,n,c,i,o,a,s)}return e}var l=new se(null);return r.foreach(function(t,e){var r=W(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Xe(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ne.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Ke(t,de(e,o.getNode(),o.isFullyInitialized()||$(n),o.isFiltered()),n,r,ze,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ye(pe(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.f)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.f)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.f)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,In(t,u.changes,u.viewCache.eventCache.getNode(),null)}function In(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var xn=function(){return function(){this.views=new Map}}();function jn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.f)(null!=c,"SyncTree gave us an op for an invalid query."),Sn(c,e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Sn(c=f.value,e,n,r))}catch(d){s={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function An(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=Fe(n,i?r:null),u=!1;a?u=!0:r instanceof Zt?(a=Ue(n,r),u=!1):(a=Zt.EMPTY_NODE,u=!1);var c=he(new le(a,u,!1),new le(r,i,!1));return new On(e,c)}return s}function kn(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function Nn(t,e){var n,r,o=null;try{for(var s=Object(i.g)(t.views.values()),a=s.next();!a.done;a=s.next())o=o||En(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function Rn(t,e){if(e.getQueryParams().loadsAllData())return Ln(t);var n=e.queryIdentifier();return t.views.get(n)}function Pn(t,e){return null!=Rn(t,e)}function Dn(t){return null!=Ln(t)}function Ln(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.query.getQueryParams().loadsAllData())return s}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Mn=1,Fn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new se(null),this.pendingWriteTree_={visibleWrites:Oe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Un(t,e,n,r,i){return function(t,e,n,r,i){Object(o.f)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ee(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?zn(t,new ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Vn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&Pe(u,r.path)?i=!1:Z(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=Le(t.allWrites,De,V()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Te(t.visibleWrites,r.path):R(r.children,function(e){t.visibleWrites=Te(t.visibleWrites,W(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new se(null);return null!=r.snap?i=i.set(V(),!0):R(r.children,function(t){i=i.set(new U(t),!0)}),zn(t,new oe(r.path,i,n))}return[]}function qn(t,e,n){return zn(t,new ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Bn(t,e,n,r){var s=e.path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e.queryIdentifier()||Pn(a,e))){var c=function(t,e,n,r){var s,a,u=e.queryIdentifier(),c=[],l=[],h=Dn(t);if("default"===u)try{for(var f=Object(i.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(i.e)(d.value,2),y=g[0];l=l.concat(Tn(p=g[1],n,r)),Cn(p)&&(t.views.delete(y),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(v){s={error:v}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Tn(p,n,r)),Cn(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Dn(t)&&c.push(new(Object(o.f)(wn,"Reference.ts has not been loaded"),wn)(e.repo,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),f=t.syncPointTree_.findOnPath(s,function(t,e){return Dn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(s);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Dn(e))return[Ln(e)];var r=[];return e&&(r=kn(e)),R(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var y=p[g],v=y.query,m=Wn(t,y);t.listenProvider_.startListening(tr(v),$n(t,v),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(tr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(Yn(e));t.listenProvider_.stopListening(tr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=Yn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Hn(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||Nn(e,n),s=s||Dn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Dn(u),i=i||Nn(u,V())):(u=new xn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Nn(e,V());n&&(i=i.updateImmediateChild(t,n))}));var c=Pn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=Yn(e);Object(o.f)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Mn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=An(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,function(t,e){r.push(ve(t,e))}),n.isFullyInitialized()&&r.push(ye(n.getNode())),In(t,r,n.getNode(),e)}(s,n)}(u,e,n,Re(t.pendingWriteTree_,r),i,a);if(!c&&!s){var d=Rn(u,e);f=f.concat(function(t,e,n){var r=e.path,i=$n(t,e),s=Wn(t,n),a=t.listenProvider_.startListening(tr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.f)(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&Dn(e))return[Ln(e).query];var r=[];return e&&(r=r.concat(kn(e).map(function(t){return t.query}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(tr(h),$n(t,h))}return a}(t,e,d))}return f}function Qn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Nn(n,Y(t,e));if(r)return r});return Me(r,e,i,n,!0)}function zn(t,e){return Gn(e,t.syncPointTree_,null,Re(t.pendingWriteTree_,V()))}function Gn(t,e,n,r){if($(t.path))return Kn(t,e,n,r);var i=e.get(V());null==n&&null!=i&&(n=Nn(i,V()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=He(r,s);o=o.concat(Gn(a,u,c,l))}return i&&(o=o.concat(jn(i,t,r,n))),o}function Kn(t,e,n,r){var i=e.get(V());null==n&&null!=i&&(n=Nn(i,V()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=He(r,e),u=t.operationForChild(e);u&&(o=o.concat(Kn(u,i,s,a)))}),i&&(o=o.concat(jn(i,t,r,n))),o}function Wn(t,e){var n=e.query,r=$n(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Jn(t,n);if(r){var i=Xn(r),o=i.path,s=i.queryId,a=Y(o,e);return Zn(t,o,new ae(re(s),a))}return[]}(t,n.path,r):function(t,e){return zn(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Bn(t,n,null,i)}}}function $n(t,e){var n=Yn(e);return t.queryToTagMap.get(n)}function Yn(t){return t.path.toString()+"$"+t.queryIdentifier()}function Jn(t,e){return t.tagToQueryMap.get(e)}function Xn(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}}function Zn(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.f)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,Re(t.pendingWriteTree_,e),null)}function tr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var er=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),nr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=W(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Qn(this.syncTree_,this.path_)},t}(),rr=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ir(t[".sv"],e,n):"object"==typeof t[".sv"]?or(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ir=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},or=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},sr=function(t,e,n,r){return ur(e,new nr(n,t),r)},ar=function(t,e,n){return ur(t,new er(e),n)};function ur(t,e,n){var r,i=t.getPriority().val(),o=rr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=rr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Lt(a,ee(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Lt(o))),u.forEachChild(Ht,function(t,i){var o=ur(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}function cr(){return{value:null,children:new Map}}function lr(t,e,n){if($(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,cr()),lr(t.children.get(r),e=H(e),n)}}function hr(t,e){if($(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Ht,function(e,n){lr(t,new U(e),n)}),hr(t,e)}if(t.children.size>0){var r=q(e);return e=H(e),t.children.has(r)&&hr(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function fr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){fr(r,new U(e.toString()+"/"+t),n)})}var dr=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),pr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),gr={},yr={};function vr(t){var e=t.toString();return gr[e]||(gr[e]=new pr),gr[e]}var mr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),br=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new mr(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),_r=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||X(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Or(t,e,n){wr(t,n),Cr(t,function(t){return X(t,e)})}function Er(t,e,n){wr(t,n),Cr(t,function(t){return Z(t,e)||Z(e,t)})}function Cr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Tr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Tr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();v&&_("event: "+n.toString()),M(r)}}}var Sr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ir=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Sr),xr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Sr),jr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ar="start",kr="close",Nr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=vr(e),this.urlFn=function(t){return at(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Rr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ar)n.id=s,n.password=a;else{if(o!==kr)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Rr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Pr="";function Dr(t){Pr=t}var Lr=null;"undefined"!=typeof MozWebSocket?Lr=MozWebSocket:"undefined"!=typeof WebSocket&&(Lr=WebSocket);var Mr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=vr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),at(t,it,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+Pr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Lr(this.connURL,[],r)}else this.mySock=new Lr(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Lr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Fr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Nr,Mr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Mr&&Mr.isAvailable(),s=o&&!Mr.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Mr];else{var a=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ur=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Fr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Vr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),qr=1e3,Br=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=qr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Ir.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&xr.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Ur(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new U(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Pr.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=xr.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Vr),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_n(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_n(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Vr),Qr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),jt("DataSnapshot.child",1,e,!1);var n=new U(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),jt("DataSnapshot.hasChild",1,t,!1);var e=new U(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),zr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Gr(t,e){for(var n=e instanceof U?e:new U(e),r=t,i=q(n);null!==i;){var s=Object(o.G)(r.node.children,i)||{children:{},childCount:0};r=new zr(i,r,s),i=q(n=H(n))}return r}function Kr(t){return t.node.value}function Wr(t,e){t.node.value=e,Zr(t)}function $r(t){return t.node.childCount>0}function Yr(t,e){R(t.node.children,function(n,r){e(new zr(n,t,r))})}function Jr(t,e,n,r){n&&!r&&e(t),Yr(t,function(t){Jr(t,e,!0,r)}),n&&r&&e(t)}function Xr(t){return new U(null===t.parent?t.name:Xr(t.parent)+"/"+t.name)}function Zr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Kr(t)&&!$r(t)}(n),i=Object(o.k)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Zr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Zr(t))}(t.parent,t.name,t)}var ti="repo_interrupt",ei=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cr(),this.transactionQueueTree_=new zr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ni(t){var e=t.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ri(t){return(e=(e={timestamp:ni(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ii(t,e,n,r,i){t.dataUpdateCount++;var s=new U(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.E)(n,function(t){return ee(t)});a=function(t,e,n,r){var i=Jn(t,r);if(i){var o=Xn(i),s=o.path,a=o.queryId,u=Y(s,e),c=se.fromObject(n);return Zn(t,s,new ce(re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ee(n);a=function(t,e,n,r){var i=Jn(t,r);if(null!=i){var o=Xn(i),s=o.path,a=o.queryId,u=Y(s,e);return Zn(t,s,new ue(re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.E)(n,function(t){return ee(t)});a=function(t,e,n){var r=se.fromObject(n);return zn(t,new ce({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ee(n);a=qn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=Ci(t,s)),Er(t.eventQueue_,f,a)}function oi(t,e){si(t,"connected",e),!1===e&&function(t){mi(t,"onDisconnectEvents");var e=ri(t),n=cr();fr(t.onDisconnect_,V(),function(r,i){var o=sr(r,i,t.serverSyncTree_,e);lr(n,r,o)});var r=[];fr(n,V(),function(e,n){r=r.concat(qn(t.serverSyncTree_,e,n));var i=ji(t,e);Ci(t,i)}),t.onDisconnect_=cr(),Er(t.eventQueue_,V(),r)}(t)}function si(t,e,n){var r=new U("/.info/"+e),i=ee(n);t.infoData_.updateSnapshot(r,i);var o=qn(t.infoSyncTree_,r,i);Er(t.eventQueue_,r,o)}function ai(t){return t.nextWriteId_++}function ui(t,e,n,r,i){mi(t,"set",{path:e.toString(),value:n,priority:r});var o=ri(t),s=ee(n,r),a=Qn(t.serverSyncTree_,e),u=ar(s,a,o),c=ai(t),l=Un(t.serverSyncTree_,e,u,c,!0);wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||C("set at "+e+" failed: "+n);var s=Vn(t.serverSyncTree_,c,!o);Er(t.eventQueue_,e,s),bi(0,i,n,r)});var h=ji(t,e);Ci(t,h),Er(t.eventQueue_,h,[])}function ci(t,e,n,r){mi(t,"update",{path:e.toString(),value:n});var i=!0,s=ri(t),a={};if(R(n,function(n,r){i=!1,a[n]=sr(W(e,n),ee(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),bi(0,r,"ok",void 0);else{var u=ai(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.f)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ce(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=se.fromObject(n);return zn(t,new ce({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||C("update at "+e+" failed: "+n);var s=Vn(t.serverSyncTree_,u,!o),a=s.length>0?Ci(t,e):e;Er(t.eventQueue_,a,s),bi(0,r,n,i)}),R(n,function(n){var r=ji(t,W(e,n));Ci(t,r)}),Er(t.eventQueue_,e,[])}}function li(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&hr(t.onDisconnect_,e),bi(0,n,r,i)})}function hi(t,e,n,r){var i=ee(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&lr(t.onDisconnect_,e,i),bi(0,r,n,o)})}function fi(t,e,n,r,i){var o=ee(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&lr(t.onDisconnect_,e,o),bi(0,i,n,r)})}function di(t,e,n,r){if(Object(o.u)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void bi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&R(n,function(n,r){var i=ee(r);lr(t.onDisconnect_,W(e,n),i)}),bi(0,r,i,o)})}function pi(t,e,n){var r;r=".info"===q(e.path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Or(t.eventQueue_,e.path,r)}function gi(t,e,n){var r;r=".info"===q(e.path)?Bn(t.infoSyncTree_,e,n):Bn(t.serverSyncTree_,e,n),Or(t.eventQueue_,e.path,r)}function yi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ti)}function vi(t){t.persistentConnection_&&t.persistentConnection_.resume(ti)}function mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function bi(t,e,n,r){e&&M(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function _i(t){return t.__database||(t.__database=new zi(t))}function wi(t,e,n,r,i){mi(t,"transaction on "+e);var s=function(){},a=new Ui(t,e);a.on("value",s);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Oi(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new Qr(u.currentInputSnapshot,new Ui(t,u.path),Ht);u.onComplete(null,!1,h)}}else{Ct("transaction failed: Data returned ",l,u.path),u.status=0;var f=Gr(t.transactionQueueTree_,e),d=Kr(f)||[];d.push(u),Wr(f,d);var g=void 0;"object"==typeof l&&null!==l&&Object(o.k)(l,".priority")?(g=Object(o.G)(l,".priority"),Object(o.f)(Ot(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Qn(t.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();var y=ri(t),v=ee(l,g),m=ar(v,c,y);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=m,u.currentWriteId=ai(t);var b=Un(t.serverSyncTree_,e,m,u.currentWriteId,u.applyLocally);Er(t.eventQueue_,e,b),Ei(t,t.transactionQueueTree_)}}function Oi(t,e,n){return Qn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function Ei(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||xi(t,e),Kr(e)){var n=Si(t,e);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=Oi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.f)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Y(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){mi(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<n.length;s++){if(n[s].status=2,i=i.concat(Vn(t.serverSyncTree_,n[s].currentWriteId)),n[s].onComplete){var a=n[s].currentOutputSnapshotResolved,u=new Ui(t,n[s].path),c=new Qr(a,u,Ht);o.push(n[s].onComplete.bind(null,null,!0,c))}n[s].unwatcher()}for(xi(t,Gr(t.transactionQueueTree_,e)),Ei(t,t.transactionQueueTree_),Er(t.eventQueue_,e,i),s=0;s<o.length;s++)M(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;Ci(t,e)}},a)}(t,Xr(e),n)}else $r(e)&&Yr(e,function(e){Ei(t,e)})}function Ci(t,e){var n=Ti(t,e),r=Xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=0;a<e.length;a++){var u=e[a],c=Y(n,u.path),l=!1,h=void 0;if(Object(o.f)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0));else{var f=Oi(t,u.path,s);u.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Ct("transaction failed: Data returned ",d,u.path);var p=ee(d);"object"==typeof d&&null!=d&&Object(o.k)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=u.currentWriteId,y=ri(t),v=ar(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=v,u.currentWriteId=ai(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Un(t.serverSyncTree_,u.path,v,u.currentWriteId,u.applyLocally))).concat(Vn(t.serverSyncTree_,g,!0))}else l=!0,h="nodata",i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0))}if(Er(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===h){var m=new Ui(t,e[a].path),b=new Qr(e[a].currentInputSnapshot,m,Ht);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}for(xi(t,t.transactionQueueTree_),a=0;a<r.length;a++)M(r[a]);Ei(t,t.transactionQueueTree_)}}(t,Si(t,n),r),r}function Ti(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Kr(r);)r=Gr(r,n),n=q(e=H(e));return r}function Si(t,e){var n=[];return Ii(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Ii(t,e,n){var r=Kr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yr(e,function(e){Ii(t,e,n)})}function xi(t,e){var n=Kr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Wr(e,n.length>0?n:void 0)}Yr(e,function(e){xi(t,e)})}function ji(t,e){var n=Xr(Ti(t,e)),r=Gr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){Ai(t,e)}),Ai(t,r),Jr(r,function(e){Ai(t,e)}),n}function Ai(t,e){var n=Kr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.f)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.f)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Vn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Wr(e,void 0):n.length=s+1,Er(t.eventQueue_,Xr(e),i),a=0;a<r.length;a++)M(r[a])}}var ki,Ni=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),kt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return hi(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),kt("OnDisconnect.set",this.path_),Et("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return hi(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),kt("OnDisconnect.setWithPriority",this.path_),Et("OnDisconnect.setWithPriority",1,t,this.path_,!1),St("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return fi(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),kt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tt("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return di(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ri=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Pi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Di=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Li=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Pi("value",this,new Qr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Mi=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Pi(t.type,this,new Qr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Fi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ki,"Reference.ts has not been loaded"),ki},set:function(t){ki=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===zt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!Ot(e)||null!=n&&!Ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof cn||t.getIndex()===un,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),It("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Li(t,e||null,n||null);pi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Mi(t,e,n);pi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),It("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Li(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Mi(i,null,n||null));gi(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Y(t,n);r=r||Nn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Nn(i,V()):(i=new xn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new le(r,!0,!1):null;return pe(An(i,e,Re(t.pendingWriteTree_,e.path),o?s.getNode():Zt.EMPTY_NODE,o).viewCache_)}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new Qr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then(function(n){var r=ee(n),i=qn(t.serverSyncTree_,e.path,r);return Or(t.eventQueue_,e.path,i),Promise.resolve(new Qr(r,e.getRef(),e.getQueryParams().getIndex()))},function(n){return mi(t,"get for query "+Object(o.J)(e)+" failed: "+n),Promise.reject(new Error(n))});var t,e,n},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),It("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,dn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,pn(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');jt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new cn(n),i=bn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=bn(this.queryParams_,zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=bn(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=bn(this.queryParams_,un);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),Et("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=gn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAfter",0,2,arguments.length),Et("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=yn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),Et("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=vn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endBefore",0,2,arguments.length),Et("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=mn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),Et("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+z(this.path)},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=X(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ui=function(t){function e(e,n){if(!(e instanceof ei))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new fn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),$(this.path)?null:Q(this.path)},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof U||(null===q(this.path)?At("Reference.child",1,t,!1):jt("Reference.child",1,t,!1)),new e(this.repo,W(this.path,t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=K(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return _i(this.repo)},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),kt("Reference.set",this.path),Et("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return ui(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),kt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tt("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return ci(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),kt("Reference.setWithPriority",this.path),Et("Reference.setWithPriority",1,t,this.path,!1),St("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ui(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),kt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),kt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),Rt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Ri(n,i)),"function"==typeof e&&e(t,n,i)};return wi(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),kt("Reference.setPriority",this.path),St("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return ui(this.repo,W(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),kt("Reference.push",this.path),Et("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=ni(this.repo),i=on(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return kt("Reference.onDisconnect",this.path),new Ni(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fi);Fi.__referenceConstructor=Ui,function(t){Object(o.f)(!wn,"__referenceConstructor has already been defined"),wn=t}(Ui);var Vi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),qi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Bi={},Hi=!1;function Qi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=gt(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=gt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new qi:new Vi(t,e);return Nt("Invalid Firebase Database URL",1,a),$(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),_i(function(t,e,n){var r=Object(o.G)(Bi,e.name);r||(Bi[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ei(t,Hi,e,n),r[t.toURLString()]=i,i}(u,t,l))}var zi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.G)(Bi,e.app.name))&&Object(o.G)(n,e.key)===e||E("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),yi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ei||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=vr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Hr(t.repoInfo_,function(e,n,r,i){ii(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return oi(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Br(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ii(t,e,n,r,i)},function(e){oi(t,e)},function(e){!function(t,e){R(e,function(e,n){si(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new br(t.stats_,t.server_)},r=t.repoInfo_.toString(),yr[r]||(yr[r]=n()),yr[r]),t.infoData_=new dr,t.infoSyncTree_=new Fn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=qn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),si(t,"connected",!1),t.serverSyncTree_=new Fn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Er(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ui(this.repo_,V())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new st(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new qi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof Ui?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=gt(t,this.repo_.repoInfo_.nodeAdmin);Nt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),yi(this.repo_)},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),vi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Gi=Object.freeze({__proto__:null,forceLongPolling:function(){Mr.forceDisallow(),Nr.forceAllow()},forceWebSockets:function(){Nr.forceDisallow()},isWebSocketsAvailable:function(){return Mr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new mr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);R(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Dr(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:Qi(e,u,n,s),namespace:i}}}),Ki=Br;Br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Wi=Object.freeze({__proto__:null,DataConnection:Ki,RealTimeConnection:Ur,hijackHash:function(t){var e=Br.prototype.put;return Br.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Br.prototype.put=e}},ConnectionTarget:st,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Hi=t}(t)}}),$i=zi.ServerValue;!function(e){Dr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=e.instanceIdentifier;return Qi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Ui,Query:Fi,Database:zi,DataSnapshot:Qr,enableLogging:b,INTERNAL:Gi,ServerValue:$i,TEST_ACCESS:Wi}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Xe}),n.d(e,"b",function(){return Ma}),n.d(e,"c",function(){return Na}),n.d(e,"d",function(){return Aa}),n.d(e,"e",function(){return ka}),n.d(e,"f",function(){return Au}),n.d(e,"g",function(){return _u}),n.d(e,"h",function(){return Fs}),n.d(e,"i",function(){return Wa}),n.d(e,"j",function(){return us}),n.d(e,"k",function(){return Va}),n.d(e,"l",function(){return fs}),n.d(e,"m",function(){return hr}),n.d(e,"n",function(){return da}),n.d(e,"o",function(){return Bi}),n.d(e,"p",function(){return mn}),n.d(e,"q",function(){return j}),n.d(e,"r",function(){return Je}),n.d(e,"s",function(){return io}),n.d(e,"t",function(){return ks}),n.d(e,"u",function(){return Rs}),n.d(e,"v",function(){return Ua}),n.d(e,"w",function(){return $s}),n.d(e,"x",function(){return Ou}),n.d(e,"y",function(){return Ws}),n.d(e,"z",function(){return gu}),n.d(e,"A",function(){return Ja}),n.d(e,"B",function(){return bn}),n.d(e,"C",function(){return La}),n.d(e,"D",function(){return Da}),n.d(e,"E",function(){return gs}),n.d(e,"F",function(){return ps}),n.d(e,"G",function(){return gr}),n.d(e,"H",function(){return vs}),n.d(e,"I",function(){return sr}),n.d(e,"J",function(){return _n}),n.d(e,"K",function(){return Tu}),n.d(e,"L",function(){return Qs}),n.d(e,"M",function(){return iu}),n.d(e,"N",function(){return Ze}),n.d(e,"O",function(){return bs}),n.d(e,"P",function(){return ms}),n.d(e,"Q",function(){return Js}),n.d(e,"R",function(){return D}),n.d(e,"S",function(){return yu}),n.d(e,"T",function(){return du}),n.d(e,"U",function(){return d}),n.d(e,"V",function(){return fu}),n.d(e,"W",function(){return xu}),n.d(e,"X",function(){return au}),n.d(e,"Y",function(){return Fa}),n.d(e,"Z",function(){return Qi}),n.d(e,"ab",function(){return Wo}),n.d(e,"bb",function(){return ir}),n.d(e,"cb",function(){return qn}),n.d(e,"db",function(){return An}),n.d(e,"eb",function(){return Nn}),n.d(e,"fb",function(){return Ln}),n.d(e,"gb",function(){return Pn}),n.d(e,"hb",function(){return Rn}),n.d(e,"ib",function(){return Dn}),n.d(e,"jb",function(){return Qo}),n.d(e,"kb",function(){return Iu}),n.d(e,"lb",function(){return zo}),n.d(e,"mb",function(){return Go}),n.d(e,"nb",function(){return kn}),n.d(e,"ob",function(){return V}),n.d(e,"pb",function(){return po}),n.d(e,"qb",function(){return So}),n.d(e,"rb",function(){return Co}),n.d(e,"sb",function(){return To}),n.d(e,"tb",function(){return Ho}),n.d(e,"ub",function(){return Tt}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return jn}),n.d(e,"xb",function(){return so}),n.d(e,"yb",function(){return bt}),n.d(e,"zb",function(){return os}),n.d(e,"Ab",function(){return Xr}),n.d(e,"Bb",function(){return vo}),n.d(e,"Cb",function(){return No}),n.d(e,"Db",function(){return Sa}),n.d(e,"Eb",function(){return X}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return _}),n.d(e,"Hb",function(){return w}),n.d(e,"Ib",function(){return nt}),n.d(e,"Jb",function(){return st}),n.d(e,"Kb",function(){return mo}),n.d(e,"Lb",function(){return Eo}),n.d(e,"Mb",function(){return Oo}),n.d(e,"Nb",function(){return wo}),n.d(e,"Ob",function(){return Ge}),n.d(e,"Pb",function(){return Uo}),n.d(e,"Qb",function(){return gn}),n.d(e,"Rb",function(){return We}),n.d(e,"Sb",function(){return ja}),n.d(e,"Tb",function(){return Io}),n.d(e,"Ub",function(){return Ia}),n.d(e,"Vb",function(){return bo}),n.d(e,"Wb",function(){return fa}),n.d(e,"Xb",function(){return Ta}),n.d(e,"Yb",function(){return ar}),n.d(e,"Zb",function(){return rt}),n.d(e,"ac",function(){return Mo}),n.d(e,"bc",function(){return Fo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function v(t){return"string"==typeof t?t:null==t?"":String(t)}function m(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():v(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${m(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function O(t){return E(t,T)||E(t,I)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(S)||t.hasOwnProperty(x))?t[S]:null}const T=u({"\u0275prov":u}),S=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function k(t){const e=A;return A=t,e}function N(t,e,n){const r=O(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&j.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=L||U||M||F,q={},B=[],H=[],Q=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),W=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let J=0;function X(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function Z(t){return at(t)||function(t){return t[z]||null}(t)}function tt(t){return function(t){return t[G]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{et[t.id]=t.type}),e}function rt(t,e){return R(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=X;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[Q]||null}function ut(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty($)?t[$]:null}class mt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ot),wt}function wt(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ot(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new mt(u&&u.currentValue,e,s===q),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Ct;function Tt(t){Ct=t}function St(t){return!!t.listen}bt.ngInherit=!0;const It={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function jt(t,e){return xt(e[t])}function At(t,e){return xt(e[t.index])}function kt(t,e){return t.data[e]}function Nt(t,e){const n=e[t];return ht(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:ie(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return Ut.bindingsEnabled}function qt(){return Ut.lFrame.lView}function Bt(){return Ut.lFrame.tView}function Ht(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Ut.lFrame.currentTNode}function zt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Ut.lFrame.isParent}function Kt(){return Ut.isInCheckNoChangesMode}function Wt(t){Ut.isInCheckNoChangesMode=t}function $t(){return Ut.lFrame.bindingIndex++}function Yt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Ut.lFrame.currentDirectiveIndex=t}function Xt(){return Ut.lFrame.currentQueryIndex}function Zt(t){Ut.lFrame.currentQueryIndex=t}function te(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ee(t,e,n){if(n&j.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&j.Host||(r=te(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=re();return r.currentTNode=e,r.lView=t,!0}function ne(t){const e=re(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function re(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?ie(t):e}function ie(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const se=oe;function ae(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ue(){return Ut.lFrame.selectedIndex}function ce(t){Ut.lFrame.selectedIndex=t}function le(){const t=Ut.lFrame;return kt(t.tView,t.selectedIndex)}function he(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function fe(t,e,n){ge(t,e,3,n)}function de(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function pe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ye(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ye(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ve=-1;class me{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function be(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];we(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function _e(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function Oe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ee(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ee(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ce(t){return t!==ve}function Te(t){return 32767&t}function Se(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ie=!0;function xe(t){const e=Ie;return Ie=t,e}let je=0;function Ae(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ke(r.data,t),ke(e,null),ke(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Ce(i)){const t=Te(i),n=Se(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function ke(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function Pe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=je++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function De(t,e,n){if(n&j.Optional)return t;b(e,"NodeInjector")}function Le(t,e,n,r){if(n&j.Optional&&void 0===r&&(r=null),0==(n&(j.Self|j.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&j.Optional):N(e,r,n&j.Optional)}finally{k(o)}}return De(r,e,n)}function Me(t,e,n,r=j.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:Ue:e}(n);if("function"==typeof o){if(!ee(e,t,r))return r&j.Host?De(i,n,r):Le(e,n,r,i);try{const t=o();if(null!=t||r&j.Optional)return t;b(n)}finally{se()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=ve,u=r&j.Host?e[16][6]:null;for((-1===s||r&j.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ve&&Qe(r,!1)?(i=e[1],s=Te(a),e=Se(a,e)):s=-1);-1!==s;){const t=e[1];if(He(o,s,t.data)){const t=Ve(s,e,n,i,r,u);if(t!==Fe)return t}a=e[s+8],a!==ve&&Qe(r,e[1].data[s+8]===u)&&He(o,s,e)?(i=t,s=Te(a),e=Se(a,e)):s=-1}}}return Le(e,n,r,i)}const Fe={};function Ue(){return new ze(Ht(),qt())}function Ve(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=qe(a,s,n,null==r?pt(a)&&Ie:r!=s&&0!=(3&a.type),i&j.Host&&o===a);return null!==u?Be(e,s,u,a):Fe}function qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function Be(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof me){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(m(o[n]));const a=xe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;ee(t,r,j.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),xe(a),s.resolving=!1,se()}}return i}function He(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qe(t,e){return!(t&j.Self||t&j.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Me(this._tNode,this._lView,t,void 0,e)}}function Ge(t){return R(()=>{const e=t.prototype.constructor,n=e[$]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return g(t)?()=>{const e=Ke(p(t));return e&&e()}:vt(t)}function We(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(_e(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const $e="__parameters__";function Ye(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty($e)?t[$e]:Object.defineProperty(t,$e,{value:[]})[$e];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xe=new Je("AnalyzeForEntryComponents"),Ze=Function;function tn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),tn(r,e)):e!==t&&e.push(r)}return e}function en(t,e){t.forEach(t=>Array.isArray(t)?en(t,e):e(t))}function nn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e,n){let r=an(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sn(t,e){const n=an(t,e);if(n>=0)return t[1|n]}function an(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const un={},cn=/\n/gm,ln="__source",hn=u({provide:String,useValue:u});let fn;function dn(t){const e=fn;return fn=t,e}function pn(t,e=j.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?N(t,void 0,e):fn.get(t,e&j.Optional?null:void 0,e)}function gn(t,e=j.Default){return(A||pn)(p(t),e)}function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=j.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(gn(t,n))}else e.push(gn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const mn=vn(Ye("Inject",t=>({token:t})),-1),bn=vn(Ye("Optional"),8),_n=vn(Ye("SkipSelf"),4);let wn;function On(t){var e;return(null===(e=function(){if(void 0===wn&&(wn=null,V.trustedTypes))try{wn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return wn}())||void 0===e?void 0:e.createHTML(t))||t}class En{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cn extends En{getTypeName(){return"HTML"}}class Tn extends En{getTypeName(){return"Style"}}class Sn extends En{getTypeName(){return"Script"}}class In extends En{getTypeName(){return"URL"}}class xn extends En{getTypeName(){return"ResourceURL"}}function jn(t){return t instanceof En?t.changingThisBreaksApplicationSecurity:t}function An(t,e){const n=kn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function kn(t){return t instanceof En&&t.getTypeName()||null}function Nn(t){return new Cn(t)}function Rn(t){return new Tn(t)}function Pn(t){return new Sn(t)}function Dn(t){return new In(t)}function Ln(t){return new xn(t)}class Mn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(On(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Fn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=On(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=On(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Un=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function qn(t){return(t=String(t)).match(Un)||t.match(Vn)?t:"unsafe:"+t}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Hn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=Bn("area,br,col,hr,img,wbr"),zn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gn=Bn("rp,rt"),Kn=Hn(Gn,zn),Wn=Hn(Qn,Hn(zn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn(Gn,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),$n=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yn=Bn("srcset"),Jn=Hn($n,Yn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xn=Bn("script,style,template");class Zn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;$n[o]&&(s=qn(s)),Yn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>qn(t.trim())).join(", ")),this.buf.push(" ",e,'="',nr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(nr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const tr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,er=/([^\#-~ |!])/g;function nr(t){return t.replace(/&/g,"&amp;").replace(tr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(er,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rr;function ir(t,e){let n=null;try{rr=rr||function(t){const e=new Fn(t);return function(){try{return!!(new window.DOMParser).parseFromString(On(""),"text/html")}catch(t){return!1}}()?new Mn(e):e}(t);let r=e?String(e):"";n=rr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=rr.getInertBodyElement(r)}while(r!==o);return On((new Zn).sanitizeChildren(or(n)||n))}finally{if(n){const t=or(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function or(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ar(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(sr.URL,t)||"":An(t,"URL")?jn(t):qn(v(t))}function ur(t){return t.ngDebugContext}function cr(t){return t.ngOriginalError}function lr(t,...e){t.error(...e)}class hr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||lr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ur(t)?ur(t):this._findContext(cr(t)):null}_findOriginalError(t){let e=cr(t);for(;e&&cr(e);)e=cr(e);return e}}function fr(t,e){t.__ngContext__=e}const dr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function pr(t){return t instanceof Function?t():t}var gr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function yr(t,e){return(void 0)(t,e)}function vr(t){const e=t[3];return ft(e)?e[3]:e}function mr(t){return _r(t[13])}function br(t){return _r(t[4])}function _r(t){for(;null!==t&&!ft(t);)t=t[4];return t}function wr(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?xr(e,n,a):Ir(e,n,a,i||null,!0):1===t&&null!==n?Ir(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ar(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&wr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Lr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Or(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=rn(t,lt+e);Lr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Tr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Lr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Sr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Sr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Sr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Sr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof me)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ir(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function xr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?Ir(t,e,n,r,i):xr(t,e,n)}function Ar(t,e){return St(t)?t.parentNode(e):e.parentNode}function kr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return At(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?At(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(o,i,n[a],s,!1);else jr(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Pr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return ft(n)?Pr(-1,n):xt(n)}}if(32&n)return yr(e,t)()||xt(t[e.index]);{const n=Rr(t,e);return null!==n?Array.isArray(n)?n[0]:Nr(vr(t[16]),n):Nr(t,e.next)}}return null}function Rr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Pr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Dr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&fr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Dr(t,e,n.child,r,i,o,!1),wr(e,t,i,a,o);else if(32&u){const s=yr(n,r);let u;for(;u=s();)wr(e,t,i,u,o);wr(e,t,i,a,o)}else 16&u?Mr(t,e,r,n,i,o):wr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Lr(t,e,n,r,i,o){Dr(n,r,t.firstChild,e,i,o,!1)}function Mr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)wr(e,t,i,a[u],o);else Dr(t,e,a,s[3],i,o,!0)}function Fr(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ur(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Vr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const qr="ng-template";function Br(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Vr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Hr(t){return 4===t.type&&t.value!==qr}function Qr(t,e,n){return e===(4!==t.type||n?t.value:qr)}function zr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(_e(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Qr(t,u,n)||""===u&&1===e.length){if(Gr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Br(t.attrs,c,n)){if(Gr(r))return!1;s=!0}continue}const l=Kr(8&r?"class":u,i,Hr(t),n);if(-1===l){if(Gr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Vr(e,c,0)||2&r&&c!==t){if(Gr(r))return!1;s=!0}}}}else{if(!s&&!Gr(r)&&!Gr(u))return!1;if(s&&Gr(u))continue;s=!1,r=u|1&r}}return Gr(r)||s}function Gr(t){return 0==(1&t)}function Kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Wr(t,e,n=!1){for(let r=0;r<e.length;r++)if(zr(t,e[r],n))return!0;return!1}function $r(t,e){return t?":not("+e.trim()+")":e}function Yr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Gr(s)||(e+=$r(o,i),i=""),r=s,o=o||!Gr(r);n++}return""!==i&&(e+=$r(o,i)),e}const Jr={};function Xr(t){Zr(Bt(),qt(),ue()+t,Kt())}function Zr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&fe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&de(e,r,0,n)}ce(n)}function ti(t,e){return t<<17|e<<2}function ei(t){return t>>17&32767}function ni(t){return 2|t}function ri(t){return(131068&t)>>2}function ii(t,e){return-131069&t|e<<2}function oi(t){return 1|t}function si(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Zt(i),n.contentQueries(2,e[o],o)}}}function ai(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ui(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function ci(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function li(t,e,n){ne(e);try{const r=t.viewQuery;null!==r&&Di(1,r,n);const i=t.template;null!==i&&di(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&si(t,e),t.staticViewQueries&&Di(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ai(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ae()}}function hi(t,e,n,r){const i=e[2];if(256==(256&i))return;ne(e);const o=Kt();try{Mt(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&di(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&fe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&de(e,n,0,null),pe(e,0)}if(function(t){for(let e=mr(t);null!==e;e=br(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=mr(t);null!==e;e=br(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&hi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&si(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&fe(e,n)}else{const n=t.contentHooks;null!==n&&de(e,n,1),pe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ce(~r);else{const i=r,o=n[++t],s=n[++t];Yt(o,i),s(2,e[i])}}}finally{ce(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)xi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Di(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&fe(e,n)}else{const n=t.viewHooks;null!==n&&de(e,n,2),pe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ae()}}function fi(t,e,n,r){const i=e[10],o=!Kt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&li(t,e,r),hi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function di(t,e,n,r,i){const o=ue();try{ce(-1),2&r&&e.length>ct&&Zr(t,e,ct,Kt()),n(r,i)}finally{ce(o)}}function pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function gi(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function yi(t,e,n,r){const i=Mi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Fi(t).push(r,i.length-1))}function vi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function mi(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Vi(t,n,c,r,i),pt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):we(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function bi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function _i(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function wi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Oi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Ei(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ci(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new me(o,yt(i),null);t.blueprint[r]=s,n[r]=s,bi(t,e,0,r,ci(t,n,i.hostVars,Jr),i)}function Ti(t,e,n){const r=At(e,t),i=pi(n),o=t[10],s=ki(t,ai(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Si(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ii(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function xi(t,e){const n=Nt(e,t);if(Dt(n)){const t=n[1];80&n[2]?hi(t,n,t.template,n[8]):n[5]>0&&ji(n)}}function ji(t){for(let n=mr(t);null!==n;n=br(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];hi(t,e,t.template,e[8])}else e[5]>0&&ji(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Dt(r)&&r[5]>0&&ji(r)}}function Ai(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),li(r,n,n[8])}function ki(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ni(t){for(;t;){t[2]|=64;const e=vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ri(t,e,n){const r=e[10];r.begin&&r.begin();try{hi(t,e,t.template,n)}catch(i){throw Ui(e,i),i}finally{r.end&&r.end()}}function Pi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Di(t,e,n){Zt(0),e(t,n)}const Li=(()=>Promise.resolve(null))();function Mi(t){return t[7]||(t[7]=[])}function Fi(t){return t.cleanup||(t.cleanup=[])}function Ui(t,e){const n=t[9],r=n?n.get(hr,null):null;r&&r.handleError(e)}function Vi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function qi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Bi=new Je("INJECTOR",-1);class Hi{get(t,e=un){if(e===un){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Je("Set Injector scope."),zi={},Gi={},Ki=[];let Wi;function $i(){return void 0===Wi&&(Wi=new Hi),Wi}function Yi(t,e=null,n=null,r){return new Ji(t,n,e||$i(),r)}class Ji{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&en(e,n=>this.processProvider(n,t,e)),en([t],t=>this.processInjectorType(t,[],i)),this.records.set(Bi,to(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=un,n=j.Default){this.assertNotDestroyed();const r=dn(this);try{if(!(n&j.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&O(t);e=n&&this.injectableDefInScope(n)?to(Xi(t),zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&j.Self?$i():this.parent).get(t,e=n&j.Optional&&e===un?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ln]&&i.unshift(e[ln]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{dn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{en(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];en(r,t=>this.processProvider(t,n,r||Ki))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,to(a,zi));const u=r.providers;if(null!=u&&!s){const e=t;en(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=no(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return eo(t)?to(void 0,t.useValue):to(Zi(t),zi)}(t);if(no(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=to(void 0,zi,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===zi&&(e.value=Gi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Xi(t){const e=O(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Zi(t,e,n){let r;if(no(t)){const e=p(t);return vt(e)||Xi(e)}if(eo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>gn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||Xi(e);r=()=>new e(...yn(t.deps))}var i;return r}function to(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function eo(t){return null!==t&&"object"==typeof t&&hn in t}function no(t){return"function"==typeof t}const ro=function(t,e,n){return function(t,e=null,n=null,r){const i=Yi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let io=(()=>{class t{static create(t,e){return Array.isArray(t)?ro(t,e,""):ro(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=un,t.NULL=new Hi,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>gn(Bi)}),t.__NG_ELEMENT_ID__=-1,t})();function oo(t,e){he(Rt(t)[1],Ht())}function so(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ao(t.inputs),e.declaredInputs=ao(t.declaredInputs),e.outputs=ao(t.outputs);const n=i.hostBindings;n&&lo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&uo(t,o),s&&co(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===so&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oe(i.hostAttrs,n=Oe(n,i.hostAttrs))}}(r)}function ao(t){return t===q?{}:t===H?[]:t}function uo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function co(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function lo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ho=null;function fo(){if(!ho){const t=V.Symbol;if(t&&t.iterator)ho=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ho=n)}}}return ho}function po(t){return!!go(t)&&(Array.isArray(t)||!(t instanceof Map)&&fo()in t)}function go(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function yo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vo(t,e,n,r){const i=qt();return yo(i,$t(),e)&&(Bt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?v(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(le(),i,t,e,n,r)),vo}function mo(t,e=j.Default){const n=qt();return null===n?gn(t,e):Me(Ht(),n,p(t),e)}function bo(t,e,n){const r=qt();return yo(r,$t(),e)&&mi(Bt(),le(),r,t,e,r[11],n,!1),bo}function _o(t,e,n,r,i){const o=i?"class":"style";Vi(t,n,e.inputs[o],o,r)}function wo(t,e,n,r){const i=qt(),o=Bt(),s=ct+t,a=i[11],u=i[s]=Or(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ui(e,t,2,i,Lt(a,o));return function(t,e,n,r){let i=!1;if(Vt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Wr(n,s.selectors,!1)&&(i||(i=[]),Pe(Ae(n,e),t,s.type),yt(s)?(wi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ei(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ci(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Oe(n.mergedAttrs,c.hostAttrs),Ci(t,n,e,u,c),Oi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Hr(e)?null:Ii(n,i);o.push(c),s=vi(n,u,s),a=vi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}n.mergedAttrs=Oe(n.mergedAttrs,n.attrs)}(e,n,u,Lt(a,s)),null!==u.attrs&&qi(u,u.attrs,!1),null!==u.mergedAttrs&&qi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&be(a,u,l);const h=c.classes;null!==h&&Ur(a,u,h);const f=c.styles;null!==f&&Fr(a,u,f),64!=(64&c.flags)&&kr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&fr(u,i),Ut.lFrame.elementDepthCount++,gt(c)&&(function(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ae(n,e),fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Ti(e,n,r);const u=Be(e,t,a,n);fr(u,e),null!==s&&Si(0,a-i,u,r,0,s),o&&(Nt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{ce(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||_i(r,i)}}finally{ce(-1),Jt(s)}}(t,e,n))}(o,i,c),function(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&function(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c)}function Oo(){let t=Ht();Gt()?Ut.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(he(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&_o(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&_o(n,e,qt(),e.stylesWithoutHost,!1)}function Eo(t,e,n,r){wo(t,e,n,r),Oo()}function Co(t){return!!t&&"function"==typeof t.then}function To(t){return!!t&&"function"==typeof t.subscribe}const So=To;function Io(t,e,n=!1,r){const i=qt(),o=Bt(),s=Ht();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&Fi(t),l=Mi(e);let h=!0;if(3&r.type){const f=At(r,e),d=a?a(f):q,p=d.target||f,g=l.length,y=a?t=>a(xt(t[r.index])).target:r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=jo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=jo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=jo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Io}function xo(t,e,n){try{return!1!==e(n)}catch(r){return Ui(t,r),!1}}function jo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&Ni(s);let a=xo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=xo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ao(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ei(o):ri(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ko(t[a],e)&&(u=!0,t[a+1]=r?oi(n):ni(n)),a=r?ei(n):ri(n)}u&&(t[n+1]=r?ni(o):oi(o))}function ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&an(t,e)>=0}function No(t,e){return function(t,e,n,r){const i=qt(),o=Bt(),s=function(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ue()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Po(n=Ro(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ro(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ri(r))return t[ei(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ro(null,t,e,n[1],r),n=Po(n,e.attrs,r),function(t,e,n,r){t[ei(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Po(r,t[o].hostAttrs,true);return Po(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ei(s),u=ri(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||an(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ei(t[a+1]);t[r+1]=ti(e,a),0!==e&&(t[e+1]=ii(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ti(a,0),0!==a&&(t[a+1]=ii(t[a+1],r)),a=r;else t[r+1]=ti(u,0),0===a?a=r:t[u+1]=ii(t[u+1],r),u=r;l&&(t[r+1]=ni(t[r+1])),Ao(t,c,r,!0),Ao(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&an(o,e)>=0&&(n[r+1]=oi(n[r+1]))}(e,c,t,r),s=ti(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&yo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Lo(1==(1&c)?Do(u,e,n,i,ri(c),s):void 0)||(Lo(o)||function(t){return 2==(2&t)}(c)&&(o=Do(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,jt(ue(),n),i,o))}(o,o.data[ue()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(jn(t))),t}(e),true,s)}(t,e),No}function Ro(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Po(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Po(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),on(t,s,!!n||e[++o]))}return void 0===t?null:t}function Do(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?B:void 0);let h=c?sn(l,r):u===r?l:void 0;if(o&&!Lo(h)&&(h=sn(e,r)),Lo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ei(f):ri(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=sn(t,r))}return a}function Lo(t){return void 0!==t}function Mo(t,e=""){const n=qt(),r=Bt(),i=t+ct,o=r.firstCreatePass?ui(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);kr(r,n,s,o),zt(o,!1)}function Fo(t,e,n){const r=qt(),i=function(t,e,n,r){return yo(t,$t(),n)?e+v(n)+r:Jr}(r,t,e,n);return i!==Jr&&function(t,e,n){const r=jt(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ue(),i),Fo}function Uo(t,e,n){const r=qt();return yo(r,$t(),e)&&mi(Bt(),le(),r,t,e,r[11],n,!0),Uo}const Vo=void 0;var qo=["en",[["a","p"],["AM","PM"],Vo],[["AM","PM"],Vo,Vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vo,"{1} 'at' {0}",Vo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Bo={};function Ho(t,e,n){"string"!=typeof e&&(n=e,e=t[Wo.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Bo[e]=t,n&&(Bo[e][Wo.ExtraData]=n)}function Qo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ko(e);if(n)return n;const r=e.split("-")[0];if(n=Ko(r),n)return n;if("en"===r)return qo;throw new Error(`Missing locale data for the locale "${t}".`)}function zo(t){return Qo(t)[Wo.CurrencyCode]||null}function Go(t){return Qo(t)[Wo.PluralCase]}function Ko(t){return t in Bo||(Bo[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Bo[t]}var Wo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const $o="en-US";let Yo=$o;function Jo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Yo=t.toLowerCase().replace(/_/g,"-"))}function Xo(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xo(t[o],e,n,r,i);else{const o=Bt(),s=qt();let a=no(t)?t:p(t.provide),u=Zi(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(no(t)||!t.multi){const r=new me(u,i,mo),d=es(a,e,i?l:l+f,h);-1===d?(Pe(Ae(c,s),o,a),Zo(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=es(a,e,l+f,h),p=es(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){Pe(Ae(c,s),o,a);const l=function(t,e,n,r,i){const o=new me(t,n,mo);return o.multi=[],o.index=e,o.componentProviders=0,ts(o,i,r&&!n),o}(i?rs:ns,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Zo(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Zo(o,t,d>-1?d:p,ts(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Zo(t,e,n,r){const i=no(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function es(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ns(t,e,n,r){return is(this.multi,[])}function rs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Be(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),is(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],is(i,o);return o}function is(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function os(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=yt(t);Xo(n,r.data,r.blueprint,i,!0),Xo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ss{}class as{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let us=(()=>{class t{}return t.NULL=new as,t})();function cs(...t){}function ls(t,e){return new fs(At(t,e))}const hs=function(){return ls(Ht(),qt())};let fs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=hs,t})();function ds(t){return t instanceof fs?t.nativeElement:t}class ps{}let gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ys(),t})();const ys=function(){const t=qt(),e=Nt(Ht().index,t);return function(t){return t[11]}(ht(e)?e:t)};let vs=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class ms{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const bs=new ms("11.2.6");class _s{constructor(){}supports(t){return po(t)}create(t){return new Os(t)}}const ws=(t,e)=>e;class Os{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ws}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ss(n,r,i)?e:n,s=Ss(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!po(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[fo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Es(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ts),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ts),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Es{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ts{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Cs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ss(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Is{constructor(){}supports(t){return t instanceof Map||go(t)}create(){return new xs}}class xs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||go(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new js(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class js{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function As(){return new ks([new _s])}let ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||As()),deps:[[t,new _n,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:As}),t})();function Ns(){return new Rs([new Is])}let Rs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ns()),deps:[[t,new _n,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ns}),t})();function Ps(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),ft(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ps(e[1],e,n,r)}const s=n.type;if(8&s)Ps(t,e,n.child,r);else if(32&s){const t=yr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Rr(e,n);if(Array.isArray(t))r.push(...t);else{const n=vr(e[16]);Ps(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ds{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ps(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),rn(e,n))}this._attachedToViewContainer=!1}Tr(this._lView[1],this._lView)}onDestroy(t){yi(this._lView[1],this._lView,null,t)}markForCheck(){Ni(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ri(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Wt(!0);try{Ri(t,e,n)}finally{Wt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Lr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ls extends Ds{constructor(t){super(t),this._view=t}detectChanges(){Pi(this._view)}checkNoChanges(){!function(t){Wt(!0);try{Pi(t)}finally{Wt(!1)}}(this._view)}get context(){return null}}const Ms=Us;let Fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ms,t.__ChangeDetectorRef__=!0,t})();function Us(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Nt(t.index,e);return new Ds(n,n)}return 47&t.type?new Ds(e[16],e):null}(Ht(),qt(),t)}const Vs=[new Is],qs=new ks([new _s]),Bs=new Rs(Vs),Hs=function(){return Ks(Ht(),qt())};let Qs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Hs,t})();const zs=Qs,Gs=class extends zs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ai(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),li(e,n,t),new Ds(n)}};function Ks(t,e){return 4&t.type?new Gs(e,t,ls(t,e)):null}class Ws{}class $s{}const Ys=function(){return na(Ht(),qt())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ys,t})();const Xs=Js,Zs=class extends Xs{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ls(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Ce(t)){const e=Se(t,this._hostLView),n=Te(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ta(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ws,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Zs(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],nn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Pr(i,o),a=n[11],u=Ar(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Lr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),nn(ea(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ta(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(rn(ea(this._lContainer),e),Tr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=rn(ea(this._lContainer),e)?new Ds(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ta(t){return t[8]}function ea(t){return t[8]||(t[8]=[])}function na(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Ir(n,Ar(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=new Array(r,!0,!1,e,null,0,t,i,null,null),ki(e,n)}return new Zs(n,t,e)}const ra={};class ia extends us{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new aa(e,this.ngModule)}}function oa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const sa=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>dr});class aa extends ss{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Yr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return oa(this.componentDef.inputs)}get outputs(){return oa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ra,i);return o!==ra||r===ra?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ps,It),s=i.get(vs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Or(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:dr,clean:Li,playerHandler:null,flags:0},f=gi(0,null,null,1,0,null,null,null,null,null),d=ai(null,f,h,l,null,null,o,a,s,i);let p,g;ne(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ui(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(qi(a,u,!0),null!==t&&(be(i,t,u),null!==a.classes&&Ur(i,t,a.classes),null!==a.styles&&Fr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ai(n,pi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Pe(Ae(a,n),s,e.type),wi(s,a),Ei(a,n.length,1)),ki(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)be(a,c,["ng-version",bs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Gr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&be(a,c,t),e&&e.length>0&&Ur(a,c,e.join(" "))}if(g=kt(f,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ci(t,r,e,ci(t,e,1,null),n));const i=Be(e,t,r.directiveStart,r);fr(i,e);const o=At(r,e);return o&&fr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ce(a.index),bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),_i(e,s)),s}(t,this.componentDef,d,h,[oo]),li(f,d,null)}finally{ae()}return new ua(this.componentType,p,ls(g,d),d,g)}}class ua extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ls(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ca=new Map;class la extends Ws{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ia(this);const n=ut(t),r=t[W]||null;r&&Jo(r),this._bootstrapComponents=pr(n.bootstrap),this._r3Injector=Yi(t,e,[{provide:Ws,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=io.THROW_IF_NOT_FOUND,n=j.Default){return t===io||t===Ws||t===Bi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ha extends $s{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,ca.get(i),n),ca.set(i,n));const o=pr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new la(this.moduleType,t)}}function fa(t,e,n){const r=function(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=qt();return i[r]===Jr?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}const da=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function pa(){return this._results[fo()]()}class ga{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=fo(),n=ga.prototype;n[e]||(n[e]=pa)}get changes(){return this._changes||(this._changes=new da)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=tn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ya{constructor(t){this.queryList=t,this.matches=null}clone(){return new ya(this.queryList)}setDirty(){this.queryList.setDirty()}}class va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xa(t,e).matches&&this.queries[e].setDirty()}}class ma{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ba{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ba(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class _a{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new _a(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,wa(e,i)),this.matchTNodeWithReadOption(t,e,qe(e,t,i,!1,!1))}else n===Qs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===fs||r===Js||r===Qs&&4&e.type)this.addMatch(e.index,-2);else{const n=qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function wa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Oa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ls(t,e):4&t.type?Ks(t,e):null}(e,t):-2===n?function(t,e,n){return n===fs?ls(e,t):n===Qs?Ks(e,t):n===Js?na(e,t):void 0}(t,e,r):Be(t,t[1],n,e)}function Ea(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Oa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ca(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ea(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ca(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ca(n[1],n,i,r)}}}}}return r}function Ta(t){const e=qt(),n=Bt(),r=Xt();Zt(r+1);const i=xa(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ca(n,e,r,[]):Ea(n,e,i,r);t.reset(o,ds),t.notifyOnChanges()}return!0}return!1}function Sa(t,e,n,r){const i=Bt();if(i.firstCreatePass){const o=Ht();(function(t,e,n){null===t.queries&&(t.queries=new ba),t.queries.track(new _a(e,n))})(i,new ma(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ga(4==(4&n));yi(t,e,r,r.destroy),null===e[19]&&(e[19]=new va),e[19].queries.push(new ya(r))}(i,qt(),n)}function Ia(){return t=qt(),e=Xt(),t[19].queries[e].queryList;var t,e}function xa(t,e){return t.queries.getByIndex(e)}function ja(t=j.Default){const e=Us(!0);if(null!=e||t&j.Optional)return e;b("ChangeDetectorRef")}const Aa=new Je("Application Initializer");let ka=(()=>{class t{constructor(t){this.appInits=t,this.resolve=cs,this.reject=cs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Co(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(gn(Aa,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Na=new Je("AppId"),Ra={provide:Na,useFactory:function(){return`${Pa()}${Pa()}${Pa()}`},deps:[]};function Pa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Da=new Je("Platform Initializer"),La=new Je("Platform ID"),Ma=new Je("appBootstrapListener");let Fa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Ua=new Je("LocaleId"),Va=new Je("DefaultCurrencyCode");class qa{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ba=function(t){return new ha(t)},Ha=Ba,Qa=function(t){return Promise.resolve(Ba(t))},za=function(t){const e=Ba(t),n=pr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new aa(n)),t},[]);return new qa(e,n)},Ga=za,Ka=function(t){return Promise.resolve(za(t))};let Wa=(()=>{class t{constructor(){this.compileModuleSync=Ha,this.compileModuleAsync=Qa,this.compileModuleAndAllComponentsSync=Ga,this.compileModuleAndAllComponentsAsync=Ka}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const $a=(()=>Promise.resolve(0))();function Ya(t){"undefined"==typeof Zone?$a.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ja{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,tu(t),Za(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),tu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return eu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),nu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return eu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),nu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,tu(t),Za(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ja.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ja.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Xa,cs,cs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Xa={};function Za(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function eu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nu(t){t._nesting--,Za(t)}class ru{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let iu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ja.assertNotInAngularZone(),Ya(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ya(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(gn(Ja))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),ou=(()=>{class t{constructor(){this._applications=new Map,cu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return cu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class su{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function au(t){cu=t}let uu,cu=new su,lu=!0,hu=!1;function fu(){return hu=!0,lu}function du(){if(hu)throw new Error("Cannot enable prod mode after platform setup.");lu=!1}const pu=new Je("AllowMultipleToken");class gu{constructor(t,e){this.name=t,this.token=e}}function yu(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=vu();if(!o||o.injector.get(pu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(uu&&!uu.destroyed&&!uu.injector.get(pu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");uu=t.get(mu);const e=t.get(Da,null);e&&e.forEach(t=>t())}(io.create({providers:t,name:r}))}return function(t){const e=vu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function vu(){return uu&&!uu.destroyed?uu:null}let mu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ru:("zone.js"===t?void 0:t)||new Ja({enableLongStackTrace:fu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ja,useValue:n}];return n.run(()=>{const e=io.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(hr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{wu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Co(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ka);return t.runInitializers(),t.donePromise.then(()=>(Jo(i.injector.get(Ua,$o)||$o),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=bu({},e);return function(t,e,n){const r=new ha(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(_u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(gn(io))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function bu(t,e){return Array.isArray(e)?e.reduce(bu,t):Object.assign(Object.assign({},t),e)}let _u=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ja.assertNotInAngularZone(),Ya(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ss?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ws),i=n.create(io.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(iu,null),a=s&&i.injector.get(ou);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),wu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;wu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ma,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(gn(Ja),gn(io),gn(hr),gn(us),gn(ka))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function wu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ou{}class Eu{}const Cu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Tu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Cu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Su(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Su(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(gn(Wa),gn(Eu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Su(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Iu=function(t){return null},xu=yu(null,"core",[{provide:La,useValue:"unknown"},{provide:mu,deps:[io]},{provide:ou,deps:[]},{provide:Fa,deps:[]}]),ju=[{provide:_u,useClass:_u,deps:[Ja,io,hr,us,ka]},{provide:sa,deps:[Ja],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ka,useClass:ka,deps:[[new bn,Aa]]},{provide:Wa,useClass:Wa,deps:[]},Ra,{provide:ks,useFactory:function(){return qs},deps:[]},{provide:Rs,useFactory:function(){return Bs},deps:[]},{provide:Ua,useFactory:function(t){return Jo(t=t||"undefined"!=typeof $localize&&$localize.locale||$o),t},deps:[[new mn(Ua),new bn,new _n]]},{provide:Va,useValue:"USD"}];let Au=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(gn(_u))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:ju}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return I}),n.d(e,"c",function(){return S}),n.d(e,"d",function(){return V}),n.d(e,"e",function(){return T}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return Y}),n.d(e,"k",function(){return D}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return z}),n.d(e,"p",function(){return d}),n.d(e,"q",function(){return P}),n.d(e,"r",function(){return y}),n.d(e,"s",function(){return v}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return E}),n.d(e,"x",function(){return p}),n.d(e,"y",function(){return g}),n.d(e,"z",function(){return O}),n.d(e,"A",function(){return m}),n.d(e,"B",function(){return w}),n.d(e,"C",function(){return R}),n.d(e,"D",function(){return A}),n.d(e,"E",function(){return F}),n.d(e,"F",function(){return U}),n.d(e,"G",function(){return L}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return W}),n.d(e,"J",function(){return k}),n.d(e,"K",function(){return Q}),n.d(e,"L",function(){return G}),n.d(e,"M",function(){return K}),n.d(e,"N",function(){return C});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function O(){return!1}function E(){return"indexedDB"in self&&null!=indexedDB}function C(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function T(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.c)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a,r);return u},t}();function x(t,e){return t.replace(j,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var j=/\{\$([^}]+)}/g;function A(t){return JSON.parse(t)}function k(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=A(c(o[0])||""),n=A(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var Q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return v}),n.d(e,"g",function(){return T}),n.d(e,"h",function(){return O}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return y}),n.d(e,"k",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig");class _{}const w=new u.P("6.1.4");function O(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:_,useFactory:O,deps:[m,u.A,[new u.B,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.n)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Qb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Qb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Qb)(s).location;return new b(Object(r.Qb)(a),e&&e.origin||"")}const m=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(m,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(m,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(y),r.Qb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:O,token:t,providedIn:"root"}),t})();function O(){return new w(Object(r.Qb)(y),Object(r.Qb)(a))}function E(t){return t.replace(/\/index.html$/,"")}var C=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.mb;class S{}let I=(()=>{class t extends S{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case C.Zero:return"zero";case C.One:return"one";case C.Two:return"two";case C.Few:return"few";case C.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:S,useClass:I}]}),t})();function A(t){return"browser"===t}function k(t){return"server"===t}let N=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new R(Object(r.Qb)(s),window)}),t})();class R{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=P(this.window.history)||P(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function P(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class D extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new D,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=M||(M=document.querySelector("base"),M)?M.getAttribute("href"):null;return null==e?null:(n=e,L||(L=document.createElement("a")),L.setAttribute("href",n),"/"===L.pathname.charAt(0)?L.pathname:"/"+L.pathname);var n}resetBaseElement(){M=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let L,M=null;const F=new r.r("TRANSITION_ID"),U=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[F,s,r.s],multi:!0}];class V{static init(){Object(r.X)(new V)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const q=new r.r("EventManagerPlugins");let B=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(q),r.Qb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class H{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const G={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},K=/%COMP%/g;function W(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?W(t,i,n):(i=i.replace(K,t),n.push(i))}return n}function $(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Y=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new J(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new X(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new Z(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=W(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(B),r.Qb(z),r.Qb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(G[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=G[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=G[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,$(n)):this.eventManager.addEventListener(t,e,$(n))}}class X extends J{constructor(t,e,n,r){super(t),this.component=n;const i=W(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(K,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(K,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Z extends J{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=W(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let tt=(()=>{class t extends H{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const et=["alt","control","meta","shift"],nt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},it={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ot=(()=>{class t extends H{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(et.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&rt.hasOwnProperty(e)&&(e=rt[e]))}return nt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),et.forEach(r=>{r!=n&&(0,it[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const st=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){D.makeCurrent(),V.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],at=Object(r.S)(r.W,"browser",st),ut=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:q,useClass:tt,multi:!0,deps:[s,r.A,r.C]},{provide:q,useClass:ot,multi:!0,deps:[s]},[],{provide:Y,useClass:Y,deps:[B,z,r.c]},{provide:r.F,useExisting:Y},{provide:Q,useExisting:z},{provide:z,useClass:z,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:B,useClass:B,deps:[q,r.A]},[]];let ct=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:F,useExisting:r.c},U]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:ut,imports:[j,r.f]}),t})();function lt(){return new ht(Object(r.Qb)(s))}let ht=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=Object(r.Gb)({factory:lt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var ft=n("Cfvw"),dt=n("HDdC"),pt=n("DH7j"),gt=n("lJxs"),yt=n("XoHu");function vt(t,e){return new dt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(ft.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class mt{}const bt=new r.r("NgValueAccessor"),_t={provide:bt,useExisting:Object(r.U)(()=>Ot),multi:!0},wt=new r.r("CompositionEventMode");let Ot=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(wt,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([_t])]}),t})();const Et=new r.r("NgValidators"),Ct=new r.r("NgAsyncValidators");function Tt(t){return null!=t}function St(t){const e=Object(r.rb)(t)?Object(ft.a)(t):t;return Object(r.qb)(e),e}function It(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function xt(t,e){return e.map(e=>e(t))}function jt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function At(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Tt);return 0==e.length?null:function(t){return It(xt(t,e))}}(jt(t)):null}function kt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Tt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(pt.a)(e))return vt(e,null);if(Object(yt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return vt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return vt(t=1===t.length&&Object(pt.a)(t[0])?t[0]:t,null).pipe(Object(gt.a)(t=>e(...t)))}return vt(t,null)}(xt(t,e).map(St)).pipe(Object(gt.a)(It))}}(jt(t)):null}function Nt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Rt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=At(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Pt=(()=>{class t extends Rt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Dt(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Dt=r.Ob(Pt);class Lt extends Rt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Mt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Lt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function Ft(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ut(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Vt(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qt="VALID",Bt="INVALID",Ht="PENDING",Qt="DISABLED";function zt(t){return($t(t)?t.validators:t)||null}function Gt(t){return Array.isArray(t)?At(t):t||null}function Kt(t,e){return($t(e)?e.asyncValidators:t)||null}function Wt(t){return Array.isArray(t)?kt(t):t||null}function $t(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Yt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Gt(this._rawValidators),this._composedAsyncValidatorFn=Wt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===qt}get invalid(){return this.status===Bt}get pending(){return this.status==Ht}get disabled(){return this.status===Qt}get enabled(){return this.status!==Qt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Gt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Wt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ht,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qt,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qt,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==qt&&this.status!==Ht||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qt:qt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ht,this._hasOwnPendingAsyncValidator=!0;const e=St(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Xt?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Zt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Qt:this.errors?Bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ht)?Ht:this._anyControlsHaveStatus(Bt)?Bt:qt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){$t(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Jt extends Yt{constructor(t=null,e,n){super(zt(e),Kt(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Vt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Vt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Xt extends Yt{constructor(t,e,n){super(zt(e),Kt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Jt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Zt extends Yt{constructor(t,e,n){super(zt(e),Kt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Jt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const te={provide:Lt,useExisting:Object(r.U)(()=>ne)},ee=(()=>Promise.resolve(null))();let ne=(()=>{class t extends Lt{constructor(t,e,n,i){super(),this.control=new Jt,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Ot?n=t:Object.getPrototypeOf(t.constructor)===mt?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Nt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Nt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();Ft(e._rawValidators,n),Ft(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ut(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ut(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ee.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ee.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Pt,9),r.Kb(Et,10),r.Kb(Ct,10),r.Kb(bt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([te]),r.xb,r.yb]}),t})();const re={provide:bt,useExisting:Object(r.U)(()=>ie),multi:!0};let ie=(()=>{class t extends mt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([re]),r.xb]}),t})(),oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[oe]]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[se]}),t})();var ue=n("LRne"),ce=n("XNiG"),le=n("9ppp");class he extends ce.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new le.a;return this._value}next(t){super.next(this._value=t)}}var fe=n("z+Ro"),de=n("7o/Q");class pe extends de.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ge extends de.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ye=n("SeVD");function ve(t,e,n,r,i=new ge(t,n,r)){if(!i.closed)return e instanceof dt.a?e.subscribe(i):Object(ye.a)(e)(i)}var me=n("yCtX");const be={};class _e{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new we(t,this.resultSelector))}}class we extends pe{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(be),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(ve(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===be?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Oe=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Ee=n("bHdf");function Ce(...t){return Object(Ee.a)(1)(Object(ue.a)(...t))}var Te=n("EY2u");function Se(t){return new dt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ft.a)(n):Object(Te.b)()).subscribe(e)})}var Ie=n("EQ5u"),xe=n("zx2A");function je(t,e){return"function"==typeof e?n=>n.pipe(je((n,r)=>Object(ft.a)(t(n,r)).pipe(Object(gt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ae(t))}class Ae{constructor(t){this.project=t}call(t,e){return e.subscribe(new ke(t,this.project))}}class ke extends xe.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new xe.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(xe.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ne=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Re(t){return e=>0===t?Object(Te.b)():e.lift(new Pe(t))}class Pe{constructor(t){if(this.total=t,this.total<0)throw new Ne}call(t,e){return e.subscribe(new De(t,this.total))}}class De extends de.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Le(...t){const e=t[t.length-1];return Object(fe.a)(e)?(t.pop(),n=>Ce(t,n,e)):e=>Ce(t,e)}function Me(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Fe(t,e,n))}}class Fe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ue(t,this.accumulator,this.seed,this.hasSeed))}}class Ue extends de.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ve(t,e){return function(n){return n.lift(new qe(t,e))}}class qe{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Be(t,this.predicate,this.thisArg))}}class Be extends de.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function He(t){return function(e){const n=new Qe(t),r=e.lift(n);return n.caught=r}}class Qe{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ze(t,this.selector,this.caught))}}class ze extends xe.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new xe.a(this);this.add(r);const i=Object(xe.c)(n,r);i!==r&&this.add(i)}}}var Ge=n("5+tZ");function Ke(t,e){return Object(Ge.a)(t,e,1)}function We(t){return function(e){return 0===t?Object(Te.b)():e.lift(new $e(t))}}class $e{constructor(t){if(this.total=t,this.total<0)throw new Ne}call(t,e){return e.subscribe(new Ye(t,this.total))}}class Ye extends de.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Je(t=tn){return e=>e.lift(new Xe(t))}class Xe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ze(t,this.errorFactory))}}class Ze extends de.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(ow){t=ow}this.destination.error(t)}}}function tn(){return new Oe}function en(t=null){return e=>e.lift(new nn(t))}class nn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new rn(t,this.defaultValue))}}class rn extends de.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var on=n("SpAZ");function sn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ve((e,n)=>t(e,n,r)):on.a,Re(1),n?en(e):Je(()=>new Oe))}var an=n("vkgz"),un=n("x+ZX"),cn=n("quSY");class ln{constructor(t){this.callback=t}call(t,e){return e.subscribe(new hn(t,this.callback))}}class hn extends de.a{constructor(t,e){super(t),this.add(new cn.a(e))}}class fn{constructor(t,e){this.id=t,this.url=e}}class dn extends fn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pn extends fn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gn extends fn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yn extends fn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vn extends fn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mn extends fn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bn extends fn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _n extends fn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wn extends fn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class En{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class In{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jn="primary";class An{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function kn(t){return new An(t)}function Nn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Rn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Pn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Dn(t[i],e[i]))return!1;return!0}function Dn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ln(t){return Array.prototype.concat.apply([],t)}function Mn(t){return t.length>0?t[t.length-1]:null}function Fn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Un(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ft.a)(Promise.resolve(t)):Object(ue.a)(t)}function Vn(t,e,n){return n?function(t,e){return Pn(t,e)}(t.queryParams,e.queryParams)&&qn(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Dn(t[n],e[n]))}(t.queryParams,e.queryParams)&&Bn(t.root,e.root)}function qn(t,e){if(!Kn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!qn(t.children[n],e.children[n]))return!1}return!0}function Bn(t,e){return Hn(t,e,e.segments)}function Hn(t,e,n){if(t.segments.length>n.length)return!!Kn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Kn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Bn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Kn(t.segments,r)&&!!t.children.primary&&Hn(t.children.primary,e,i)}}class Qn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return Yn.serialize(this)}}class zn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Fn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jn(this)}}class Gn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=kn(this.parameters)),this._parameterMap}toString(){return ir(this)}}function Kn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Wn{}class $n{parse(t){const e=new cr(t);return new Qn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Xn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${tr(e)}=${tr(t)}`).join("&"):`${tr(e)}=${tr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Yn=new $n;function Jn(t){return t.segments.map(t=>ir(t)).join("/")}function Xn(t,e){if(!t.hasChildren())return Jn(t);if(e){const e=t.children.primary?Xn(t.children.primary,!1):"",n=[];return Fn(t.children,(t,e)=>{e!==jn&&n.push(`${e}:${Xn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Fn(t.children,(t,r)=>{r===jn&&(n=n.concat(e(t,r)))}),Fn(t.children,(t,r)=>{r!==jn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===jn?[Xn(t.children.primary,!1)]:[`${n}:${Xn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Jn(t)}/${e[0]}`:`${Jn(t)}/(${e.join("//")})`}}function Zn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tr(t){return Zn(t).replace(/%3B/gi,";")}function er(t){return Zn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nr(t){return decodeURIComponent(t)}function rr(t){return nr(t.replace(/\+/g,"%20"))}function ir(t){return`${er(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${er(t)}=${er(e[t])}`).join("")}`;var e}const or=/^[^\/()?;=#]+/;function sr(t){const e=t.match(or);return e?e[0]:""}const ar=/^[^=?&#]+/,ur=/^[^?&#]+/;class cr{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zn([],{}):new zn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new zn(t,e)),n}parseSegment(){const t=sr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Gn(nr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=sr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=sr(this.remaining);t&&(n=t,this.capture(n))}t[nr(e)]=nr(n)}parseQueryParam(t){const e=function(t){const e=t.match(ar);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ur);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=rr(e),i=rr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=jn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new zn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class lr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=hr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=hr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return fr(t,this._root).map(t=>t.value)}}function hr(t,e){if(t===e.value)return e;for(const n of e.children){const e=hr(t,n);if(e)return e}return null}function fr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fr(t,n);if(r.length)return r.unshift(e),r}return[]}class dr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function pr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class gr extends lr{constructor(t,e){super(t),this.snapshot=e,wr(this,t)}toString(){return this.snapshot.toString()}}function yr(t,e){const n=function(t,e){const n=new br([],{},{},"",{},jn,e,null,t.root,-1,{});return new _r("",new dr(n,[]))}(t,e),r=new he([new Gn("",{})]),i=new he({}),o=new he({}),s=new he({}),a=new he(""),u=new vr(r,i,s,a,o,jn,e,n.root);return u.snapshot=n.root,new gr(new dr(u,[]),n)}class vr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(gt.a)(t=>kn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(gt.a)(t=>kn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class br{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _r extends lr{constructor(t,e){super(e),this.url=t,wr(this,e)}toString(){return Or(this._root)}}function wr(t,e){e.value._routerState=t,e.children.forEach(e=>wr(t,e))}function Or(t){const e=t.children.length>0?` { ${t.children.map(Or).join(", ")} } `:"";return`${t.value}${e}`}function Er(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Pn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Pn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cr(t,e){return Pn(t.params,e.params)&&function(t,e){return Kn(t,e)&&t.every((t,n)=>Pn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Cr(t.parent,e.parent))}function Tr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Tr(t,e,r);return Tr(t,e)})}(t,e,n);return new dr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Sr(e,t),t}{const n=new vr(new he((r=e.value).url),new he(r.params),new he(r.queryParams),new he(r.fragment),new he(r.data),r.outlet,r.component,r),i=e.children.map(e=>Tr(t,e));return new dr(n,i)}}var r}function Sr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Sr(t.children[n],e.children[n])}function Ir(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function xr(t){return"object"==typeof t&&null!=t&&t.outlets}function jr(t,e,n,r,i){let o={};return r&&Fn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Qn(n.root===t?e:Ar(n.root,t,e),o,i)}function Ar(t,e,n){const r={};return Fn(t.children,(t,i)=>{r[i]=t===e?n:Ar(t,e,n)}),new zn(t.segments,r)}class kr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ir(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(xr);if(r&&r!==Mn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Rr(t,e,n){if(t||(t=new zn([],{})),0===t.segments.length&&t.hasChildren())return Pr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(xr(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Fr(a,u,e))return o;r+=2}else{if(!Fr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new zn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new zn(t.segments.slice(r.pathIndex),t.children),Pr(e,0,i)}return r.match&&0===i.length?new zn(t.segments,{}):r.match&&!t.hasChildren()?Dr(t,e,n):r.match?Pr(t,0,i):Dr(t,e,n)}function Pr(t,e,n){if(0===n.length)return new zn(t.segments,{});{const r=function(t){return xr(t[0])?t[0].outlets:{[jn]:t}}(n),i={};return Fn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Rr(t.children[r],e,n))}),Fn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new zn(t.segments,i)}}function Dr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(xr(o)){const t=Lr(o.outlets);return new zn(r,t)}if(0===i&&Ir(n[0])){r.push(new Gn(t.segments[e].path,Mr(n[0]))),i++;continue}const s=xr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ir(a)?(r.push(new Gn(s,Mr(a))),i+=2):(r.push(new Gn(s,{})),i++)}return new zn(r,{})}function Lr(t){const e={};return Fn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Dr(new zn([],{}),0,t))}),e}function Mr(t){const e={};return Fn(t,(t,n)=>e[n]=`${t}`),e}function Fr(t,e,n){return t==n.path&&Pn(e,n.parameters)}class Ur{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Er(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=pr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Fn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=pr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=pr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new In(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Tn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Er(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Vr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Vr(t){Er(t.value),t.children.forEach(Vr)}class qr{constructor(t,e){this.routes=t,this.module=e}}function Br(t){return"function"==typeof t}function Hr(t){return t instanceof Qn}const Qr=Symbol("INITIAL_VALUE");function zr(){return je(t=>function(...t){let e,n;return Object(fe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(pt.a)(t[0])&&(t=t[0]),Object(me.a)(t,n).lift(new _e(e))}(t.map(t=>t.pipe(Re(1),Le(Qr)))).pipe(Me((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Qr)return t;if(r===Qr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Hr(r))return r}return t},t)},Qr),Ve(t=>t!==Qr),Object(gt.a)(t=>Hr(t)?t:!0===t),Re(1)))}let Gr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Ui]},encapsulation:2}),t})();function Kr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Wr(r,$r(e,r))}}function Wr(t,e){t.children&&Kr(t.children,e)}function $r(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Yr(t){const e=t.children&&t.children.map(Yr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==jn&&(n.component=Gr),n}function Jr(t){return t.outlet||jn}function Xr(t,e){const n=t.filter(t=>Jr(t)===e);return n.push(...t.filter(t=>Jr(t)!==e)),n}const Zr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ti(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Zr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Rn)(n,t,e);if(!i)return Object.assign({},Zr);const o={};Fn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ei(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ni(t,e,n)&&Jr(n)!==jn)}(t,n,r)){const i=new zn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Jr(o)!==jn){const n=new zn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Jr(o)]=n}return i}(t,e,r,new zn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ni(t,e,n))}(t,n,r)){const o=new zn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ni(t,n,a)&&!i[Jr(a)]){const n=new zn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Jr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new zn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ni(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ri(t,e,n,r){return!!(Jr(t)===r||r!==jn&&ni(e,n,t))&&("**"===t.path||ti(e,t,n).matched)}function ii(t,e,n){return 0===e.length&&!t.children[n]}class oi{constructor(t){this.segmentGroup=t||null}}class si{constructor(t){this.urlTree=t}}function ai(t){return new dt.a(e=>e.error(new oi(t)))}function ui(t){return new dt.a(e=>e.error(new si(t)))}function ci(t){return new dt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class li{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=ei(this.urlTree.root,[],[],this.config).segmentGroup,e=new zn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,jn).pipe(Object(gt.a)(t=>this.createUrlTree(hi(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(He(t=>{if(t instanceof si)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof oi)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,jn).pipe(Object(gt.a)(e=>this.createUrlTree(hi(e),t.queryParams,t.fragment))).pipe(He(t=>{if(t instanceof oi)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new zn([],{[jn]:t}):t;return new Qn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(gt.a)(t=>new zn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ft.a)(r).pipe(Ke(r=>{const i=n.children[r],o=Xr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(gt.a)(t=>({segment:t,outlet:r})))}),Me((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ve((e,n)=>t(e,n,r)):on.a,We(1),n?en(e):Je(()=>new Oe))}())}expandSegment(t,e,n,r,i,o){return Object(ft.a)(n).pipe(Ke(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(He(t=>{if(t instanceof oi)return Object(ue.a)(null);throw t}))),sn(t=>!!t),He((t,n)=>{if(t instanceof Oe||"EmptyError"===t.name){if(ii(e,r,i))return Object(ue.a)(new zn([],{}));throw new oi(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ri(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ai(e):ai(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ui(i):this.lineralizeSegments(n,i).pipe(Object(Ge.a)(n=>{const i=new zn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ti(e,r,i);if(!s)return ai(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ui(l):this.lineralizeSegments(r,l).pipe(Object(Ge.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ue.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(gt.a)(t=>(n._loadedConfig=t,new zn(r,{})))):Object(ue.a)(new zn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=ti(e,n,r);if(!o)return ai(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Ge.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=ei(e,s,u,o),l=new zn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(gt.a)(t=>new zn(s,t)));if(0===o.length&&0===c.length)return Object(ue.a)(new zn(s,{}));const h=Jr(n)===i;return this.expandSegment(r,l,o,c,h?jn:i,!0).pipe(Object(gt.a)(t=>new zn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ue.a)(new qr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ue.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Ge.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(gt.a)(t=>(e._loadedConfig=t,t))):function(t){return new dt.a(e=>e.error(Nn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ue.a)(new qr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ue.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Br(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Br(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Un(o)});return Object(ue.a)(i).pipe(zr(),Object(an.a)(t=>{if(!Hr(t))return;const e=Nn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(gt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ue.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ci(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Qn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Fn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Fn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new zn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function hi(t){const e={};for(const n of Object.keys(t.children)){const r=hi(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new zn(t.segments.concat(e.segments),e.children)}return t}(new zn(t.segments,e))}class fi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class di{constructor(t,e){this.component=t,this.route=e}}function pi(t,e,n){const r=t._root;return yi(r,e?e._root:null,n,[r.value])}function gi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function yi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=pr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Kn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kn(t.url,e.url)||!Pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cr(t,e)||!Pn(t.queryParams,e.queryParams);case"paramsChange":default:return!Cr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new fi(r)):(o.data=s.data,o._resolvedData=s._resolvedData),yi(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new di(a.outlet.component,s))}else s&&vi(e,a,i),i.canActivateChecks.push(new fi(r)),yi(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Fn(o,(t,e)=>vi(t,n.getContext(e),i)),i}function vi(t,e,n){const r=pr(t),i=t.value;Fn(r,(t,r)=>{vi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new di(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class mi{}function bi(t){return new dt.a(e=>e.error(t))}class _i{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=ei(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,jn);if(null===e)return null;const n=new br([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new dr(n,e),i=new _r(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=mr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Xr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!wi(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===jn?-1:e.value.outlet===jn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ii(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ri(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Mn(n).parameters:{};i=new br(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ci(t),Jr(t),t.component,t,Oi(e),Ei(e)+n.length,Ti(t))}else{const r=ti(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new br(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ci(t),Jr(t),t.component,t,Oi(e),Ei(e)+o.length,Ti(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ei(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new dr(i,t)]}if(0===a.length&&0===c.length)return[new dr(i,[])];const l=Jr(t)===r,h=this.processSegment(a,u,c,l?jn:r);return null===h?null:[new dr(i,h)]}}function wi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Oi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ei(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ci(t){return t.data||{}}function Ti(t){return t.resolve||{}}function Si(t){return je(e=>{const n=t(e);return n?Object(ft.a)(n).pipe(Object(gt.a)(()=>e)):Object(ue.a)(e)})}class Ii extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const xi=new r.r("ROUTES");class ji{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(gt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new qr(Ln(i.injector.get(xi,void 0,r.q.Self|r.q.Optional)).map(Yr),i)}),He(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ie.a(n,()=>new ce.a).pipe(Object(un.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ft.a)(this.loader.load(t)):Un(t()).pipe(Object(Ge.a)(t=>t instanceof r.w?Object(ue.a)(t):Object(ft.a)(this.compiler.compileModuleAsync(t))))}}class Ai{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ki,this.attachRef=null}}class ki{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ai,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ni{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ri(t){throw t}function Pi(t,e,n){return e.parse("/")}function Di(t,e){return Object(ue.a)(null)}let Li=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ce.a,this.errorHandler=Ri,this.malformedUriErrorHandler=Pi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Di,afterPreactivation:Di},this.urlHandlingStrategy=new Ni,this.routeReuseStrategy=new Ii,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Qn(new zn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ji(s,a,t=>this.triggerEvent(new On(t)),t=>this.triggerEvent(new En(t))),this.routerState=yr(this.currentUrlTree,this.rootComponentType),this.transitions=new he({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ve(t=>0!==t.id),Object(gt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),je(t=>{let n=!1,r=!1;return Object(ue.a)(t).pipe(Object(an.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),je(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ue.a)(t).pipe(je(t=>{const n=this.transitions.getValue();return e.next(new dn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Te.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,je(t=>function(t,e,n,r,i){return new li(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(gt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(an.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Ge.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new _i(t,e,n,r,i,o).recognize();return null===s?bi(new mi):Object(ue.a)(s)}catch(ow){return bi(ow)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(gt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(an.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new vn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new dn(n,this.serializeUrl(r),i,o);e.next(a);const u=yr(r,this.rootComponentType).snapshot;return Object(ue.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Te.a}),Si(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(an.a)(t=>{const e=new mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(gt.a)(t=>Object.assign(Object.assign({},t),{guards:pi(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Ge.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ue.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ft.a)(t).pipe(Object(Ge.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ue.a)(!0);const s=o.map(o=>{const s=gi(o,e,i);let a;if(function(t){return t&&Br(t.canDeactivate)}(s))a=Un(s.canDeactivate(t,e,n,r));else{if(!Br(s))throw new Error("Invalid CanDeactivate guard");a=Un(s(t,e,n,r))}return a.pipe(sn())});return Object(ue.a)(s).pipe(zr())}(t.component,t.route,n,e,r)),sn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Ge.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ft.a)(e).pipe(Ke(e=>Ce(function(t,e){return null!==t&&e&&e(new Cn(t)),Object(ue.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Sn(t)),Object(ue.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Se(()=>{const i=e.guards.map(i=>{const o=gi(i,e.node,n);let s;if(function(t){return t&&Br(t.canActivateChild)}(o))s=Un(o.canActivateChild(r,t));else{if(!Br(o))throw new Error("Invalid CanActivateChild guard");s=Un(o(r,t))}return s.pipe(sn())});return Object(ue.a)(i).pipe(zr())}));return Object(ue.a)(i).pipe(zr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ue.a)(!0);const i=r.map(r=>Se(()=>{const i=gi(r,e,n);let o;if(function(t){return t&&Br(t.canActivate)}(i))o=Un(i.canActivate(e,t));else{if(!Br(i))throw new Error("Invalid CanActivate guard");o=Un(i(e,t))}return o.pipe(sn())}));return Object(ue.a)(i).pipe(zr())}(t,e.route,n))),sn(t=>!0!==t,!0))}(r,o,t,e):Object(ue.a)(n)),Object(gt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(an.a)(t=>{if(Hr(t.guardsResult)){const e=Nn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new bn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ve(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new gn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Si(t=>{if(t.guards.canActivateChecks.length)return Object(ue.a)(t).pipe(Object(an.a)(t=>{const e=new _n(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),je(t=>{let n=!1;return Object(ue.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Ge.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ue.a)(t);let o=0;return Object(ft.a)(n).pipe(Ke(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ue.a)({});const o={};return Object(ft.a)(i).pipe(Object(Ge.a)(i=>function(t,e,n,r){const i=gi(t,e,r);return Un(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(an.a)(t=>{o[i]=t}))),We(1),Object(Ge.a)(()=>Object.keys(o).length===i.length?Object(ue.a)(o):Te.a))}(t._resolve,t,e,r).pipe(Object(gt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),mr(t,n).resolve),null)))}(t.route,e,r,i)),Object(an.a)(()=>o++),We(1),Object(Ge.a)(e=>o===n.length?Object(ue.a)(t):Te.a))})),Object(an.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new gn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(an.a)(t=>{const e=new wn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Si(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(gt.a)(t=>{const e=function(t,e,n){const r=Tr(t,e._root,n?n._root:void 0);return new gr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(an.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(gt.a)(t=>(new Ur(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(an.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new gn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new ln(i))),He(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Hr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new gn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new yn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(xf){t.reject(xf)}}var i;return Te.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Kr(t),this.config=t.map(Yr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return jr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new kr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Fn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new kr(n,e,r)}(n);if(o.toRoot())return jr(e.root,new zn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Nr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Nr(t,t===e.root,0)}const r=Ir(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Nr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Pr(s.segmentGroup,s.index,o.commands):Rr(s.segmentGroup,s.index,o.commands);return jr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Hr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(ow){e=this.malformedUriErrorHandler(ow,this.urlSerializer,t)}return e}isActive(t,e){if(Hr(t))return Vn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Vn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new pn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.N),r.Qb(Wn),r.Qb(ki),r.Qb(w),r.Qb(r.s),r.Qb(r.x),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Mi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new ce.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Fi(this.skipLocationChange),replaceUrl:Fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Li),r.Kb(vr),r.Rb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Tb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Fi(t){return""===t||!!t}let Ui=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||jn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Vi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ki),r.Kb(r.Q),r.Kb(r.j),r.Rb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Vi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===vr?this.route:t===ki?this.childContexts:this.parent.get(t,e)}}class qi{}class Bi{preload(t,e){return Object(ue.a)(null)}}let Hi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ji(e,n,e=>t.triggerEvent(new On(e)),e=>t.triggerEvent(new En(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ve(t=>t instanceof pn),Ke(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ft.a)(n).pipe(Object(Ee.a)(),Object(gt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ue.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Ge.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Li),r.Qb(r.x),r.Qb(r.i),r.Qb(r.s),r.Qb(qi))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Qi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new xn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Li),r.Qb(N),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const zi=new r.r("ROUTER_CONFIGURATION"),Gi=new r.r("ROUTER_FORROOT_GUARD"),Ki=[w,{provide:Wn,useClass:$n},{provide:Li,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Li(null,t,e,n,r,i,s,Ln(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Wn,ki,w,r.s,r.x,r.i,xi,zi,[class{},new r.B],[class{},new r.B]]},ki,{provide:vr,useFactory:function(t){return t.routerState.root},deps:[Li]},{provide:r.x,useClass:r.K},Hi,Bi,class{preload(t,e){return e().pipe(He(()=>Object(ue.a)(null)))}},{provide:zi,useValue:{enableTracing:!1}}];function Wi(){return new r.z("Router",Li)}let $i=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ki,Zi(e),{provide:Gi,useFactory:Xi,deps:[[Li,new r.B,new r.J]]},{provide:zi,useValue:n||{}},{provide:y,useFactory:Ji,deps:[a,[new r.p(m),new r.B],zi]},{provide:Qi,useFactory:Yi,deps:[Li,N,zi]},{provide:qi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Bi},{provide:r.z,multi:!0,useFactory:Wi},[to,{provide:r.d,multi:!0,useFactory:eo,deps:[to]},{provide:ro,useFactory:no,deps:[to]},{provide:r.b,multi:!0,useExisting:ro}]]}}static forChild(e){return{ngModule:t,providers:[Zi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Gi,8),r.Qb(Li,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function Yi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Qi(t,e,n)}function Ji(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Xi(t){return"guarded"}function Zi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:xi,multi:!0,useValue:t}]}let to=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ce.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Li),r=this.injector.get(zi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ue.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(zi),n=this.injector.get(Hi),i=this.injector.get(Qi),o=this.injector.get(Li),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function eo(t){return t.appInitializer.bind(t)}function no(t){return t.bootstrapListener.bind(t)}const ro=new r.r("Router Initializer");let io=(()=>{class t{constructor(){this.title="Clase 1",this.edadUno=0,this.edadDos=0,this.prom=0,this.sum=0}ngOnInit(){}suma(){this.sum=this.edadUno+this.edadDos}promedio(){this.prom=(this.edadUno+this.edadDos)/2}calcular(){this.suma(),this.promedio()}limpiar(){this.edadUno=0,this.edadDos=0,this.prom=0,this.sum=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-ejercicios"]],decls:28,vars:5,consts:[["type","number",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"h1"),r.ac(1),r.Mb(),r.Lb(2,"br"),r.Nb(3,"div"),r.Nb(4,"label"),r.ac(5,"EdadUno "),r.Mb(),r.Nb(6,"input",0),r.Tb("ngModelChange",function(t){return e.edadUno=t}),r.Mb(),r.Mb(),r.Lb(7,"br"),r.Nb(8,"div"),r.Nb(9,"label"),r.ac(10,"EdadDos "),r.Mb(),r.Nb(11,"input",0),r.Tb("ngModelChange",function(t){return e.edadDos=t}),r.Mb(),r.Mb(),r.Lb(12,"br"),r.Nb(13,"div"),r.Nb(14,"label"),r.ac(15,"Suma "),r.Mb(),r.Nb(16,"input",0),r.Tb("ngModelChange",function(t){return e.sum=t}),r.Mb(),r.Mb(),r.Lb(17,"br"),r.Nb(18,"div"),r.Nb(19,"label"),r.ac(20,"Prom "),r.Mb(),r.Nb(21,"input",0),r.Tb("ngModelChange",function(t){return e.prom=t}),r.Mb(),r.Mb(),r.Lb(22,"br"),r.Nb(23,"div"),r.Nb(24,"button",1),r.Tb("click",function(){return e.calcular()}),r.ac(25,"Calcular"),r.Mb(),r.Nb(26,"button",1),r.Tb("click",function(){return e.limpiar()}),r.ac(27,"Limpiar"),r.Mb(),r.Mb()),2&t&&(r.Ab(1),r.bc(" ",e.title,"\n"),r.Ab(5),r.Vb("ngModel",e.edadUno),r.Ab(5),r.Vb("ngModel",e.edadDos),r.Ab(5),r.Vb("ngModel",e.sum),r.Ab(5),r.Vb("ngModel",e.prom))},directives:[ie,Ot,Mt,ne],styles:[""]}),t})(),oo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-error"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"h1"),r.ac(2," ESTO ES UN ERROR "),r.Mb(),r.Mb())},styles:[""]}),t})(),so=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}ejercicio(){this.router.navigate(["/ejercicios"])}login(){this.router.navigate(["/login"])}quiensoy(){this.router.navigate(["/quiensoy"])}registro(){this.router.navigate(["/registro"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Li))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home"]],decls:13,vars:0,consts:[[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"h1"),r.ac(1,"BIENVENIDO"),r.Mb(),r.Lb(2,"br"),r.Nb(3,"button",0),r.Tb("click",function(){return e.ejercicio()}),r.ac(4,"JUEGOS"),r.Mb(),r.Nb(5,"button",0),r.Tb("click",function(){return e.login()}),r.ac(6,"INGRESAR"),r.Mb(),r.Nb(7,"button",0),r.Tb("click",function(){return e.registro()}),r.ac(8,"REGISTRARSE"),r.Mb(),r.Nb(9,"button",0),r.Tb("click",function(){return e.quiensoy()}),r.ac(10,"QUIEN SOY"),r.Mb(),r.Nb(11,"button"),r.ac(12,"LISTADOS"),r.Mb())},styles:[""]}),t})();class ao{constructor(t,e,n){this.nombre="",this.correo="",this.clave="",this.nombre=t,this.correo=e,this.clave=n}}const uo={apiKey:"AIzaSyCgsvLDOIIs2fSPxkqGya0jpjS8FGguhtM",authDomain:"saladejuegos-94f77.firebaseapp.com",projectId:"saladejuegos-94f77",storageBucket:"saladejuegos-94f77.appspot.com",messagingSenderId:"726113077594",appId:"1:726113077594:web:e168be5bc0f35cf28ecb63",measurementId:"G-0N7PKLRVY0"};class co{}class lo{}class ho{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ho?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ho;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ho?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class fo{encodeKey(t){return po(t)}encodeValue(t){return po(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function po(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class go{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new fo,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new go({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function yo(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function vo(t){return"undefined"!=typeof Blob&&t instanceof Blob}function mo(t){return"undefined"!=typeof FormData&&t instanceof FormData}class bo{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new ho),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new go,this.urlWithParams=e}serializeBody(){return null===this.body?null:yo(this.body)||vo(this.body)||mo(this.body)||"string"==typeof this.body?this.body:this.body instanceof go?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mo(this.body)?null:vo(this.body)?this.body.type||null:yo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof go?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new bo(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var _o=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class wo{constructor(t,e=200,n="OK"){this.headers=t.headers||new ho,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Oo extends wo{constructor(t={}){super(t),this.type=_o.ResponseHeader}clone(t={}){return new Oo({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Eo extends wo{constructor(t={}){super(t),this.type=_o.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Eo({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Co extends wo{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function To(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let So=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof bo)r=t;else{let i,o;i=n.headers instanceof ho?n.headers:new ho(n.headers),n.params&&(o=n.params instanceof go?n.params:new go({fromObject:n.params})),r=new bo(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(ue.a)(r).pipe(Ke(t=>this.handler.handle(t)));if(t instanceof bo||"events"===n.observe)return i;const o=i.pipe(Ve(t=>t instanceof Eo));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(gt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(gt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(gt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(gt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new go).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,To(n,e))}post(t,e,n={}){return this.request("POST",t,To(n,e))}put(t,e,n={}){return this.request("PUT",t,To(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(co))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Io{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const xo=new r.r("HTTP_INTERCEPTORS");let jo=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Ao=/^\)\]\}',?\n/;class ko{}let No=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ro=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new dt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new ho(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Oo({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Ao,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Eo({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Co({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Co({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:_o.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:_o.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:_o.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ko))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Po=new r.r("XSRF_COOKIE_NAME"),Do=new r.r("XSRF_HEADER_NAME");class Lo{}let Mo=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s),r.Qb(r.C),r.Qb(Po))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Fo=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Lo),r.Qb(Do))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Uo=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(xo,[]);this.chain=t.reduceRight((t,e)=>new Io(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lo),r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Vo=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Fo,useClass:jo}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Po,useValue:e.cookieName}:[],e.headerName?{provide:Do,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Fo,{provide:xo,useExisting:Fo,multi:!0},{provide:Lo,useClass:Mo},{provide:Po,useValue:"XSRF-TOKEN"},{provide:Do,useValue:"X-XSRF-TOKEN"}]}),t})(),qo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[So,{provide:co,useClass:Uo},Ro,{provide:lo,useExisting:Ro},No,{provide:ko,useExisting:No}],imports:[[Vo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var Bo=n("D0XW"),Ho=n("VRyK"),Qo=n("w1tV");function zo(t,e){return n=>n.lift(new Go(t,e))}class Go{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ko(t,this.compare,this.keySelector))}}class Ko extends de.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Wo{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new $o(t,this.observables,this.project))}}class $o extends pe{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(ve(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Yo{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Jo(t,this.predicate))}}class Jo extends de.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Xo=n("spgP"),Zo=(n("6Uf2"),n("pxpQ")),ts=n("qgXg"),es=n("Ylt2");class ns extends ce.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new rs(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new le.a;if(this.isStopped||this.hasError?o=cn.a.EMPTY:(this.observers.push(t),o=new es.a(this,t)),r&&t.add(t=new Zo.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ts.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class rs{constructor(t,e){this.time=t,this.value=e}}function is(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new ns(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function os(t,e){return e?je(()=>t,e):je(()=>t)}var ss=n("tf+s");const as=new r.r("angularfire2.auth.use-emulator"),us=new r.r("angularfire2.auth.settings"),cs=new r.r("angularfire2.auth.tenant-id"),ls=new r.r("angularfire2.auth.langugage-code"),hs=new r.r("angularfire2.auth.use-device-language"),fs=new r.r("angularfire.auth.persistence");let ds=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Xo.e(i),f=Object(Xo.i)(h),d=new ce.a,p=Object(ue.a)(void 0).pipe(Object(Zo.b)(h.outsideAngular),je(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(gt.a)(()=>Object(Xo.h)(t,i,e)),Object(gt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Xo.g)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),is({bufferSize:1,refCount:!1}));if(k(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ue.a)(null);else{p.pipe(sn()).subscribe();const t=p.pipe(je(t=>t.getRedirectResult().then(t=>t,()=>null)),f,is({bufferSize:1,refCount:!1})),e=t=>new dt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(je(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(je(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(os(n),Object(ss.a)(h.outsideAngular),Object(Zo.b)(h.insideAngular)),this.user=t.pipe(os(r),Object(ss.a)(h.outsideAngular),Object(Zo.b)(h.insideAngular)),this.idToken=this.user.pipe(je(t=>t?Object(ft.a)(t.getIdToken()):Object(ue.a)(null))),this.idTokenResult=this.user.pipe(je(t=>t?Object(ft.a)(t.getIdTokenResult()):Object(ue.a)(null))),this.credential=Object(Ho.a)(t,d,this.authState.pipe(Ve(t=>!t))).pipe(Object(gt.a)(t=>(null==t?void 0:t.user)?t:null),Object(ss.a)(h.outsideAngular),Object(Zo.b)(h.insideAngular))}return Object(Xo.j)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xo.c),r.Qb(Xo.b,8),r.Qb(r.C),r.Qb(r.A),r.Qb(as,8),r.Qb(us,8),r.Qb(cs,8),r.Qb(ls,8),r.Qb(hs,8),r.Qb(fs,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Xo.c),Object(r.Qb)(Xo.b,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(as,8),Object(r.Qb)(us,8),Object(r.Qb)(cs,8),Object(r.Qb)(ls,8),Object(r.Qb)(hs,8),Object(r.Qb)(fs,8))},token:t,providedIn:"any"}),t})();Object(Xo.f)(ds,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let ps=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[ds]}),t})();var gs=n("Jgta");function ys(t){return null==t}function vs(t){return"function"==typeof t.set}function ms(t,e){return vs(e)?e:t.ref(e)}function bs(t,e){if("string"==typeof t)return e.stringCase();if(vs(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function _s(t,e,n="on",r=Bo.b){return new dt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(gt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Qo.a)())}function ws(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Os(t,e){const{payload:n,prevKey:r,key:i}=e,o=ws(t,i),s=function(t,e){if(ys(e))return 0;{const n=ws(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Es(t){return(ys(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Cs(t,e,n){return function(t,e,n){return _s(t,"value","once",n).pipe(je(r=>{const i=[Object(ue.a)(r)];return e.forEach(e=>i.push(_s(t,e,"on",n))),Object(Ho.a)(...i).pipe(Me(Os,[]))}),zo())}(t,e=Es(e),n)}function Ts(t,e,n){const r=(e=Es(e)).map(e=>_s(t,e,"on",n));return Object(Ho.a)(...r)}function Ss(t,e){return function(n,r){return bs(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Is(t,e){return function(){return _s(t,"value","on",e)}}const xs=new r.r("angularfire2.realtimeDatabaseURL"),js=new r.r("angularfire2.database.use-emulator");let As=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Xo.e(i),this.keepUnstableUntilFirst=Object(Xo.i)(this.schedulers);const a=o,u=Object(Xo.h)(t,i,e);!gs.a.auth&&s&&Object(Xo.k)(),this.database=Object(Xo.g)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>ms(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Ss(r,"update"),set:Ss(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?bs(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Cs(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Ts(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return _s(t,"value","on",e).pipe(Object(gt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Wo(t,n))}}(e),Object(gt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Yo(r))),Object(gt.a)(t=>t.actions));var r}(t,Ts(t,e).pipe(Me((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Cs(t,r,n).pipe(Object(gt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>ms(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Is(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Is(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(gt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xo.c),r.Qb(Xo.b,8),r.Qb(xs,8),r.Qb(r.C),r.Qb(r.A),r.Qb(js,8),r.Qb(as,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Xo.c),Object(r.Qb)(Xo.b,8),Object(r.Qb)(xs,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(js,8),Object(r.Qb)(as,8))},token:t,providedIn:"any"}),t})(),ks=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[As]}),t})(),Ns=(()=>{class t{constructor(t,e){this.http=t,this.firebase=e,this.users=[],this.usuarios=this.firebase.list("usuarios"),this.usuarios.snapshotChanges().forEach(t=>{this.users=[],t.forEach(t=>{const e=t.payload.toJSON();this.users.push(e)})})}obtenerUsuarios(){return this.usuarios}registrarEnBD(t){return this.http.post("https://saladejuegos-94f77-default-rtdb.firebaseio.com//usuarios.json",t)}validaLogin(t){let e=!1;return this.users.forEach(n=>{t.correo==n.correo&&t.clave==n.clave&&(e=!0)}),e}validaAlta(t){let e=!0;return this.users.forEach(n=>{t.correo==n.correo&&(e=!1)}),e}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(So),r.Qb(As))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rs=(()=>{class t{constructor(t){this.firebaseAuth=t}registro(t,e){return this.firebaseAuth.createUserWithEmailAndPassword(t,e)}login(t,e){return this.firebaseAuth.signInWithEmailAndPassword(t,e)}logueado(){return this.firebaseAuth.currentUser.then(t=>!!t)}logOut(){return this.firebaseAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ds))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ps=function(){return["/"]},Ds=function(){return["/"]},Ls=[{path:"",component:so},{path:"login",component:(()=>{class t{constructor(t,e,n){this.router=t,this.us=e,this.auth=n,this.logueo=!0,this.usuarios=[],this.usuario=new ao("","","")}ngOnInit(){this.us.obtenerUsuarios().snapshotChanges().forEach(t=>{this.usuarios=[],t.forEach(t=>{const e=t.payload.toJSON();this.usuarios.push(e)}),console.log(this.usuarios)})}logearse(){this.logueo=this.us.validaLogin(this.usuario),console.log(this.logueo),1==this.logueo?this.auth.login(this.usuario.correo,this.usuario.clave).then(t=>{var e;this.usuario=null===(e=t.user)||void 0===e?void 0:e.toJSON(),console.log(this.usuario),alert("Logueo existoso!!"),this.router.navigate(["/error",{Usuario:this.usuario}])}):alert("La clave o el correo son incorrectos!")}error(){this.router.navigate(["/error"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Li),r.Kb(Ns),r.Kb(Rs))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:15,vars:4,consts:[["type","email","placeholder","ingrese correo electronico",3,"ngModel","ngModelChange"],["type","password","placeholder","ingrese contrase\xf1a",3,"ngModel","ngModelChange"],[3,"routerLink"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"h1"),r.ac(2,"LOGIN"),r.Mb(),r.Nb(3,"div"),r.Nb(4,"input",0),r.Tb("ngModelChange",function(t){return e.usuario.correo=t}),r.Mb(),r.Lb(5,"br"),r.Nb(6,"input",1),r.Tb("ngModelChange",function(t){return e.usuario.clave=t}),r.Mb(),r.Lb(7,"br"),r.Nb(8,"button",2),r.ac(9,"Volver"),r.Mb(),r.Lb(10,"br"),r.Nb(11,"button",3),r.Tb("click",function(){return e.logearse()}),r.ac(12,"Enviar datos"),r.Mb(),r.Mb(),r.Mb(),r.Nb(13,"button",3),r.Tb("click",function(){return e.error()}),r.ac(14,"ERROR"),r.Mb()),2&t&&(r.Ab(4),r.Vb("ngModel",e.usuario.correo),r.Ab(2),r.Vb("ngModel",e.usuario.clave),r.Ab(2),r.Vb("routerLink",r.Wb(3,Ps)))},directives:[Ot,Mt,ne,Mi],styles:[""]}),t})()},{path:"quiensoy",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-quiensoy"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"h1"),r.ac(2," Soy un alumno de UTN\n"),r.Mb(),r.Mb())},styles:[""]}),t})()},{path:"registro",component:(()=>{class t{constructor(t,e,n){this.auth=t,this.us=e,this.router=n,this.registro=!0,this.usuarios=[],this.usuario=new ao("","","")}ngOnInit(){this.us.obtenerUsuarios().snapshotChanges().forEach(t=>{this.usuarios=[],t.forEach(t=>{const e=t.payload.toJSON();this.usuarios.push(e)}),console.log(this.usuarios)})}registrarse(){this.registro=this.us.validaAlta(this.usuario),console.log(this.registro),1==this.registro?this.auth.registro(this.usuario.correo,this.usuario.clave).then(t=>{var e;this.usuario.id=null===(e=t.user)||void 0===e?void 0:e.uid,this.us.registrarEnBD(this.usuario).subscribe(t=>{console.log(t),alert("Se registro correctamente!!"),this.router.navigate(["/login"])})}):alert("El usuario ya existe!!")}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Rs),r.Kb(Ns),r.Kb(Li))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-registro"]],decls:15,vars:5,consts:[[1,"centro"],["type","text","placeholder","ingrese nombre",3,"ngModel","ngModelChange"],["type","email","placeholder","ingrese correo electronico",3,"ngModel","ngModelChange"],["type","password","placeholder","ingrese contrase\xf1a",3,"ngModel","ngModelChange"],[3,"routerLink"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div"),r.Nb(1,"h1"),r.ac(2,"REGISTRO"),r.Mb(),r.Nb(3,"div",0),r.Nb(4,"input",1),r.Tb("ngModelChange",function(t){return e.usuario.nombre=t}),r.Mb(),r.Lb(5,"br"),r.Nb(6,"input",2),r.Tb("ngModelChange",function(t){return e.usuario.correo=t}),r.Mb(),r.Lb(7,"br"),r.Nb(8,"input",3),r.Tb("ngModelChange",function(t){return e.usuario.clave=t}),r.Mb(),r.Lb(9,"br"),r.Nb(10,"button",4),r.ac(11,"Volver"),r.Mb(),r.Lb(12,"br"),r.Nb(13,"button",5),r.Tb("click",function(){return e.registrarse()}),r.ac(14,"Enviar datos"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.Vb("ngModel",e.usuario.nombre),r.Ab(2),r.Vb("ngModel",e.usuario.correo),r.Ab(2),r.Vb("ngModel",e.usuario.clave),r.Ab(2),r.Vb("routerLink",r.Wb(4,Ds)))},directives:[Ot,Mt,ne,Mi],styles:[".centro[_ngcontent-%COMP%]{align-content:center!important}"]}),t})()},{path:"error",component:oo},{path:"ejercicios",component:io}];let Ms=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[$i.forRoot(Ls)],$i]}),t})(),Fs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:[Ui],styles:[""]}),t})();function Us(){return t=>t.lift(new Vs)}class Vs{call(t,e){return e.subscribe(new qs(t))}}class qs extends de.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Bs=n("zIRd"),Hs=n("q/0M"),Qs=n("qOnz"),zs=function(t,e){return(zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Gs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ks,Ws="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$s=$s||{},Ys=Ws||self;function Js(){}function Xs(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Zs(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ta="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function na(t,e,n){return t.call.apply(t.bind,arguments)}function ra(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ia(t,e,n){return(ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:ra).apply(null,arguments)}function oa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function sa(){return Date.now()}function aa(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ua(){this.j=this.j,this.i=this.i}ua.prototype.j=!1,ua.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ta)&&t[ta]||(t[ta]=++ea)}(this)},ua.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ca=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},la=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ha(t){return Array.prototype.concat.apply([],arguments)}function fa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function da(t){return/^[\s\xa0]*$/.test(t)}var pa,ga=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ya(t,e){return-1!=t.indexOf(e)}function va(t,e){return t<e?-1:t>e?1:0}t:{var ma=Ys.navigator;if(ma){var ba=ma.userAgent;if(ba){pa=ba;break t}}pa=""}function _a(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function wa(t){var e={};for(var n in t)e[n]=t[n];return e}var Oa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ea(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Oa.length;o++)n=Oa[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ca(t){return Ca[" "](t),t}Ca[" "]=Js;var Ta,Sa,Ia=ya(pa,"Opera"),xa=ya(pa,"Trident")||ya(pa,"MSIE"),ja=ya(pa,"Edge"),Aa=ja||xa,ka=ya(pa,"Gecko")&&!(ya(pa.toLowerCase(),"webkit")&&!ya(pa,"Edge"))&&!(ya(pa,"Trident")||ya(pa,"MSIE"))&&!ya(pa,"Edge"),Na=ya(pa.toLowerCase(),"webkit")&&!ya(pa,"Edge");function Ra(){var t=Ys.document;return t?t.documentMode:void 0}t:{var Pa="",Da=(Sa=pa,ka?/rv:([^\);]+)(\)|;)/.exec(Sa):ja?/Edge\/([\d\.]+)/.exec(Sa):xa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Sa):Na?/WebKit\/(\S+)/.exec(Sa):Ia?/(?:Version)[ \/]?(\S+)/.exec(Sa):void 0);if(Da&&(Pa=Da?Da[1]:""),xa){var La=Ra();if(null!=La&&La>parseFloat(Pa)){Ta=String(La);break t}}Ta=Pa}var Ma={};function Fa(t){return function(t,e){var n=Ma;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ga(String(Ta)).split("."),r=ga(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=va(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||va(0==s[2].length,0==a[2].length)||va(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ua=Ys.document&&xa&&(Ra()||parseInt(Ta,10))||void 0,Va=!xa||9<=Number(Ua),qa=xa&&!Fa("9"),Ba=function(){if(!Ys.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ys.addEventListener("test",Js,e),Ys.removeEventListener("test",Js,e)}catch(n){}return t}();function Ha(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Qa(t,e){if(Ha.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ka){t:{try{Ca(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:za[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ha.prototype.b=function(){this.defaultPrevented=!0},aa(Qa,Ha);var za={2:"touch",3:"pen",4:"mouse"};Qa.prototype.b=function(){Qa.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ga="closure_listenable_"+(1e6*Math.random()|0),Ka=0;function Wa(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ka,this.Y=this.Z=!1}function $a(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ya(t){this.src=t,this.a={},this.b=0}function Ja(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ca(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($a(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Xa(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ya.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xa(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Wa(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Za="closure_lm_"+(1e6*Math.random()|0),tu={};function eu(t,e,n,r,i){if(r&&r.once)return ru(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)eu(t,e[o],n,r,i);return null}return n=hu(n),t&&t[Ga]?t.va(e,n,Zs(r)?!!r.capture:!!r,i):nu(t,e,n,!1,r,i)}function nu(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Zs(i)?!!i.capture:!!i;if(s&&!Va)return null;var a=cu(t);if(a||(t[Za]=a=new Ya(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=uu,e=Va?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ba||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(su(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ru(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ru(t,e[o],n,r,i);return null}return n=hu(n),t&&t[Ga]?t.wa(e,n,Zs(r)?!!r.capture:!!r,i):nu(t,e,n,!0,r,i)}function iu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)iu(t,e[o],n,r,i);else r=Zs(r)?!!r.capture:!!r,n=hu(n),t&&t[Ga]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Xa(o=t.a[e],n,r,i))&&($a(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=cu(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xa(e,n,r,i)),(n=-1<t?e[t]:null)&&ou(n))}function ou(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ga])Ja(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(su(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cu(e))?(Ja(n,t),0==n.b&&(n.src=null,e[Za]=null)):$a(t)}}}function su(t){return t in tu?tu[t]:tu[t]="on"+t}function au(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ou(t),n.call(r,e)}function uu(t,e){if(t.Y)return!0;if(!Va){if(!e)t:{e=["window","event"];for(var n=Ys,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return au(t,e=new Qa(e,this))}return au(t,new Qa(e,this))}function cu(t){return(t=t[Za])instanceof Ya?t:null}var lu="__closure_events_fn_"+(1e9*Math.random()>>>0);function hu(t){return"function"==typeof t?t:(t[lu]||(t[lu]=function(e){return t.handleEvent(e)}),t[lu])}function fu(){ua.call(this),this.c=new Ya(this),this.J=this,this.C=null}function du(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ha(e,t);else if(e instanceof Ha)e.target=e.target||t;else{var i=e;Ea(e=new Ha(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=pu(s,r,!0,e)&&i}if(i=pu(s=e.a=t,r,!0,e)&&i,i=pu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=pu(s=e.a=n[o],r,!1,e)&&i}function pu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ja(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}aa(fu,ua),fu.prototype[Ga]=!0,(Ks=fu.prototype).addEventListener=function(t,e,n,r){eu(this,t,e,n,r)},Ks.removeEventListener=function(t,e,n,r){iu(this,t,e,n,r)},Ks.G=function(){if(fu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)$a(n[r]);delete e.a[t],e.b--}}this.C=null},Ks.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ks.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var gu=Ys.JSON.stringify;function yu(){this.b=this.a=null}var vu,mu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new _u},function(t){t.reset()});function bu(){var t=Cu,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function _u(){this.next=this.b=this.a=null}function wu(t){Ys.setTimeout(function(){throw t},0)}function Ou(t,e){vu||function(){var t=Ys.Promise.resolve(void 0);vu=function(){t.then(Tu)}}(),Eu||(vu(),Eu=!0),Cu.add(t,e)}yu.prototype.add=function(t,e){var n=mu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},_u.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},_u.prototype.reset=function(){this.next=this.b=this.a=null};var Eu=!1,Cu=new yu;function Tu(){for(var t;t=bu();){try{t.a.call(t.b)}catch(n){wu(n)}var e=mu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Eu=!1}function Su(t,e){fu.call(this),this.b=t||1,this.a=e||Ys,this.f=ia(this.Za,this),this.g=sa()}function Iu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function xu(t,e,n){if("function"==typeof t)n&&(t=ia(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ia(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ys.setTimeout(t,e||0)}function ju(t){t.a=xu(function(){t.a=null,t.c&&(t.c=!1,ju(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}aa(Su,fu),(Ks=Su.prototype).aa=!1,Ks.M=null,Ks.Za=function(){if(this.aa){var t=sa()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),du(this,"tick"),this.aa&&(Iu(this),this.start()))}},Ks.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=sa())},Ks.G=function(){Su.X.G.call(this),Iu(this),delete this.a};var Au=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}zs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ju(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ys.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ua);function ku(t){ua.call(this),this.b=t,this.a={}}aa(ku,ua);var Nu=[];function Ru(t,e,n,r){Array.isArray(n)||(n&&(Nu[0]=n.toString()),n=Nu);for(var i=0;i<n.length;i++){var o=eu(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Pu(t){_a(t.a,function(t,e){this.a.hasOwnProperty(e)&&ou(t)},t),t.a={}}function Du(){this.a=!0}function Lu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ku.prototype.G=function(){ku.X.G.call(this),Pu(this)},ku.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Du.prototype.info=function(){};var Mu={},Fu=null;function Uu(){return Fu=Fu||new fu}function Vu(t){Ha.call(this,Mu.Fa,t)}function qu(t){var e=Uu();du(e,new Vu(e,t))}function Bu(t,e){Ha.call(this,Mu.STAT_EVENT,t),this.stat=e}function Hu(t){var e=Uu();du(e,new Bu(e,t))}function Qu(t){Ha.call(this,Mu.Ga,t)}function zu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ys.setTimeout(function(){t()},e)}Mu.Fa="serverreachability",aa(Vu,Ha),Mu.STAT_EVENT="statevent",aa(Bu,Ha),Mu.Ga="timingevent",aa(Qu,Ha);var Gu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ku={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Wu(){}function $u(){}Wu.prototype.a=null;var Yu,Ju={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Xu(){Ha.call(this,"d")}function Zu(){Ha.call(this,"c")}function tc(){}function ec(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ku(this),this.P=nc,this.R=new Su(t=Aa?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}aa(Xu,Ha),aa(Zu,Ha),aa(tc,Wu),Yu=new tc;var nc=45e3,rc={},ic={};function oc(t,e,n){t.H=1,t.i=Ic(wc(e)),t.j=n,t.I=!0,sc(t,null)}function sc(t,e){t.u=sa(),cc(t),t.l=wc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Vc(n.b,"t",r),t.D=0,t.a=Pl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Au(ia(t.Ca,t,t.a),t.O)),Ru(t.J,t.a,"readystatechange",t.Xa),e=t.B?wa(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),qu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ac(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=uc(t,n);if(i==ic){4==e&&(t.h=4,Hu(14),r=!1),Lu(t.c,t.f,null,"[Incomplete Response]");break}if(i==rc){t.h=4,Hu(15),Lu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Lu(t.c,t.f,i,null),pc(t,i)}4==e&&0==n.length&&(t.h=1,Hu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sl(e),e.F=!0,Hu(11))):(Lu(t.c,t.f,n,"[Invalid Chunked Response]"),dc(t),fc(t))}function uc(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ic:(n=Number(e.substring(n,r)),isNaN(n)?rc:(r+=1)+n>e.length?ic:(e=e.substr(r,n),t.D=r+n,e))}function cc(t){t.T=sa()+t.P,lc(t,t.P)}function lc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=zu(ia(t.Va,t),e)}function hc(t){t.o&&(Ys.clearTimeout(t.o),t.o=null)}function fc(t){0==t.g.v||t.A||jl(t.g,t)}function dc(t){hc(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Iu(t.R),Pu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function pc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Kc(n.b,t)))if(n.I=t.N,!t.C&&Kc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(m_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;xl(n),vl(n)}Tl(n),Hu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=zu(ia(n.Sa,n),6e3));if(1>=Gc(n.b)&&n.ea){try{n.ea()}catch(m_){}n.ea=void 0}}else kl(n,11)}else if((t.C||n.a==t)&&xl(n),!da(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ya(l,"spdy")||ya(l,"quic")||ya(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Wc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Sc(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=sa()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Rl(u,u.C?u.ga:null,u.fa),d.C){$c(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(hc(p),cc(p)),u.a=d}else Cl(u);0<n.g.length&&_l(n)}else"stop"!=i[0]&&"close"!=i[0]||kl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?kl(n,7):yl(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);qu(4)}catch(m_){}}function gc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xs(t)||"string"==typeof t)la(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Xs(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Xs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function yc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof yc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function vc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)mc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function mc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ks=ec.prototype).setTimeout=function(t){this.P=t},Ks.Xa=function(t){t=t.target;var e=this.F;e&&3==fl(t)?e.f():this.Ca(t)},Ks.Ca=function(t){try{if(t==this.a)t:{var e=fl(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Aa&&!this.a.$())){this.A||4!=e||7==n||qu(8==n||0>=r?3:2),hc(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!da(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Hu(12),dc(this),fc(this);break t}Lu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,pc(this,u)}this.I?(ac(this,e,o),Aa&&this.b&&3==e&&(Ru(this.J,this.R,"tick",this.Wa),this.R.start())):(Lu(this.c,this.f,o,null),pc(this,o)),4==e&&dc(this),this.b&&!this.A&&(4==e?jl(this.g,this):(this.b=!1,cc(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Hu(12)):(this.h=0,Hu(13)),dc(this),fc(this)}}}catch(c){}},Ks.Wa=function(){if(this.a){var t=fl(this.a),e=this.a.$();this.D<e.length&&(hc(this),ac(this,t,e),this.b&&4!=t&&cc(this))}},Ks.cancel=function(){this.A=!0,dc(this)},Ks.Va=function(){this.o=null;var t=sa();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(qu(3),Hu(17)),dc(this),this.h=2,fc(this)):lc(this,this.T-t)},(Ks=yc.prototype).K=function(){vc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ks.L=function(){return vc(this),this.a.concat()},Ks.get=function(t,e){return mc(this.b,t)?this.b[t]:e},Ks.set=function(t,e){mc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ks.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _c(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof _c){this.a=void 0!==e?e:t.a,Oc(this,t.f),this.j=t.j,Ec(this,t.c),Cc(this,t.h),this.g=t.g,e=t.b;var n=new Lc;n.c=e.c,e.a&&(n.a=new yc(e.a),n.b=e.b),Tc(this,n),this.i=t.i}else t&&(n=String(t).match(bc))?(this.a=!!e,Oc(this,n[1]||"",!0),this.j=xc(n[2]||""),Ec(this,n[3]||"",!0),Cc(this,n[4]),this.g=xc(n[5]||"",!0),Tc(this,n[6]||"",!0),this.i=xc(n[7]||"")):(this.a=!!e,this.b=new Lc(null,this.a))}function wc(t){return new _c(t)}function Oc(t,e,n){t.f=n?xc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ec(t,e,n){t.c=n?xc(e,!0):e}function Cc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Tc(t,e,n){e instanceof Lc?(t.b=e,function(t,e){e&&!t.f&&(Mc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fc(this,e),Vc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=jc(e,Pc)),t.b=new Lc(e,t.a))}function Sc(t,e,n){t.b.set(e,n)}function Ic(t){return Sc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^sa()).toString(36)),t}function xc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ac),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ac(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}_c.prototype.toString=function(){var t=[],e=this.f;e&&t.push(jc(e,kc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(jc(e,kc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(jc(n,"/"==n.charAt(0)?Rc:Nc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",jc(n,Dc)),t.join("")};var kc=/[#\/\?@]/g,Nc=/[#\?:]/g,Rc=/[#\?]/g,Pc=/[#\?@]/g,Dc=/#/g;function Lc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mc(t){t.a||(t.a=new yc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Fc(t,e){Mc(t),e=qc(t,e),mc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&vc(t)))}function Uc(t,e){return Mc(t),e=qc(t,e),mc(t.a.b,e)}function Vc(t,e,n){Fc(t,e),0<n.length&&(t.c=null,t.a.set(qc(t,e),fa(n)),t.b+=n.length)}function qc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ks=Lc.prototype).add=function(t,e){Mc(this),this.c=null,t=qc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ks.forEach=function(t,e){Mc(this),this.a.forEach(function(n,r){la(n,function(n){t.call(e,n,r,this)},this)},this)},Ks.L=function(){Mc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ks.K=function(t){Mc(this);var e=[];if("string"==typeof t)Uc(this,t)&&(e=ha(e,this.a.get(qc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ha(e,t[n])}return e},Ks.set=function(t,e){return Mc(this),this.c=null,Uc(this,t=qc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ks.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ks.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Bc=function(){return function(t,e){this.b=t,this.a=e}}();function Hc(t){this.g=t||Qc,t=Ys.PerformanceNavigationTiming?0<(t=Ys.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ys.ia&&Ys.ia.ya&&Ys.ia.ya()&&Ys.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Qc=10;function zc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Gc(t){return t.b?1:t.a?t.a.size:0}function Kc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Wc(t,e){t.a?t.a.add(e):t.b=e}function $c(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Yc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Gs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return fa(t.c)}function Jc(){}function Xc(){this.a=new Jc}function Zc(t,e,n){var r=n||"";try{gc(t,function(t,n){var i=t;Zs(t)&&(i=gu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(ow){throw e.push(r+"type="+encodeURIComponent("_badmap")),ow}}function tl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Hc.prototype.cancel=function(){var t,e;if(this.c=Yc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Gs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Jc.prototype.stringify=function(t){return Ys.JSON.stringify(t,void 0)},Jc.prototype.parse=function(t){return Ys.JSON.parse(t,void 0)};var el=Ys.JSON.parse;function nl(t){fu.call(this),this.headers=new yc,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=rl,this.D=this.F=!1}aa(nl,fu);var rl="",il=/^https?$/i,ol=["POST","PUT"];function sl(t){return"content-type"==t.toLowerCase()}function al(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ul(t),ll(t)}function ul(t){t.u||(t.u=!0,du(t,"complete"),du(t,"error"))}function cl(t){if(t.b&&void 0!==$s&&(!t.s[1]||4!=fl(t)||2!=t.W()))if(t.l&&4==fl(t))xu(t.za,0,t);else if(du(t,"readystatechange"),4==fl(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(bc)[1]||null;if(!o&&Ys.self&&Ys.self.location){var s=Ys.self.location.protocol;o=s.substr(0,s.length-1)}i=!il.test(o?o.toLowerCase():"")}e=i}if(e)du(t,"complete"),du(t,"success");else{t.h=6;try{var a=2<fl(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ul(t)}}finally{ll(t)}}}function ll(t,e){if(t.a){hl(t);var n=t.a,r=t.s[0]?Js:null;t.a=null,t.s=null,e||du(t,"ready");try{n.onreadystatechange=r}catch(ow){}}}function hl(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ys.clearTimeout(t.m),t.m=null)}function fl(t){return t.a?t.a.readyState:0}function dl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return _a(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sc(t,e,n))}function pl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gl(t){this.pa=0,this.g=[],this.c=new Du,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=pl("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=pl("baseRetryDelayMs",5e3,t),this.Ra=pl("retryDelaySeedMs",1e4,t),this.Ma=pl("forwardChannelMaxRetries",2,t),this.ma=pl("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Hc(t&&t.concurrentRequestLimit),this.ka=new Xc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function yl(t){if(ml(t),3==t.v){var e=t.R++,n=wc(t.B);Sc(n,"SID",t.J),Sc(n,"RID",e),Sc(n,"TYPE","terminate"),Ol(t,n),(e=new ec(t,t.c,e,void 0)).H=2,e.i=Ic(wc(n)),n=!1,Ys.navigator&&Ys.navigator.sendBeacon&&(n=Ys.navigator.sendBeacon(e.i.toString(),"")),!n&&Ys.Image&&((new Image).src=e.i,n=!0),n||(e.a=Pl(e.g,null),e.a.ba(e.i)),e.u=sa(),cc(e)}Nl(t)}function vl(t){t.a&&(Sl(t),t.a.cancel(),t.a=null)}function ml(t){vl(t),t.j&&(Ys.clearTimeout(t.j),t.j=null),xl(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ys.clearTimeout(t.h),t.h=null)}function bl(t,e){t.g.push(new Bc(t.Oa++,e)),3==t.v&&_l(t)}function _l(t){zc(t.b)||t.h||(t.h=!0,Ou(t.Ba,t),t.u=0)}function wl(t,e){var n;n=e?e.f:t.R++;var r=wc(t.B);Sc(r,"SID",t.J),Sc(r,"RID",n),Sc(r,"AID",t.P),Ol(t,r),t.i&&t.l&&dl(r,t.i,t.l),n=new ec(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=El(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Wc(t.b,n),oc(n,r,e)}function Ol(t,e){t.f&&gc({},function(t,n){Sc(e,n,t)})}function El(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ia(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Zc(l,s,"req"+c+"_")}catch(dh){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Cl(t){t.a||t.j||(t.T=1,Ou(t.Aa,t),t.o=0)}function Tl(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=zu(ia(t.Aa,t),Al(t,t.o)),t.o++,0))}function Sl(t){null!=t.s&&(Ys.clearTimeout(t.s),t.s=null)}function Il(t){t.a=new ec(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=wc(t.la);Sc(e,"RID","rpc"),Sc(e,"SID",t.J),Sc(e,"CI",t.H?"0":"1"),Sc(e,"AID",t.P),Ol(t,e),Sc(e,"TYPE","xmlhttp"),t.i&&t.l&&dl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ic(wc(e)),n.j=null,n.I=!0,sc(n,t)}function xl(t){null!=t.m&&(Ys.clearTimeout(t.m),t.m=null)}function jl(t,e){var n=null;if(t.a==e){xl(t),Sl(t),t.a=null;var r=2}else{if(!Kc(t.b,e))return;n=e.s,$c(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=sa()-e.u;var i=t.u;du(r=Uu(),new Qu(r,n,e,i)),_l(t)}else Cl(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Gc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=zu(ia(t.Ba,t,e),Al(t,t.u)),t.u++,0)))}(t,e)||2==r&&Tl(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:kl(t,5);break;case 4:kl(t,10);break;case 3:kl(t,6);break;default:kl(t,2)}}function Al(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function kl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ia(t.Ya,t);n||(n=new _c("//www.google.com/images/cleardot.gif"),Ys.location&&"http"==Ys.location.protocol||Oc(n,"https"),Ic(n)),function(t,e){var n=new Du;if(Ys.Image){var r=new Image;r.onload=oa(tl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=oa(tl,n,r,"TestLoadImage: error",!1,e),r.onabort=oa(tl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=oa(tl,n,r,"TestLoadImage: timeout",!1,e),Ys.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Hu(2);t.v=0,t.f&&t.f.ra(e),Nl(t),ml(t)}function Nl(t){t.v=0,t.I=-1,t.f&&(0==Yc(t.b).length&&0==t.g.length||(t.b.c.length=0,fa(t.g),t.g.length=0),t.f.qa())}function Rl(t,e,n){var r=function(t){return t instanceof _c?wc(t):new _c(t,void 0)}(n);if(""!=r.c)e&&Ec(r,e+"."+r.c),Cc(r,r.h);else{var i=Ys.location;r=function(t,e,n,r){var i=new _c(null,void 0);return t&&Oc(i,t),e&&Ec(i,e),n&&Cc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&_a(t.V,function(t,e){Sc(r,e,t)}),n=t.na,(e=t.A)&&n&&Sc(r,e,n),Sc(r,"VER",t.ha),Ol(t,r),r}function Pl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nl(t.Na)).F=t.C,e}function Dl(){}function Ll(){if(xa&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function Ml(t,e){fu.call(this),this.a=new gl(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!da(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!da(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Vl(this)}function Fl(t){Xu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ul(){Zu.call(this),this.status=1}function Vl(t){this.a=t}(Ks=nl.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Yu),this.a.onreadystatechange=ia(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void al(this,o)}t=n||"";var i=new yc(this.headers);r&&gc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=sl,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ys.FormData&&t instanceof Ys.FormData,!(0<=ca(ol,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{hl(this),0<this.o&&((this.D=function(t){return xa&&Fa(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ia(this.xa,this)):this.m=xu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){al(this,o)}},Ks.xa=function(){void 0!==$s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,du(this,"timeout"),this.abort(8))},Ks.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,du(this,"complete"),du(this,"abort"),ll(this))},Ks.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ll(this,!0)),nl.X.G.call(this)},Ks.za=function(){this.j||(this.A||this.l||this.g?cl(this):this.Ua())},Ks.Ua=function(){cl(this)},Ks.W=function(){try{return 2<fl(this)?this.a.status:-1}catch(Sa){return-1}},Ks.$=function(){try{return this.a?this.a.responseText:""}catch(Sa){return""}},Ks.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),el(e)}},Ks.ua=function(){return this.h},Ks.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ks=gl.prototype).ha=8,Ks.v=1,Ks.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ec(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ea(r=wa(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=El(this,n,e),Sc(i=wc(this.B),"RID",t),Sc(i,"CVER",22),this.A&&Sc(i,"X-HTTP-Session-Id",this.A),Ol(this,i),this.i&&r&&dl(i,this.i,r),Wc(this.b,n),this.Ia&&Sc(i,"TYPE","init"),this.da?(Sc(i,"$req",e),Sc(i,"SID","null"),n.U=!0,oc(n,i,null)):oc(n,i,e),this.v=2}}else 3==this.v&&(t?wl(this,t):0==this.g.length||zc(this.b)||wl(this))},Ks.Aa=function(){if(this.j=null,Il(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=zu(ia(this.Ta,this),t)}},Ks.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Hu(10),vl(this),Il(this))},Ks.Sa=function(){null!=this.m&&(this.m=null,vl(this),Tl(this),Hu(19))},Ks.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Hu(2)):(this.c.info("Failed to ping google.com"),Hu(1))},(Ks=Dl.prototype).ta=function(){},Ks.sa=function(){},Ks.ra=function(){},Ks.qa=function(){},Ks.Ja=function(){},Ll.prototype.a=function(t,e){return new Ml(t,e)},aa(Ml,fu),Ml.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Hu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Rl(t,null,t.fa),_l(t)},Ml.prototype.close=function(){yl(this.a)},Ml.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,bl(this.a,e)}else this.l?((e={}).__data__=gu(t),bl(this.a,e)):bl(this.a,t)},Ml.prototype.G=function(){this.a.f=null,delete this.f,yl(this.a),delete this.a,Ml.X.G.call(this)},aa(Fl,Xu),aa(Ul,Zu),aa(Vl,Dl),Vl.prototype.ta=function(){du(this.a,"a")},Vl.prototype.sa=function(t){du(this.a,new Fl(t))},Vl.prototype.ra=function(t){du(this.a,new Ul(t))},Vl.prototype.qa=function(){du(this.a,"b")},Ll.prototype.createWebChannel=Ll.prototype.a,Ml.prototype.send=Ml.prototype.h,Ml.prototype.open=Ml.prototype.g,Ml.prototype.close=Ml.prototype.close,Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,Ku.COMPLETE="complete",$u.EventType=Ju,Ju.OPEN="a",Ju.CLOSE="b",Ju.ERROR="c",Ju.MESSAGE="d",fu.prototype.listen=fu.prototype.va,nl.prototype.listenOnce=nl.prototype.wa,nl.prototype.getLastError=nl.prototype.Qa,nl.prototype.getLastErrorCode=nl.prototype.ua,nl.prototype.getStatus=nl.prototype.W,nl.prototype.getResponseJson=nl.prototype.Pa,nl.prototype.getResponseText=nl.prototype.$,nl.prototype.send=nl.prototype.ba;var ql=Gu,Bl=Ku,Hl=Mu,Ql=$u,zl=nl,Gl=n("mrSG"),Kl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Kl.o=-1;var Wl=new Hs.b("@firebase/firestore");function $l(){return Wl.logLevel}function Yl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wl.logLevel<=Hs.a.DEBUG){var r=e.map(Zl);Wl.debug.apply(Wl,Object(Gl.f)(["Firestore (8.3.1): "+t],r))}}function Jl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wl.logLevel<=Hs.a.ERROR){var r=e.map(Zl);Wl.error.apply(Wl,Object(Gl.f)(["Firestore (8.3.1): "+t],r))}}function Xl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wl.logLevel<=Hs.a.WARN){var r=e.map(Zl);Wl.warn.apply(Wl,Object(Gl.f)(["Firestore (8.3.1): "+t],r))}}function Zl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(ow){return t}}function th(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function eh(t,e){t||th()}function nh(t,e){return t}function rh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ih=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=rh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function oh(t,e){return t<e?-1:t>e?1:0}function sh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ah(t){return t+"\0"}function uh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ch(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hh(t){return null==t}function fh(t){return 0===t&&1/t==-1/0}function dh(t){return"number"==typeof t&&Number.isInteger(t)&&!fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ph={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Gl.c)(e,t),e}(Error),yh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&th(),void 0===n?n=t.length-e:n>t.length-e&&th(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),vh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new gh(ph.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(yh),mh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return mh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new gh(ph.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new gh(ph.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gh(ph.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new gh(ph.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(yh),_h=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(vh.fromString(e))},t.fromName=function(e){return new t(vh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===vh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return vh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new vh(e.slice()))},t}(),wh=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return oh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();wh.EMPTY_BYTE_STRING=new wh("");var Oh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eh(t){if(eh(!!t),"string"==typeof t){var e=0,n=Oh.exec(t);if(eh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ch(t.seconds),nanos:Ch(t.nanos)}}function Ch(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Th(t){return"string"==typeof t?wh.fromBase64String(t):wh.fromUint8Array(t)}var Sh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new gh(ph.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gh(ph.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new gh(ph.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gh(ph.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?oh(this.nanoseconds,t.nanoseconds):oh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Ih(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xh(t){var e=t.mapValue.fields.__previous_value__;return Ih(e)?xh(e):e}function jh(t){var e=Eh(t.mapValue.fields.__local_write_time__.timestampValue);return new Sh(e.seconds,e.nanos)}function Ah(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ih(t)?4:10:th()}function kh(t,e){var n=Ah(t);if(n!==Ah(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jh(t).isEqual(jh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Eh(t.timestampValue),r=Eh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Th(t.bytesValue).isEqual(Th(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ch(t.geoPointValue.latitude)===Ch(e.geoPointValue.latitude)&&Ch(t.geoPointValue.longitude)===Ch(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ch(t.integerValue)===Ch(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ch(t.doubleValue),r=Ch(e.doubleValue);return n===r?fh(n)===fh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return sh(t.arrayValue.values||[],e.arrayValue.values||[],kh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(uh(n)!==uh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kh(n[i],r[i])))return!1;return!0}(t,e);default:return th()}}function Nh(t,e){return void 0!==(t.values||[]).find(function(t){return kh(t,e)})}function Rh(t,e){var n=Ah(t),r=Ah(e);if(n!==r)return oh(n,r);switch(n){case 0:return 0;case 1:return oh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ch(t.integerValue||t.doubleValue),r=Ch(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ph(t.timestampValue,e.timestampValue);case 4:return Ph(jh(t),jh(e));case 5:return oh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Th(t),r=Th(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=oh(n[i],r[i]);if(0!==o)return o}return oh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=oh(Ch(t.latitude),Ch(e.latitude));return 0!==n?n:oh(Ch(t.longitude),Ch(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Rh(n[i],r[i]);if(o)return o}return oh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=oh(r[s],o[s]);if(0!==a)return a;var u=Rh(n[r[s]],i[o[s]]);if(0!==u)return u}return oh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw th()}}function Ph(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oh(t,e);var n=Eh(t),r=Eh(e),i=oh(n.seconds,r.seconds);return 0!==i?i:oh(n.nanos,r.nanos)}function Dh(t){return Lh(t)}function Lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Eh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Th(t.bytesValue).toBase64():"referenceValue"in t?_h.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Lh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Lh(t.fields[o])}return e+"}"}(t.mapValue):th();var e}function Mh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Fh(t){return!!t&&"integerValue"in t}function Uh(t){return!!t&&"arrayValue"in t}function Vh(t){return!!t&&"nullValue"in t}function qh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}var Hh=function(t,e){this.key=t,this.version=e},Qh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Gl.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Hh),zh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Gl.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Hh),Gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Hh),Kh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Wh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Kh(t,e,n,r,i,o,s)}function $h(t){var e=nh(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Dh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=cf(e.startAt)),e.endAt&&(n+="|ub:",n+=cf(e.endAt)),e.h=n}return e.h}function Yh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!hf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!kh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!df(t.startAt,e.startAt)&&df(t.endAt,e.endAt)}function Jh(t){return _h.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Gl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Zh(t,n,r):"array-contains"===n?new rf(t,r):"in"===n?new of(t,r):"not-in"===n?new sf(t,r):"array-contains-any"===n?new af(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new tf(t,n):new ef(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Rh(e,this.value)):null!==e&&Ah(this.value)===Ah(e)&&this.m(Rh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return th()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Zh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=_h.fromName(r.referenceValue),i}return Object(Gl.c)(e,t),e.prototype.matches=function(t){var e=_h.comparator(t.key,this.key);return this.m(e)},e}(Xh),tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=nf(0,n),r}return Object(Gl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xh),ef=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=nf(0,n),r}return Object(Gl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xh);function nf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return _h.fromName(t.referenceValue)})}var rf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Gl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Uh(e)&&Nh(e.arrayValue,this.value)},e}(Xh),of=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Gl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Nh(this.value.arrayValue,e)},e}(Xh),sf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Gl.c)(e,t),e.prototype.matches=function(t){if(Nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Nh(this.value.arrayValue,e)},e}(Xh),af=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Gl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Nh(e.value.arrayValue,t)})},e}(Xh),uf=function(t,e){this.position=t,this.before=e};function cf(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Dh(t)}).join(",")}var lf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function hf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ff(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?_h.comparator(_h.fromName(s.referenceValue),n.key):Rh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function df(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!kh(t.position[n],e.position[n]))return!1;return!0}var pf=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function gf(t,e,n,r,i,o,s,a){return new pf(t,e,n,r,i,o,s,a)}function yf(t){return new pf(t)}function vf(t){return!hh(t.limit)&&"F"===t.limitType}function mf(t){return!hh(t.limit)&&"L"===t.limitType}function bf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _f(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function wf(t){return null!==t.collectionGroup}function Of(t){var e=nh(t);if(null===e.p){e.p=[];var n=_f(e),r=bf(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new lf(n)),e.p.push(new lf(bh.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new lf(bh.keyField(),u))}}}return e.p}function Ef(t){var e=nh(t);if(!e.T)if("F"===e.limitType)e.T=Wh(e.path,e.collectionGroup,Of(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Of(e);r<i.length;r++){var o=i[r];n.push(new lf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new uf(e.endAt.position,!e.endAt.before):null,a=e.startAt?new uf(e.startAt.position,!e.startAt.before):null;e.T=Wh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Cf(t,e,n){return new pf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tf(t,e){return Yh(Ef(t),Ef(e))&&t.limitType===e.limitType}function Sf(t){return $h(Ef(t))+"|lt:"+t.limitType}function If(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Dh(e.value);var e}).join(", ")+"]"),hh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+cf(t.startAt)),t.endAt&&(e+=", endAt: "+cf(t.endAt)),"Target("+e+")"}(Ef(t))+"; limitType="+t.limitType+")"}function xf(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):_h.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ff(t.startAt,Of(t),e)||t.endAt&&ff(t.endAt,Of(t),e))}(t,e)}function jf(t){return function(e,n){for(var r=!1,i=0,o=Of(t);i<o.length;i++){var s=o[i],a=Af(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Af(t,e,n){var r=t.field.isKeyField()?_h.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Rh(r,i):th()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return th()}}var kf=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Sh(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Nf=function(){function t(t){this.fields=t,t.sort(bh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return sh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Rf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Bh(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return kh(this.proto,t.proto)},t}(),Pf=function(){function t(t){void 0===t&&(t=Rf.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ah(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(bh.emptyPath(),this.A);return null!=t?new Rf(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Bh(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Df(t){var e=[];return ch(t.fields||{},function(t,n){var r=new bh([t]);if(Bh(n)){var i=Df(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Nf(e)}function Lf(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function Mf(t){return{integerValue:""+t}}function Ff(t,e){return dh(e)?Mf(e):Lf(t,e)}var Uf=function(){this._=void 0};function Vf(t,e,n){return t instanceof Hf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Qf?zf(t,e):t instanceof Gf?Kf(t,e):function(t,e){var n=Bf(t,e),r=$f(n)+$f(t.S);return Fh(n)&&Fh(t.S)?Mf(r):Lf(t.D,r)}(t,e)}function qf(t,e,n){return t instanceof Qf?zf(t,e):t instanceof Gf?Kf(t,e):n}function Bf(t,e){return t instanceof Wf?Fh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e}(Uf),Qf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Gl.c)(e,t),e}(Uf);function zf(t,e){for(var n=Yf(e),r=function(t){n.some(function(e){return kh(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Gf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Gl.c)(e,t),e}(Uf);function Kf(t,e){for(var n=Yf(e),r=function(t){n=n.filter(function(e){return!kh(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Gl.c)(e,t),e}(Uf);function $f(t){return Ch(t.integerValue||t.doubleValue)}function Yf(t){return Uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jf=function(t,e){this.field=t,this.transform=e},Xf=function(t,e){this.version=t,this.transformResults=e},Zf=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function td(t,e){return void 0!==t.updateTime?e instanceof Qh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Qh}var ed=function(){};function nd(t,e,n){return t instanceof ad?function(t,e,n){var r=t.value,i=ld(t.fieldTransforms,e,n.transformResults);return r=fd(t.fieldTransforms,r,i),new Qh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ud?function(t,e,n){if(!td(t.precondition,e))return new Gh(t.key,n.version);var r=cd(t,e,ld(t.fieldTransforms,e,n.transformResults));return new Qh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new zh(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function rd(t,e,n){return t instanceof ad?function(t,e,n){if(!td(t.precondition,e))return e;var r=t.value,i=hd(t.fieldTransforms,n,e);r=fd(t.fieldTransforms,r,i);var o=sd(e);return new Qh(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof ud?function(t,e,n){if(!td(t.precondition,e))return e;var r=sd(e),i=cd(t,e,hd(t.fieldTransforms,n,e));return new Qh(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return td(t.precondition,e)?new zh(t.key,kf.min()):e}(t,e)}function id(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Qh?e.field(o.field):void 0,a=Bf(o.transform,s||null);null!=a&&(n=null==n?(new Pf).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function od(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&sh(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Qf&&e instanceof Qf||t instanceof Gf&&e instanceof Gf?sh(t.elements,e.elements,kh):t instanceof Wf&&e instanceof Wf?kh(t.S,e.S):t instanceof Hf&&e instanceof Hf}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function sd(t){return t instanceof Qh?t.version:kf.min()}var ad=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Gl.c)(e,t),e}(ed),ud=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Gl.c)(e,t),e}(ed);function cd(t,e,n){var r;return r=function(t,e){var n=new Pf(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Qh?e.data():Rf.empty()),fd(t.fieldTransforms,r,n)}function ld(t,e,n){var r=[];eh(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Qh&&(a=e.field(o.field)),r.push(qf(s,a,n[i]))}return r}function hd(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Qh&&(u=n.field(s.field)),r.push(Vf(a,u,e))}return r}function fd(t,e,n){for(var r=new Pf(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var dd,pd,gd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Gl.c)(e,t),e}(ed),yd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Gl.c)(e,t),e}(ed),vd=function(t){this.count=t};function md(t){switch(t){case ph.OK:return th();case ph.CANCELLED:case ph.UNKNOWN:case ph.DEADLINE_EXCEEDED:case ph.RESOURCE_EXHAUSTED:case ph.INTERNAL:case ph.UNAVAILABLE:case ph.UNAUTHENTICATED:return!1;case ph.INVALID_ARGUMENT:case ph.NOT_FOUND:case ph.ALREADY_EXISTS:case ph.PERMISSION_DENIED:case ph.FAILED_PRECONDITION:case ph.ABORTED:case ph.OUT_OF_RANGE:case ph.UNIMPLEMENTED:case ph.DATA_LOSS:return!0;default:return th()}}function bd(t){if(void 0===t)return Jl("GRPC error has no .code"),ph.UNKNOWN;switch(t){case dd.OK:return ph.OK;case dd.CANCELLED:return ph.CANCELLED;case dd.UNKNOWN:return ph.UNKNOWN;case dd.DEADLINE_EXCEEDED:return ph.DEADLINE_EXCEEDED;case dd.RESOURCE_EXHAUSTED:return ph.RESOURCE_EXHAUSTED;case dd.INTERNAL:return ph.INTERNAL;case dd.UNAVAILABLE:return ph.UNAVAILABLE;case dd.UNAUTHENTICATED:return ph.UNAUTHENTICATED;case dd.INVALID_ARGUMENT:return ph.INVALID_ARGUMENT;case dd.NOT_FOUND:return ph.NOT_FOUND;case dd.ALREADY_EXISTS:return ph.ALREADY_EXISTS;case dd.PERMISSION_DENIED:return ph.PERMISSION_DENIED;case dd.FAILED_PRECONDITION:return ph.FAILED_PRECONDITION;case dd.ABORTED:return ph.ABORTED;case dd.OUT_OF_RANGE:return ph.OUT_OF_RANGE;case dd.UNIMPLEMENTED:return ph.UNIMPLEMENTED;case dd.DATA_LOSS:return ph.DATA_LOSS;default:return th()}}(pd=dd||(dd={}))[pd.OK=0]="OK",pd[pd.CANCELLED=1]="CANCELLED",pd[pd.UNKNOWN=2]="UNKNOWN",pd[pd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pd[pd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pd[pd.NOT_FOUND=5]="NOT_FOUND",pd[pd.ALREADY_EXISTS=6]="ALREADY_EXISTS",pd[pd.PERMISSION_DENIED=7]="PERMISSION_DENIED",pd[pd.UNAUTHENTICATED=16]="UNAUTHENTICATED",pd[pd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pd[pd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pd[pd.ABORTED=10]="ABORTED",pd[pd.OUT_OF_RANGE=11]="OUT_OF_RANGE",pd[pd.UNIMPLEMENTED=12]="UNIMPLEMENTED",pd[pd.INTERNAL=13]="INTERNAL",pd[pd.UNAVAILABLE=14]="UNAVAILABLE",pd[pd.DATA_LOSS=15]="DATA_LOSS";var _d=function(){function t(t,e){this.comparator=t,this.root=e||Od.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Od.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Od.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new wd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new wd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new wd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new wd(this.root,t,this.comparator,!0)},t}(),wd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Od=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw th();if(this.right.isRed())throw th();var t=this.left.check();if(t!==this.right.check())throw th();return t+(this.isRed()?0:1)},t}();Od.EMPTY=null,Od.RED=!0,Od.BLACK=!1,Od.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw th()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Od(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ed=function(){function t(t){this.comparator=t,this.data=new _d(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Cd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Cd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Cd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Td=new _d(_h.comparator);function Sd(){return Td}function Id(){return Sd()}var xd=new _d(_h.comparator);function jd(){return xd}var Ad=new _d(_h.comparator);function kd(){return Ad}var Nd=new Ed(_h.comparator);function Rd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Nd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pd=new Ed(oh);function Dd(){return Pd}var Ld=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(kf.min(),r,Dd(),Sd(),Rd())},t}(),Md=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(wh.EMPTY_BYTE_STRING,n,Rd(),Rd(),Rd())},t}(),Fd=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Ud=function(t,e){this.targetId=t,this.$=e},Vd=function(t,e,n,r){void 0===n&&(n=wh.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qd=function(){function t(){this.F=0,this.O=Qd(),this.k=wh.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=Rd(),e=Rd(),n=Rd();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:th()}}),new Md(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Qd()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Bd=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Sd(),this.et=Hd(),this.nt=new Ed(oh)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Qh?this.it(r,t.N):t.N instanceof zh&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:th()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Jh(i))if(0===n){var o=new _h(i.path);this.rt(e,o,new zh(o,kf.min()))}else eh(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Jh(o.target)){var s=new _h(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new zh(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=Rd();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ld(t,n,this.nt,this.tt,r);return this.tt=Sd(),this.et=Hd(),this.nt=new Ed(oh),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new qd,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Ed(oh),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Yl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new qd),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Hd(){return new _d(_h.comparator)}function Qd(){return new _d(_h.comparator)}var zd={asc:"ASCENDING",desc:"DESCENDING"},Gd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kd=function(t,e){this.databaseId=t,this.V=e};function Wd(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $d(t,e){return t.V?e.toBase64():e.toUint8Array()}function Yd(t,e){return Wd(t,e.toTimestamp())}function Jd(t){return eh(!!t),kf.fromTimestamp(function(t){var e=Eh(t);return new Sh(e.seconds,e.nanos)}(t))}function Xd(t,e){return function(t){return new vh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Zd(t){var e=vh.fromString(t);return eh(Ep(e)),e}function tp(t,e){return Xd(t.databaseId,e.path)}function ep(t,e){var n=Zd(e);if(n.get(1)!==t.databaseId.projectId)throw new gh(ph.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new gh(ph.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _h(op(n))}function np(t,e){return Xd(t.databaseId,e)}function rp(t){var e=Zd(t);return 4===e.length?vh.emptyPath():op(e)}function ip(t){return new vh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function op(t){return eh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function sp(t,e,n){return{name:tp(t,e),fields:n.proto.mapValue.fields}}function ap(t,e,n){var r=ep(t,e.name),i=Jd(e.updateTime),o=new Rf({mapValue:{fields:e.fields}});return new Qh(r,i,o,{hasCommittedMutations:!!n})}function up(t,e){var n;if(e instanceof ad)n={update:sp(t,e.key,e.value)};else if(e instanceof gd)n={delete:tp(t,e.key)};else if(e instanceof ud)n={update:sp(t,e.key,e.data),updateMask:Op(e.fieldMask)};else{if(!(e instanceof yd))return th();n={verify:tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Hf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wf)return{fieldPath:e.field.canonicalString(),increment:n.S};throw th()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Yd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:th()}(t,e.precondition)),n}function cp(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Zf.updateTime(Jd(t.updateTime)):void 0!==t.exists?Zf.exists(t.exists):Zf.none()}(e.currentDocument):Zf.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(eh("REQUEST_TIME"===e.setToServerValue),n=new Hf):"appendMissingElements"in e?n=new Qf(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Gf(e.removeAllFromArray.values||[]):"increment"in e?n=new Wf(t,e.increment):th();var r=bh.fromServerFormat(e.fieldPath);return new Jf(r,n)}(t,e)}):[];if(e.update){var i=ep(t,e.update.name),o=new Rf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Nf((t.fieldPaths||[]).map(function(t){return bh.fromServerFormat(t)}))}(e.updateMask);return new ud(i,o,s,n,r)}return new ad(i,o,n,r)}if(e.delete){var a=ep(t,e.delete);return new gd(a,n)}if(e.verify){var u=ep(t,e.verify);return new yd(u,n)}return th()}function lp(t,e){return{documents:[np(t,e.path)]}}function hp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=np(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=np(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(qh(t.value))return{unaryFilter:{field:mp(t.field),op:"IS_NAN"}};if(Vh(t.value))return{unaryFilter:{field:mp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qh(t.value))return{unaryFilter:{field:mp(t.field),op:"IS_NOT_NAN"}};if(Vh(t.value))return{unaryFilter:{field:mp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mp(t.field),op:vp(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:mp(t.field),direction:yp(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||hh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=pp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=pp(e.endAt)),n}function fp(t){var e=rp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){eh(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=dp(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new lf(bp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return hh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=gp(n.startAt));var l=null;return n.endAt&&(l=gp(n.endAt)),gf(e,i,a,s,u,"F",c,l)}function dp(t){return t?void 0!==t.unaryFilter?[wp(t)]:void 0!==t.fieldFilter?[_p(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return dp(t)}).reduce(function(t,e){return t.concat(e)}):th():[]}function pp(t){return{before:t.before,values:t.position}}function gp(t){return new uf(t.values||[],!!t.before)}function yp(t){return zd[t]}function vp(t){return Gd[t]}function mp(t){return{fieldPath:t.canonicalString()}}function bp(t){return bh.fromServerFormat(t.fieldPath)}function _p(t){return Xh.create(bp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return th()}}(t.fieldFilter.op),t.fieldFilter.value)}function wp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bp(t.unaryFilter.field);return Xh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bp(t.unaryFilter.field);return Xh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bp(t.unaryFilter.field);return Xh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bp(t.unaryFilter.field);return Xh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return th()}}function Op(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Ep(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Cp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Sp(e)),e=Tp(t.get(n),e);return Sp(e)}function Tp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Sp(t){return t+"\x01\x01"}function Ip(t){var e=t.length;if(eh(e>=2),2===e)return eh("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),vh.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&th(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:th()}o=s+2}return new vh(r)}var xp=function(t,e){this.seconds=t,this.nanoseconds=e},jp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};jp.store="owner",jp.key="owner";var Ap=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ap.store="mutationQueues",Ap.keyPath="userId";var kp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};kp.store="mutations",kp.keyPath="batchId",kp.userMutationsIndex="userMutationsIndex",kp.userMutationsKeyPath=["userId","batchId"];var Np=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Cp(e)]},t.key=function(t,e,n){return[t,Cp(e),n]},t}();Np.store="documentMutations",Np.PLACEHOLDER=new Np;var Rp=function(t,e){this.path=t,this.readTime=e},Pp=function(t,e){this.path=t,this.version=e},Dp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Dp.store="remoteDocuments",Dp.readTimeIndex="readTimeIndex",Dp.readTimeIndexPath="readTime",Dp.collectionReadTimeIndex="collectionReadTimeIndex",Dp.collectionReadTimeIndexPath=["parentPath","readTime"];var Lp=function(t){this.byteSize=t};Lp.store="remoteDocumentGlobal",Lp.key="remoteDocumentGlobalKey";var Mp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Mp.store="targets",Mp.keyPath="targetId",Mp.queryTargetsIndexName="queryTargetsIndex",Mp.queryTargetsKeyPath=["canonicalId","targetId"];var Fp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Fp.store="targetDocuments",Fp.keyPath=["targetId","path"],Fp.documentTargetsIndex="documentTargetsIndex",Fp.documentTargetsKeyPath=["path","targetId"];var Up=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Up.key="targetGlobalKey",Up.store="targetGlobal";var Vp=function(t,e){this.collectionId=t,this.parent=e};Vp.store="collectionParents",Vp.keyPath=["collectionId","parent"];var qp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};qp.store="clientMetadata",qp.keyPath="clientId";var Bp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Bp.store="bundles",Bp.keyPath="bundleId";var Hp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Hp.store="namedQueries",Hp.keyPath="name";var Qp=Object(Gl.f)(Object(Gl.f)([],Object(Gl.f)(Object(Gl.f)([],Object(Gl.f)(Object(Gl.f)([],Object(Gl.f)(Object(Gl.f)([],[Ap.store,kp.store,Np.store,Dp.store,Mp.store,jp.store,Up.store,Fp.store]),[qp.store])),[Lp.store])),[Vp.store])),[Bp.store,Hp.store]),zp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Kp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Wp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&th(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),$p=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Kp,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Xp(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=rg(e.target.error);n.gt.reject(new Xp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Xp(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Yl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new tg(e)},t}(),Yp=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Qs.p)())&&Jl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yl("SimpleDb","Removing database:",t),eg(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Qs.p)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Yl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Xp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new gh(ph.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Xp(t,n))},i.onupgradeneeded=function(t){Yl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Yl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Gl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Gl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=$p.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Wp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Yl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Jp=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return eg(this.xt.delete())},t}(),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,ph.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Gl.c)(e,t),e}(gh);function Zp(t){return"IndexedDbTransactionError"===t.name}var tg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),eg(n)},t.prototype.add=function(t){return Yl("SimpleDb","ADD",this.store.name,t,t),eg(this.store.add(t))},t.prototype.get=function(t){var e=this;return eg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Yl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Yl("SimpleDb","DELETE",this.store.name,t),eg(this.store.delete(t))},t.prototype.count=function(){return Yl("SimpleDb","COUNT",this.store.name),eg(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Yl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Wp(function(n,r){e.onerror=function(t){var e=rg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new Wp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Jp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Wp){var a=s.catch(function(t){return o.done(),Wp.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return Wp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function eg(t){return new Wp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=rg(t.target.error);n(e)}})}var ng=!1;function rg(t){var e=Yp.It(Object(Qs.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new gh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ng||(ng=!0,setTimeout(function(){throw r},0)),r}}return t}var ig=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Gl.c)(e,t),e}(Gp);function og(t,e){var n=nh(t);return Yp.Pt(n.Qt,e)}var sg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=nd(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=rd(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=rd(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Rd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&sh(this.mutations,t.mutations,function(t,e){return od(t,e)})&&sh(this.baseMutations,t.baseMutations,function(t,e){return od(t,e)})},t}(),ag=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){eh(e.mutations.length===r.length);for(var i=kd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ug=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=kf.min()),void 0===o&&(o=kf.min()),void 0===s&&(s=wh.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),cg=function(t){this.Kt=t};function lg(t,e){if(e.document)return ap(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=_h.fromSegments(e.noDocument.path),r=gg(e.noDocument.readTime);return new zh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=_h.fromSegments(e.unknownDocument.path);return r=gg(e.unknownDocument.version),new Gh(i,r)}return th()}function hg(t,e,n){var r=fg(n),i=e.key.path.popLast().toArray();if(e instanceof Qh){var o=function(t,e){return{name:tp(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Wd(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new Dp(null,null,o,s,r,i)}if(e instanceof zh){var a=e.key.path.toArray(),u=pg(e.version);return s=e.hasCommittedMutations,new Dp(null,new Rp(a,u),null,s,r,i)}if(e instanceof Gh){var c=e.key.path.toArray(),l=pg(e.version);return new Dp(new Pp(c,l),null,null,!0,r,i)}return th()}function fg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function dg(t){var e=new Sh(t[0],t[1]);return kf.fromTimestamp(e)}function pg(t){var e=t.toTimestamp();return new xp(e.seconds,e.nanoseconds)}function gg(t){var e=new Sh(t.seconds,t.nanoseconds);return kf.fromTimestamp(e)}function yg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return cp(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return cp(t.Kt,e)}),o=Sh.fromMillis(e.localWriteTimeMs);return new sg(e.batchId,o,n,i)}function vg(t){var e,n,r=gg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?gg(t.lastLimboFreeSnapshotVersion):kf.min();return void 0!==t.query.documents?(eh(1===(n=t.query).documents.length),e=Ef(yf(rp(n.documents[0])))):e=function(t){return Ef(fp(t))}(t.query),new ug(e,t.targetId,0,t.lastListenSequenceNumber,r,i,wh.fromBase64String(t.resumeToken))}function mg(t,e){var n,r=pg(e.snapshotVersion),i=pg(e.lastLimboFreeSnapshotVersion);n=Jh(e.target)?lp(t.Kt,e.target):hp(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Mp(e.targetId,$h(e.target),r,o,e.sequenceNumber,i,n)}function bg(t){var e=fp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Cf(e,e.limit,"L"):e}var _g=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return wg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:gg(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return wg(t).put({bundleId:(n=e).id,createTime:pg(Jd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Og(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:bg(e.bundledQuery),readTime:gg(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Og(t).put(function(t){return{name:t.name,readTime:pg(Jd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function wg(t){return og(t,Bp.store)}function Og(t){return og(t,Hp.store)}var Eg=function(){function t(){this.Wt=new Cg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Wp.resolve()},t.prototype.getCollectionParents=function(t,e){return Wp.resolve(this.Wt.getEntries(e))},t}(),Cg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ed(vh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ed(vh.comparator)).toArray()},t}(),Tg=function(){function t(){this.jt=new Cg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:Cp(i)};return Sg(t).put(o)}return Wp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ah(e),""],!1,!0);return Sg(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ip(o.parent))}return n})},t}();function Sg(t){return og(t,Vp.store)}var Ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xg=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function jg(t,e,n){var r=t.store(kp.store),i=t.store(Np.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){eh(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Np.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Wp.waitFor(o).next(function(){return c})}function Ag(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw th();e=t.noDocument}return JSON.stringify(e).length}xg.DEFAULT_COLLECTION_PERCENTILE=10,xg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xg.DEFAULT=new xg(41943040,xg.DEFAULT_COLLECTION_PERCENTILE,xg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xg.DISABLED=new xg(-1,0,0);var kg=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return eh(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rg(t).qt({index:kp.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Pg(t),s=Rg(t);return s.add({}).next(function(a){eh("number"==typeof a);for(var u=new sg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return up(t.Kt,e)}),i=n.mutations.map(function(e){return up(t.Kt,e)});return new kp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Ed(function(t,e){return oh(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Np.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Np.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),Wp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Rg(t).get(e).next(function(t){return t?(eh(t.userId===n.userId),yg(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Wp.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Rg(t).qt({index:kp.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(eh(e.batchId>=r),o=yg(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rg(t).qt({index:kp.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rg(t).kt(kp.userMutationsIndex,n).next(function(t){return t.map(function(t){return yg(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Np.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Pg(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Ip(r[1]);if(a===n.userId&&e.path.isEqual(c))return Rg(t).get(u).next(function(t){if(!t)throw th();eh(t.userId===n.userId),o.push(yg(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ed(oh),i=[];return e.forEach(function(e){var o=Np.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Pg(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Ip(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Wp.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Np.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ed(oh);return Pg(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Ip(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Rg(t).get(e).next(function(t){if(null===t)throw th();eh(t.userId===n.userId),r.push(yg(n.D,t))}))}),Wp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return jg(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),Wp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Wp.resolve();var r=IDBKeyRange.lowerBound(Np.prefixForUser(e.userId)),i=[];return Pg(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Ip(t[1]);i.push(o)}else r.done()}).next(function(){eh(0===i.length)})})},t.prototype.containsKey=function(t,e){return Ng(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Dg(t).get(this.userId).next(function(t){return t||new Ap(e.userId,-1,"")})},t}();function Ng(t,e,n){var r=Np.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Pg(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Rg(t){return og(t,kp.store)}function Pg(t){return og(t,Np.store)}function Dg(t){return og(t,Ap.store)}var Lg=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Mg=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Lg(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return kf.fromTimestamp(new Sh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Fg(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return eh(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Fg(t).qt(function(s,a){var u=vg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Wp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Fg(t).qt(function(t,n){var r=vg(n);e(r)})},t.prototype.se=function(t){return Ug(t).get(Up.key).next(function(t){return eh(null!==t),t})},t.prototype.ie=function(t,e){return Ug(t).put(Up.key,e)},t.prototype.re=function(t,e){return Fg(t).put(mg(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=$h(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fg(t).qt({range:r,index:Mp.queryTargetsIndexName},function(t,n,r){var o=vg(n);Yh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Vg(t);return e.forEach(function(e){var s=Cp(e.path);i.push(o.put(new Fp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Wp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Vg(t);return Wp.forEach(e,function(e){var o=Cp(e.path);return Wp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Vg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Vg(t),i=Rd();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Ip(t[1]),o=new _h(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Cp(e.path),r=IDBKeyRange.bound([n],[ah(n)],!1,!0),i=0;return Vg(t).qt({index:Fp.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return Fg(t).get(e).next(function(t){return t?vg(t):null})},t}();function Fg(t){return og(t,Mp.store)}function Ug(t){return og(t,Up.store)}function Vg(t){return og(t,Fp.store)}function qg(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){if(t.code!==ph.FAILED_PRECONDITION||t.message!==zp)throw t;return Yl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Bg(t,e){var n=t[1],r=e[1],i=oh(t[0],e[0]);return 0===i?oh(n,r):i}var Hg=function(){function t(t){this.ce=t,this.buffer=new Ed(Bg),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Bg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Qg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Yl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Gl.b)(e,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Zp(e=n.sent())?(Yl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,qg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),zg=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Wp.resolve(Kl.o);var r=new Hg(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; disabled"),Wp.resolve(Ig)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ig):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),$l()<=Hs.a.DEBUG&&Yl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Wp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Gg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new zg(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Kg(t,n)},t.prototype.removeReference=function(t,e,n){return Kg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Kg(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Dg(t).Ut(function(r){return Ng(t,r,e).next(function(t){return t&&(n=!0),Wp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Vg(t).delete([0,Cp(s.path)])})});i.push(u)}}).next(function(){return Wp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Kg(t,e)},t.prototype.pe=function(t,e){var n,r=Vg(t),i=Kl.o;return r.qt({index:Fp.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Kl.o&&e(new _h(Ip(n)),i),i=s,n=o):i=Kl.o}).next(function(){i!==Kl.o&&e(new _h(Ip(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Kg(t,e){return Vg(t).put(function(t,e){return new Fp(0,Cp(t.path),e)}(e,t.currentSequenceNumber))}var Wg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ch(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return lh(this.inner)},t}(),$g=function(){function t(){this.changes=new Wg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:kf.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Wp.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Yg=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Zg(t).put(ty(e),n)},t.prototype.removeEntry=function(t,e){var n=Zg(t),r=ty(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Zg(t).get(ty(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Zg(t).get(ty(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Ag(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Id();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Id(),i=new _d(_h.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Ag(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Wp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Zg(t).qt({range:r},function(t,e,r){for(var s=_h.fromSegments(t);o&&_h.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=jd(),o=e.path.length+1,s={};if(n.isEqual(kf.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=fg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Dp.collectionReadTimeIndex}return Zg(t).qt(s,function(t,n,s){if(t.length===o){var a=lg(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Qh&&xf(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Jg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Xg(t).get(Lp.key).next(function(t){return eh(!!t),t})},t.prototype.Te=function(t,e){return Xg(t).put(Lp.key,e)},t.prototype.Ie=function(t){if(t){var e=lg(this.D,t);return e instanceof zh&&e.version.isEqual(kf.min())?null:e}return null},t}(),Jg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Wg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Gl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ed(function(t,e){return oh(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=hg(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ag(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=hg(e.Ve.D,new zh(o,kf.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),Wp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}($g);function Xg(t){return og(t,Lp.store)}function Zg(t){return og(t,Dp.store)}function ty(t){return t.path.toArray()}var ey=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;eh(n<r&&n>=0&&r<=11);var o=new $p("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(jp.store)}(t),function(t){t.createObjectStore(Ap.store,{keyPath:Ap.keyPath}),t.createObjectStore(kp.store,{keyPath:kp.keyPath,autoIncrement:!0}).createIndex(kp.userMutationsIndex,kp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Np.store)}(t),ny(t),function(t){t.createObjectStore(Dp.store)}(t));var s=Wp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Fp.store),t.deleteObjectStore(Mp.store),t.deleteObjectStore(Up.store)}(t),ny(t)),s=s.next(function(){return function(t){var e=t.store(Up.store),n=new Up(0,0,kf.min().toTimestamp(),0);return e.put(Up.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(kp.store).kt().next(function(n){t.deleteObjectStore(kp.store),t.createObjectStore(kp.store,{keyPath:kp.keyPath,autoIncrement:!0}).createIndex(kp.userMutationsIndex,kp.userMutationsKeyPath,{unique:!0});var r=e.store(kp.store),i=n.map(function(t){return r.put(t)});return Wp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(qp.store,{keyPath:qp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Lp.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Dp.store);e.createIndex(Dp.readTimeIndex,Dp.readTimeIndexPath,{unique:!1}),e.createIndex(Dp.collectionReadTimeIndex,Dp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Bp.store,{keyPath:Bp.keyPath})}(t),function(t){t.createObjectStore(Hp.store,{keyPath:Hp.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(Dp.store).qt(function(t,n){e+=Ag(n)}).next(function(){var n=new Lp(e);return t.store(Lp.store).put(Lp.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Ap.store),r=t.store(kp.store);return n.kt().next(function(n){return Wp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(kp.userMutationsIndex,i).next(function(r){return Wp.forEach(r,function(r){eh(r.userId===n.userId);var i=yg(e.D,r);return jg(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Fp.store),n=t.store(Dp.store);return t.store(Up.store).get(Up.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new vh(n),s=function(t){return[0,Cp(t)]}(o);r.push(e.get(s).next(function(n){return n?Wp.resolve():function(n){return e.put(new Fp(0,Cp(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Wp.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Vp.store,{keyPath:Vp.keyPath});var n=e.store(Vp.store),r=new Cg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Cp(i)})}};return e.store(Dp.store).qt({Bt:!0},function(t,e){var n=new vh(t);return i(n.popLast())}).next(function(){return e.store(Np.store).qt({Bt:!0},function(t,e){var n=Ip(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Mp.store);return n.qt(function(t,r){var i=vg(r),o=mg(e.D,i);return n.put(o)})},t}();function ny(t){t.createObjectStore(Fp.store,{keyPath:Fp.keyPath}).createIndex(Fp.documentTargetsIndex,Fp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Mp.store,{keyPath:Mp.keyPath}).createIndex(Mp.queryTargetsIndexName,Mp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Up.store)}var ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iy=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new gh(ph.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gg(this,i),this.We=n+"main",this.D=new cg(u),this.je=new Yp(this.We,11,new ey(this.D)),this.Ge=new Mg(this.referenceDelegate,this.D),this.Gt=new Tg,this.ze=function(t,e){return new Yg(t,e)}(this.D,this.Gt),this.He=new _g,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Jl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new gh(ph.FAILED_PRECONDITION,ry);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Kl(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Gl.b)(e,void 0,void 0,function(){return Object(Gl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Gl.b)(e,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Gl.b)(e,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return sy(e).put(new qp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Zp(e))return Yl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return oy(t).get(jp.key).next(function(t){return Wp.resolve(e.cn(t))})},t.prototype.an=function(t){return sy(t).delete(this.clientId)},t.prototype.un=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=og(t,qp.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Wp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Wp.resolve(!0):oy(t).get(jp.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new gh(ph.FAILED_PRECONDITION,ry);return!1}}return!(!e.networkEnabled||!e.inForeground)||sy(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Yl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t=this;return Object(Gl.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[jp.store,qp.store],function(e){var n=new ig(e,Kl.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return sy(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return kg.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Yl("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Qp,function(o){return r=new ig(o,i.Me?i.Me.next():Kl.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw Jl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new gh(ph.FAILED_PRECONDITION,zp);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return oy(t).get(jp.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new gh(ph.FAILED_PRECONDITION,ry)})},t.prototype.on=function(t){var e=new jp(this.clientId,this.allowTabSynchronization,Date.now());return oy(t).put(jp.key,e)},t.At=function(){return Yp.At()},t.prototype.rn=function(t){var e=this,n=oy(t);return n.get(jp.key).next(function(t){return e.cn(t)?(Yl("IndexedDbPersistence","Releasing primary lease."),n.delete(jp.key)):Wp.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Jl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Yl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Jl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Jl("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function oy(t){return og(t,jp.store)}function sy(t){return og(t,qp.store)}function ay(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var uy=function(t,e){this.progress=t,this.En=e},cy=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Id();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Sd();return i.forEach(function(t,e){e||(e=new zh(t,kf.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return _h.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):wf(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new _h(e)).next(function(t){var e=jd();return t instanceof Qh&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=jd();return this.Gt.getCollectionParents(t,i).next(function(s){return Wp.forEach(s,function(s){var a=function(t,e){return new pf(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=rd(u,r.get(c),o.localWriteTime);r=l instanceof Qh?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){xf(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=Rd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ud&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Qh&&(c=c.insert(t,e))}),c})},t}(),ly=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=Rd(),i=Rd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),hy=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(kf.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(vf(e)||mf(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):($l()<=Hs.a.DEBUG&&Yl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),If(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Ed(jf(t));return e.forEach(function(e,r){r instanceof Qh&&xf(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return $l()<=Hs.a.DEBUG&&Yl("QueryEngine","Using full collection scan to execute query:",If(e)),this.Fn.getDocumentsMatchingQuery(t,e,kf.min())},t}(),fy=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new _d(oh),this.qn=new Wg(function(t){return $h(t)},Yh),this.Un=kf.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new cy(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function dy(t,e,n,r){return new fy(t,e,n,r)}function py(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:return n=nh(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new cy(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Rd(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function gy(t,e){var n=nh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Wp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);eh(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function yy(t){var e=nh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function vy(t,e){var n=nh(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return eh(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Sd();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(my(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(kf.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Wp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function my(t,e,n,r,i){var o=Rd();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Sd();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof zh&&s.version.isEqual(kf.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Yl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function by(t,e){var n=nh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function _y(t,e){var n=nh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?Wp.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new ug(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function wy(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:r=nh(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Zp(s=a.sent()))throw s;return Yl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function Oy(t,e,n){var r=nh(t),i=kf.min(),o=Rd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=nh(t),i=r.qn.get(n);return void 0!==i?Wp.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,Ef(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:kf.min(),n?o:Rd())}).next(function(t){return{documents:t,jn:o}})})}function Ey(t,e){var n=nh(t),r=nh(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function Cy(t){var e=nh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=nh(t),i=Sd(),o=fg(n),s=Zg(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:Dp.readTimeIndex,range:a},function(t,e){var n=lg(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:dg(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Ty(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){return[2,(e=nh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Zg(t),n=kf.min();return e.qt({index:Dp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=dg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Sy(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Gl.d)(this,function(p){switch(p.label){case 0:for(i=nh(t),o=Rd(),s=Sd(),a=kd(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,_y(i,function(t){return Ef(yf(vh.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return my(t,f,s,kf.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Iy(t,e,n){return void 0===n&&(n=Rd()),Object(Gl.b)(this,void 0,void 0,function(){var r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return[4,_y(t,Ef(bg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=nh(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Jd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(wh.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var xy=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Wp.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Jd(n.createTime)}),Wp.resolve()},t.prototype.getNamedQuery=function(t,e){return Wp.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:bg(t.bundledQuery),readTime:Jd(t.readTime)}}(e)),Wp.resolve()},t}(),jy=function(){function t(){this.Xn=new Ed(Ay.Zn),this.ts=new Ed(Ay.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ay(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Ay(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new _h(new vh([])),r=new Ay(n,t),i=new Ay(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new _h(new vh([])),n=new Ay(e,t),r=new Ay(e,t+1),i=Rd();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ay(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ay=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return _h.comparator(t.key,e.key)||oh(t.hs,e.hs)},t.es=function(t,e){return oh(t.hs,e.hs)||_h.comparator(t.key,e.key)},t}(),ky=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Ed(Ay.Zn)}return t.prototype.checkEmpty=function(t){return Wp.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new sg(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Ay(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Wp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Wp.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return Wp.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Wp.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Wp.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ay(e,0),i=new Ay(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),Wp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ed(oh);return e.forEach(function(t){var e=new Ay(t,0),i=new Ay(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),Wp.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;_h.isDocumentKey(i)||(i=i.child(""));var o=new Ay(new _h(i),0),s=new Ed(oh);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),Wp.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;eh(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Wp.forEach(e.mutations,function(i){var o=new Ay(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ay(e,0),r=this.fs.firstAfterOrEqual(n);return Wp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Wp.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),Ny=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new _d(_h.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Wp.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Id();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Wp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=jd(),i=new _h(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Qh&&xf(e,u)&&(r=r.insert(u.key,u))}return Wp.resolve(r)},t.prototype.ps=function(t,e){return Wp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Ry(this)},t.prototype.getSize=function(t){return Wp.resolve(this.size)},t}(),Ry=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Gl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),Wp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}($g),Py=function(){function t(t){this.persistence=t,this.Es=new Wg(function(t){return $h(t)},Yh),this.lastRemoteSnapshotVersion=kf.min(),this.highestTargetId=0,this.Ts=0,this.Is=new jy,this.targetCount=0,this.As=Lg.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),Wp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Wp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Wp.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Wp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Wp.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Lg(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Wp.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Wp.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Wp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Wp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Wp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Wp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Wp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Wp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Wp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Wp.resolve(n)},t.prototype.containsKey=function(t,e){return Wp.resolve(this.Is.containsKey(e))},t}(),Dy=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Kl(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Py(this),this.Gt=new Eg,this.ze=function(t,e){return new Ny(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new cg(e),this.He=new xy(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new ky(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Yl("MemoryPersistence","Starting transaction:",t);var i=new Ly(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return Wp.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ly=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Gl.c)(e,t),e}(Gp),My=function(){function t(t){this.persistence=t,this.Ss=new jy,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw th()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Wp.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Wp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Wp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wp.forEach(this.xs,function(r){var i=_h.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Wp.or([function(){return Wp.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),Fy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Uy(t,e){return"firestore_clients_"+t+"_"+e}function Vy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function qy(t,e){return"firestore_targets_"+t+"_"+e}Fy.UNAUTHENTICATED=new Fy(null),Fy.GOOGLE_CREDENTIALS=new Fy("google-credentials-uid"),Fy.FIRST_PARTY=new Fy("first-party-uid");var By=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new gh(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Jl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gh(i.error.code,i.error.message)),o?new t(e,i.state,r):(Jl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Dd(),s=0;i&&s<r.activeTargetIds.length;++s)i=dh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),zy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Jl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Gy=function(){function t(){this.activeTargetIds=Dd()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ky=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new _d(oh),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Uy(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Gy),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Gl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Uy(this.persistenceKey,r)))&&(o=Qy.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(qy(this.persistenceKey,t));if(n){var r=Hy.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(qy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Jl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Gl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Gl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Kl.o;if(null!=t)try{var n=JSON.parse(t);eh("number"==typeof n),e=n}catch(t){Jl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Kl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new By(this.currentUser,t,e,n),i=Vy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Vy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=qy(this.persistenceKey,t),i=new Hy(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Qy.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return By.$s(new Fy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Hy.$s(r,e)},t.prototype.Ys=function(t){return zy.$s(t)},t.prototype.hi=function(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Yl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Dd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Wy=function(){function t(){this.yi=new Gy,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Gy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),$y=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Yy=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Yl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Yl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Jy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Xy=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Zy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Gl.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new zl;s.listenOnce(Bl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ql.NO_ERROR:var e=s.getResponseJson();Yl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ql.TIMEOUT:Yl("Connection",'RPC "'+t+'" timed out'),o(new gh(ph.DEADLINE_EXCEEDED,"Request time out"));break;case ql.HTTP_ERROR:var n=s.getStatus();if(Yl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ph).indexOf(e)>=0?e:ph.UNKNOWN}(r.status);o(new gh(a,r.message))}else o(new gh(ph.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new gh(ph.UNAVAILABLE,"Connection failed."));break;default:th()}}finally{Yl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ll,i=Uu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Qs.x)()||Object(Qs.A)()||Object(Qs.t)()||Object(Qs.v)()||Object(Qs.B)()||Object(Qs.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Yl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Xy({vi:function(t){c?Yl("Connection","Not sending because WebChannel is closed:",t):(u||(Yl("Connection","Opening WebChannel transport."),a.open(),u=!0),Yl("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ql.EventType.OPEN,function(){c||Yl("Connection","WebChannel transport opened.")}),h(a,Ql.EventType.CLOSE,function(){c||(c=!0,Yl("Connection","WebChannel transport closed"),l.$i())}),h(a,Ql.EventType.ERROR,function(t){c||(c=!0,Xl("Connection","WebChannel transport errored:",t),l.$i(new gh(ph.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ql.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];eh(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Yl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=dd[t];if(void 0!==e)return bd(e)}(i),s=r.message;void 0===o&&(o=ph.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new gh(o,s)),a.close()}else Yl("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,Hl.STAT_EVENT,function(t){10===t.stat?Yl("Connection","Detected buffering proxy"):11===t.stat&&Yl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Yl("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Yl("RestConnection","Received: ",t),t},function(e){throw Xl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+Jy[t]},t}());function tv(){return"undefined"!=typeof window?window:null}function ev(){return"undefined"!=typeof document?document:null}function nv(t){return new Kd(t,!0)}var rv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Yl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),iv=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new rv(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===ph.RESOURCE_EXHAUSTED?(Jl(e.toString()),Jl("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===ph.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new gh(ph.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Gl.b)(t,void 0,void 0,function(){return Object(Gl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Yl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Yl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ov=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Gl.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:th()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(eh(void 0===e||"string"==typeof e),wh.fromBase64String(e||"")):(eh(void 0===e||e instanceof Uint8Array),wh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ph.UNKNOWN:bd(t.code);return new gh(e,t.message||"")}(a);n=new Vd(r,i,o,s||null)}else if("documentChange"in e){i=ep(t,(r=e.documentChange).document.name),o=Jd(r.document.updateTime);var a=new Rf({mapValue:{fields:r.document.fields}}),u=(s=new Qh(i,o,a,{}),r.targetIds||[]);n=new Fd(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ep(t,(r=e.documentDelete).document),o=r.readTime?Jd(r.readTime):kf.min(),a=new zh(i,o),n=new Fd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ep(t,(r=e.documentRemove).document),n=new Fd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return th();var c=e.filter;i=new vd(r=c.count||0),n=new Ud(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return kf.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?kf.min():e.readTime?Jd(e.readTime):kf.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=ip(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Jh(r)?{documents:lp(t,r)}:{query:hp(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=$d(t,e.resumeToken):e.snapshotVersion.compareTo(kf.min())>0&&(n.readTime=Wd(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return th()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=ip(this.D),e.removeTarget=t,this.wr(e)},e}(iv),sv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(eh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(eh(void 0!==e),t.map(function(t){return function(t,e){var n=Jd(t.updateTime?t.updateTime:e);return n.isEqual(kf.min())&&(n=Jd(e)),new Xf(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Jd(t.commitTime);return this.listener.Pr(n,e)}return eh(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=ip(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return up(e.D,t)})};this.wr(n)},e}(iv),av=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Gl.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new gh(ph.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===ph.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===ph.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),uv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Jl(e),this.Fr=!1):Yl("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),cv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Gl.b)(o,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return mv(this)?(Yl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return(e=nh(t)).Qr.add(4),[4,hv(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,lv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new uv(n,r)};function lv(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:if(!mv(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function hv(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function fv(t,e){var n=nh(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),vv(n)?yv(n):Rv(n).ar()&&pv(n,e))}function dv(t,e){var n=nh(t),r=Rv(n);n.Ur.delete(e),r.ar()&&gv(n,e),0===n.Ur.size&&(r.ar()?r.lr():mv(n)&&n.jr.set("Unknown"))}function pv(t,e){t.Gr.H(e.targetId),Rv(t).Ir(e)}function gv(t,e){t.Gr.H(e),Rv(t).Ar(e)}function yv(t){t.Gr=new Bd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),Rv(t).start(),t.jr.Or()}function vv(t){return mv(t)&&!Rv(t).cr()&&t.Ur.size>0}function mv(t){return 0===nh(t).Qr.size}function bv(t){t.Gr=void 0}function _v(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){return t.Ur.forEach(function(e,n){pv(t,e)}),[2]})})}function wv(t,e){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(n){return bv(t),vv(t)?(t.jr.Lr(e),yv(t)):t.jr.set("Unknown"),[2]})})}function Ov(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Vd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Yl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ev(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Fd?t.Gr.st(e):e instanceof Ud?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(kf.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,yy(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(wh.EMPTY_BYTE_STRING,n.snapshotVersion)),gv(t,e);var r=new ug(n.target,e,1,n.sequenceNumber);pv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Yl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ev(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Ev(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r=this;return Object(Gl.d)(this,function(i){switch(i.label){case 0:if(!Zp(e))throw e;return t.Qr.add(1),[4,hv(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return yy(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Gl.b)(r,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return Yl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,lv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Cv(t,e){return e().catch(function(n){return Ev(t,n,e)})}function Tv(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:e=nh(t),n=Pv(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return mv(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,by(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Pv(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ev(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Sv(e)&&Iv(e),[2]}})})}function Sv(t){return mv(t)&&!Pv(t).cr()&&t.qr.length>0}function Iv(t){Pv(t).start()}function xv(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){return Pv(t).Sr(),[2]})})}function jv(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n,r;return Object(Gl.d)(this,function(i){for(e=Pv(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Av(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=ag.from(r,e,n),[4,Cv(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Tv(t)];case 2:return o.sent(),[2]}})})}function kv(t,e){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e&&Pv(t).br?[4,function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return md(r=e.code)&&r!==ph.ABORTED?(n=t.qr.shift(),Pv(t).hr(),[4,Cv(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Tv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Sv(t)&&Iv(t),[2]}})})}function Nv(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return n=nh(t),e?(n.Qr.delete(2),[4,lv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,hv(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Rv(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=nh(t);return r.Cr(),new ov(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:_v.bind(null,t),Di:wv.bind(null,t),Tr:Ov.bind(null,t)}),t.Kr.push(function(n){return Object(Gl.b)(e,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),vv(t)?yv(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),bv(t),e.label=3;case 3:return[2]}})})})),t.zr}function Pv(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=nh(t);return r.Cr(),new sv(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:xv.bind(null,t),Di:kv.bind(null,t),Vr:jv.bind(null,t),Pr:Av.bind(null,t)}),t.Kr.push(function(n){return Object(Gl.b)(e,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Tv(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Yl("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var Dv=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Kp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gh(ph.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Lv(t,e){if(Jl("AsyncQueue",e+": "+t),Zp(t))return new gh(ph.UNAVAILABLE,e+": "+t);throw t}var Mv=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||_h.comparator(e.key,n.key)}:function(t,e){return _h.comparator(t.key,e.key)},this.keyedMap=jd(),this.sortedSet=new _d(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Fv=function(){function t(){this.Jr=new _d(_h.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):th():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Uv=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Mv.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Vv=function(){this.Xr=void 0,this.listeners=[]},qv=function(){this.queries=new Wg(function(t){return Sf(t)},Tf),this.onlineState="Unknown",this.Zr=new Set};function Bv(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Gl.d)(this,function(c){switch(c.label){case 0:if(n=nh(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Vv),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Lv(a,"Initialization of query '"+If(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&Gv(n),[2]}})})}function Hv(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gl.d)(this,function(a){return n=nh(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Qv(t,e){for(var n=nh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&Gv(n)}function zv(t,e,n){var r=nh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Gv(t){t.Zr.forEach(function(t){t.next()})}var Kv=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Uv(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Uv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),Wv=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),$v=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return ep(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?ap(this.D,t.document,!1):new zh(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Jd(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new $v(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Rd()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return[4,Sy(this.localStore,new $v(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Iy(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new uy(Object.assign({},this.progress),t))]}})})}}();var Yv=function(t){this.key=t},Jv=function(t){this.key=t},Xv=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=Rd(),this.mutatedKeys=Rd(),this.po=jf(t),this.Eo=new Mv(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new Fv,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=vf(this.query)&&i.size===this.query.limit?i.last():null,c=mf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Qh?e:null;h&&(h=xf(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),vf(this.query)||mf(this.query))for(;s.size>this.query.limit;){var l=vf(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return th()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Uv(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Fv,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=Rd(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new Jv(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new Yv(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=Rd();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Uv.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Zv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tm=function(t){this.key=t,this.Co=!1},em=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Wg(function(t){return Sf(t)},Tf),this.$o=new Map,this.Fo=new Set,this.Oo=new _d(_h.comparator),this.ko=new Map,this.Mo=new jy,this.Lo={},this.Bo=new Map,this.qo=Lg.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function nm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:return n=km(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,_y(n.localStore,Ef(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,rm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&fv(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function rm(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Gl.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,Oy(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(ym(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,Oy(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Xv(e,i.jn),s=o.Io(i.documents),a=Md.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),ym(t,n,u.Po),c=new Zv(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function im(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return n=nh(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!Tf(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,wy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),dv(n.remoteStore,r.targetId),pm(n,r.targetId)}).catch(qg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return pm(n,r.targetId),[4,wy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function om(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:r=Nm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=nh(t),i=Sh.now(),o=e.reduce(function(t,e){return t.add(e.key)},Rd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=id(c,n.get(c.key));null!=l&&s.push(new ud(c.key,l,Df(l.proto.mapValue),Zf.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new _d(oh)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,bm(r,i.changes)];case 3:return a.sent(),[4,Tv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Lv(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function sm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:n=nh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,vy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(eh(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?eh(r.Co):t.removedDocuments.size>0&&(eh(r.Co),r.Co=!1))}),[4,bm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,qg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function am(t,e,n){var r=nh(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=nh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&Gv(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function um(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Gl.d)(this,function(c){switch(c.label){case 0:return(r=nh(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new _d(_h.comparator)).insert(o,new zh(o,kf.min())),a=Rd().add(o),u=new Ld(kf.min(),new Map,new Ed(oh),s,a),[4,sm(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),mm(r),[3,4];case 2:return[4,wy(r.localStore,e,!1).then(function(){return pm(r,e,n)}).catch(qg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function cm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:n=nh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,gy(n.localStore,e)];case 2:return i=o.sent(),dm(n,r,null),fm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,bm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,qg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lm(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:r=nh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=nh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return eh(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),dm(r,e,n),fm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,bm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,qg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function hm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:mv((n=nh(t)).remoteStore)||Yl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=nh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Lv(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function fm(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function dm(t,e,n){var r=nh(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function pm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||gm(t,e)})}function gm(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(dv(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),mm(t))}function ym(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yv?(t.Mo.addReference(o.key,e),vm(t,o)):o instanceof Jv?(Yl("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||gm(t,o.key)):th()}}function vm(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Yl("SyncEngine","New document in limbo: "+n),t.Fo.add(r),mm(t))}function mm(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new _h(vh.fromString(e)),r=t.qo.next();t.ko.set(r,new tm(n)),t.Oo=t.Oo.insert(n,r),fv(t.remoteStore,new ug(Ef(yf(n.path)),r,2,Kl.o))}}function bm(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:return r=nh(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ly.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Gl.d)(this,function(l){switch(l.label){case 0:n=nh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Wp.forEach(e,function(e){return Wp.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Wp.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Zp(r=l.sent()))throw r;return Yl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function _m(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return(n=nh(t)).currentUser.isEqual(e)?[3,3]:(Yl("SyncEngine","User change. New user:",e.toKey()),[4,py(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new gh(ph.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,bm(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function wm(t,e){var n=nh(t),r=n.ko.get(e);if(r&&r.Co)return Rd().add(r.key);var i=Rd(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function Om(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return[4,Oy((n=nh(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&ym(n,e.targetId,i.Po),i)]}})})}function Em(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){return[2,Cy((e=nh(t)).localStore).then(function(t){return bm(e,t)})]})})}function Cm(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=nh(t),r=nh(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):Wp.resolve(null)})})}((i=nh(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Tv(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(dm(i,e,r||null),fm(i,e),function(t,e){nh(nh(t).Tn).Xt(e)}(i.localStore,e)):th(),s.label=4;case 4:return[4,bm(i,o)];case 5:return s.sent(),[3,7];case 6:Yl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Tm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Gl.d)(this,function(c){switch(c.label){case 0:return km(n=nh(t)),Nm(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Sm(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,Nv(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)fv(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return pm(n,e),wy(n.localStore,e,!0)}),dv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Sm(n,a)];case 5:return c.sent(),function(t){var e=nh(t);e.ko.forEach(function(t,n){dv(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new _d(_h.comparator)}(n),n.Uo=!1,[4,Nv(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Sm(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Gl.d)(this,function(g){switch(g.label){case 0:n=nh(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,_y(n.localStore,Ef(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,Om(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ey(n.localStore,a)];case 8:return p=g.sent(),[4,_y(n.localStore,p)];case 9:return u=g.sent(),[4,rm(n,Im(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Im(t){return gf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xm(t){var e=nh(t);return nh(nh(e.localStore).persistence).gn()}function jm(t,e,n,r){return Object(Gl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Gl.d)(this,function(a){switch(a.label){case 0:return(i=nh(t)).Uo?(Yl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cy(i.localStore)];case 3:return o=a.sent(),s=Ld.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,bm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,wy(i.localStore,e,!0)];case 6:return a.sent(),pm(i,e,r),[3,8];case 7:th(),a.label=8;case 8:return[2]}})})}function Am(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Gl.d)(this,function(f){switch(f.label){case 0:if(!(r=km(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Yl("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ey(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,_y(r.localStore,a)];case 3:return u=f.sent(),[4,rm(r,Im(a),u.targetId,!1)];case 4:f.sent(),fv(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,wy(r.localStore,t,!1).then(function(){dv(r.remoteStore,t),pm(r,t)}).catch(qg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function km(t){var e=nh(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=um.bind(null,e),e.xo.Tr=Qv.bind(null,e.eventManager),e.xo.Ko=zv.bind(null,e.eventManager),e}function Nm(t){var e=nh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lm.bind(null,e),e}var Rm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return this.D=nv(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return dy(this.persistence,new hy,t.initialUser,this.D)},t.prototype.Go=function(t){return new Dy(My.Cs,this.D)},t.prototype.jo=function(t){return new Wy},t.prototype.terminate=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Pm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Gl.c)(e,t),e.prototype.initialize=function(e){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ty(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,Nm(this.Jo.syncEngine)];case 4:return n.sent(),[4,Tv(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return dy(this.persistence,new hy,t.initialUser,this.D)},e.prototype.zo=function(t){return new Qg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=ay(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xg.withCacheSize(this.cacheSizeBytes):xg.DEFAULT;return new iy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,tv(),ev(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Wy},e}(Rm),Dm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Gl.c)(e,t),e.prototype.initialize=function(e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r=this;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Ky?(this.sharedClientState.syncEngine={wi:Cm.bind(null,n),_i:jm.bind(null,n),mi:Am.bind(null,n),gn:xm.bind(null,n),di:Em.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Gl.b)(r,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return[4,Tm(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=tv();if(!Ky.At(e))throw new gh(ph.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ay(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ky(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Pm),Lm=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n=this;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return am(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_m.bind(null,this.syncEngine),[4,Nv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new qv},t.prototype.createDatastore=function(t){var e=nv(t.databaseInfo.databaseId),n=new Zy(t.databaseInfo);return function(t,e,n){return new av(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return am(s.syncEngine,t,0)},o=Yy.At()?new Yy:new $y,new cv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new em(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e=nh(t),Yl("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,hv(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Mm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Fm=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Kp,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new Wv(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Gl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new gh(ph.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Gl.d)(this,function(u){switch(u.label){case 0:return n=nh(t),r=ip(n.D)+"/documents",i={documents:e.map(function(t){return tp(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){eh(!!e.found);var n=ep(t,e.found.name),r=Jd(e.found.updateTime),i=new Rf({mapValue:{fields:e.found.fields}});return new Qh(n,r,i,{})}(t,e):"missing"in e?function(t,e){eh(!!e.missing),eh(!!e.readTime);var n=ep(t,e.missing),r=Jd(e.readTime);return new zh(n,r)}(t,e):th()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());eh(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof zh||t instanceof Qh?n.recordVersion(t):th()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new gd(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Gl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=_h.fromPath(n);e.mutations.push(new yd(r,e.precondition(r)))}),[4,function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return n=nh(t),r=ip(n.D)+"/documents",i={writes:e.map(function(t){return up(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Qh)e=t.version;else{if(!(t instanceof zh))throw th();e=kf.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new gh(ph.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Zf.updateTime(e):Zf.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(kf.min()))throw new gh(ph.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zf.updateTime(e)}return Zf.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Um=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new rv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Gl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Gl.d)(this,function(r){return t=new Fm(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!hh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!md(e)}return!1},t}(),Vm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Fy.UNAUTHENTICATED,this.clientId=ih.u(),this.credentialListener=function(){},this.receivedInitialUser=new Kp,this.credentials.setChangeListener(function(t){Yl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new gh(ph.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Kp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Gl.b)(t,void 0,void 0,function(){var t,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Lv(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function qm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Gl.b)(i,void 0,void 0,function(){return Object(Gl.d)(this,function(t){switch(t.label){case 0:return[4,py(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Bm(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Hm(t)];case 1:return n=i.sent(),Yl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return(n=nh(t)).asyncQueue.verifyOperationInProgress(),Yl("RemoteStore","RemoteStore received new credentials"),r=mv(n),n.Qr.add(3),[4,hv(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,lv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Hm(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yl("FirestoreClient","Using default OfflineComponentProvider"),[4,qm(t,new Rm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Qm(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yl("FirestoreClient","Using default OnlineComponentProvider"),[4,Bm(t,new Lm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function zm(t){return Hm(t).then(function(t){return t.persistence})}function Gm(t){return Hm(t).then(function(t){return t.localStore})}function Km(t){return Qm(t).then(function(t){return t.remoteStore})}function Wm(t){return Qm(t).then(function(t){return t.syncEngine})}function $m(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return[4,Qm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=nm.bind(null,e.syncEngine),n.onUnlisten=im.bind(null,e.syncEngine),n)]}})})}function Ym(t,e,n){var r=this;void 0===n&&(n={});var i=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(r,void 0,void 0,function(){var r;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mm({next:function(o){e.enqueueAndForget(function(){return Hv(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new gh(ph.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new gh(ph.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Kv(yf(n.path),o,{includeMetadataChanges:!0,uo:!0});return Bv(t,s)},[4,$m(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Jm(t,e,n){var r=this;void 0===n&&(n={});var i=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(r,void 0,void 0,function(){var r;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mm({next:function(n){e.enqueueAndForget(function(){return Hv(t,s)}),n.fromCache&&"server"===r.source?i.reject(new gh(ph.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Kv(n,o,{includeMetadataChanges:!0,uo:!0});return Bv(t,s)},[4,$m(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Xm=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Zm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),tb=new Map,eb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},nb=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Fy.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rb=function(){function t(t){var e=this;this.fc=null,this.currentUser=Fy.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Yl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(eh("string"==typeof n.accessToken),new eb(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return eh(null===t||"string"==typeof t),new Fy(t)},t}(),ib=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=Fy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ob=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new ib(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(Fy.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function sb(t,e,n){if(!n)throw new gh(ph.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ab(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gh(ph.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ub(t,e,n,r){if(!0===e&&!0===r)throw new gh(ph.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cb(t){if(!_h.isDocumentKey(t))throw new gh(ph.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function lb(t){if(_h.isDocumentKey(t))throw new gh(ph.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function hb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":th()}function fb(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new gh(ph.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hb(t);throw new gh(ph.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function db(t,e){if(e<=0)throw new gh(ph.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var pb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new gh(ph.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gh(ph.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ub("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),gb=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new pb({}),this._settingsFrozen=!1,t instanceof Zm?(this._databaseId=t,this._credentials=new nb):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new gh(ph.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zm(t.options.projectId)}(t),this._credentials=new rb(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new gh(ph.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new gh(ph.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new nb;switch(t.type){case"gapi":var e=t.client;return eh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ob(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new gh(ph.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=tb.get(this))&&(Yl("ComponentProvider","Removing Datastore"),tb.delete(this),t.terminate()),Promise.resolve();var t},t}(),yb=function(t){this._delegate=t},vb=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bb(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),mb=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,yf(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new vb(this.firestore,null,new _h(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(mb);function _b(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof yb&&(t=t._delegate),sb("collection","path",e),t instanceof gb)return lb(n=vh.fromString.apply(vh,Object(Gl.f)([e],r))),new bb(t,null,n);if(!(t instanceof vb||t instanceof bb))throw new gh(ph.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lb(n=vh.fromString.apply(vh,Object(Gl.f)([t.path],r)).child(vh.fromString(e))),new bb(t.firestore,null,n)}function wb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof yb&&(t=t._delegate),1===arguments.length&&(e=ih.u()),sb("doc","path",e),t instanceof gb)return cb(n=vh.fromString.apply(vh,Object(Gl.f)([e],r))),new vb(t,null,new _h(n));if(!(t instanceof vb||t instanceof bb))throw new gh(ph.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cb(n=t._path.child(vh.fromString.apply(vh,Object(Gl.f)([e],r)))),new vb(t.firestore,t instanceof bb?t._converter:null,new _h(n))}function Ob(t,e){return t instanceof yb&&(t=t._delegate),e instanceof yb&&(e=e._delegate),(t instanceof vb||t instanceof bb)&&(e instanceof vb||e instanceof bb)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Eb(t,e){return t instanceof yb&&(t=t._delegate),e instanceof yb&&(e=e._delegate),t instanceof mb&&e instanceof mb&&t.firestore===e.firestore&&Tf(t._query,e._query)&&t._converter===e._converter}var Cb=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new rv(this,"async_queue_retry"),this.bc=function(){var e=ev();e&&Yl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=ev();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=ev();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Gl.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Zp(t=n.sent()))throw t;return Yl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,Jl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Dv.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&th()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t;return Object(Gl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Tb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Kp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Sb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Cb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Gl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||xb(this),this._firestoreClient.terminate()},e}(gb);function Ib(t){return t._firestoreClient||xb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xb(t){var e=t._freezeSettings(),n=function(t,e,n){return new Xm(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Vm(t._credentials,t._queue,n)}function jb(t,e,n){var r=this,i=new Kp;return t.asyncQueue.enqueue(function(){return Object(Gl.b)(r,void 0,void 0,function(){var r;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,qm(t,n)];case 1:return o.sent(),[4,Bm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ph.FAILED_PRECONDITION||t.code===ph.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Ab(t){if(t._initialized||t._terminated)throw new gh(ph.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new gh(ph.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Nb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(wh.fromBase64String(e))}catch(e){throw new gh(ph.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(wh.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Rb=function(t){this._methodName=t},Pb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new gh(ph.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new gh(ph.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return oh(this._lat,t._lat)||oh(this._long,t._long)},t}(),Db=/^__.*__$/,Lb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ud(t,this.data,this.fieldMask,e,this.fieldTransforms):new ad(t,this.data,e,this.fieldTransforms)},t}(),Mb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ud(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw th()}}var Ub=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return o_(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Fb(this.Fc)&&Db.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Vb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||nv(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Ub({Fc:t,methodName:e,Kc:n,path:bh.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function qb(t){var e=t._freezeSettings(),n=nv(t._databaseId);return new Vb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);e_("Data must be an object, but it was:",s,r);var a,u,c=Zb(r,s);if(o.merge)a=new Nf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=n_(e,f[h],n);if(!s.contains(d))throw new gh(ph.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");s_(l,d)||l.push(d)}a=new Nf(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Lb(new Rf(c),a,u)}var Hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Rb);function Qb(t,e,n){return new Ub({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype._toFieldTransform=function(t){return new Jf(t.path,new Hf)},e.prototype.isEqual=function(t){return t instanceof e},e}(Rb),Gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Qb(this,t,!0),n=this.jc.map(function(t){return Xb(t,e)}),r=new Qf(n);return new Jf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Rb),Kb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Qb(this,t,!0),n=this.jc.map(function(t){return Xb(t,e)}),r=new Gf(n);return new Jf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Rb),Wb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Gl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Wf(t.D,Ff(t.D,this.Gc));return new Jf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Rb);function $b(t,e,n,r){var i=t.Wc(1,e,n);e_("Data must be an object, but it was:",i,r);var o=[],s=new Pf;ch(r,function(t,r){var a=i_(e,t,n);r instanceof yb&&(r=r._delegate);var u=i.Bc(a);if(r instanceof Hb)o.push(a);else{var c=Xb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Nf(o);return new Mb(s.v(),a,i.fieldTransforms)}function Yb(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[n_(e,r,n)],u=[i];if(o.length%2!=0)throw new gh(ph.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(n_(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Pf,f=a.length-1;f>=0;--f)if(!s_(l,a[f])){var d=a[f],p=u[f];p instanceof yb&&(p=p._delegate);var g=s.Bc(d);if(p instanceof Hb)l.push(d);else{var y=Xb(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new Nf(l);return new Mb(h.v(),v,s.fieldTransforms)}function Jb(t,e,n,r){return void 0===r&&(r=!1),Xb(n,t.Wc(r?4:3,e))}function Xb(t,e){if(t instanceof yb&&(t=t._delegate),t_(t))return e_("Unsupported field value:",e,t),Zb(t,e);if(t instanceof Rb)return function(t,e){if(!Fb(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Xb(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof yb&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ff(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Sh.fromDate(t);return{timestampValue:Wd(e.D,n)}}if(t instanceof Sh)return n=new Sh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Wd(e.D,n)};if(t instanceof Pb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nb)return{bytesValue:$d(e.D,t._byteString)};if(t instanceof vb){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Xd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+hb(t))}(t,e)}function Zb(t,e){var n={};return lh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ch(t,function(t,r){var i=Xb(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function t_(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Sh||t instanceof Pb||t instanceof Nb||t instanceof vb||t instanceof Rb)}function e_(t,e,n){if(!t_(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=hb(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function n_(t,e,n){if(e instanceof yb&&(e=e._delegate),e instanceof kb)return e._internalPath;if("string"==typeof e)return i_(t,e);throw o_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var r_=new RegExp("[~\\*/\\[\\]]");function i_(t,e,n){if(e.search(r_)>=0)throw o_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(kb.bind.apply(kb,Object(Gl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw o_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function o_(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new gh(ph.INVALID_ARGUMENT,(a+=". ")+t+u)}function s_(t,e){return t.some(function(t){return t.isEqual(e)})}var a_=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new vb(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new u_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(c_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),u_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(a_);function c_(t,e){return"string"==typeof e?i_(t,e):e instanceof yb?e._delegate._internalPath:e._internalPath}var l_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),h_=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Gl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new f_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(c_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(a_),f_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(h_),d_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new l_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new f_(n._firestore,n._userDataWriter,r.key,r,new l_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new gh(ph.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new f_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new l_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new f_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new l_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:p_(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function p_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return th()}}function g_(t,e){return t instanceof h_&&e instanceof h_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof d_&&e instanceof d_&&t._firestore===e._firestore&&Eb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function y_(t){if(mf(t)&&0===t.explicitOrderBy.length)throw new gh(ph.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var v_=function(){};function m_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var b_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Gl.c)(e,t),e.prototype._apply=function(t){var e=qb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new gh(ph.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){S_(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(T_(r,t,l[c]));a={arrayValue:{values:u}}}else a=T_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||S_(s,o),a=Jb(n,"where",s,"in"===o||"not-in"===o);var h=Xh.create(i,o,a);return function(t,e){if(e.g()){var n=_f(t);if(null!==n&&!n.isEqual(e.field))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bf(t);null!==r&&I_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new gh(ph.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new mb(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new pf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(v_),__=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Gl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new gh(ph.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new gh(ph.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lf(e,n);return function(t,e){if(null===bf(t)){var n=_f(t);null!==n&&I_(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new mb(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new pf(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(v_),w_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Gl.c)(e,t),e.prototype._apply=function(t){return new mb(t.firestore,t._converter,Cf(t._query,this.Xc,this.Zc))},e}(v_),O_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Gl.c)(e,t),e.prototype._apply=function(t){var e=C_(t,this.type,this.ta,this.ea);return new mb(t.firestore,t._converter,function(t,e){return new pf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(v_),E_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Gl.c)(e,t),e.prototype._apply=function(t){var e=C_(t,this.type,this.ta,this.ea);return new mb(t.firestore,t._converter,function(t,e){return new pf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(v_);function C_(t,e,n,r){if(n[0]instanceof yb&&(n[0]=n[0]._delegate),n[0]instanceof a_)return function(t,e,n,r,i){if(!r)throw new gh(ph.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Of(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Mh(e,r.key));else{var c=r.field(u.field);if(Ih(c))throw new gh(ph.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new gh(ph.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new uf(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=qb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new gh(ph.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new gh(ph.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wf(t)&&-1!==c.indexOf("/"))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(vh.fromString(c));if(!_h.isDocumentKey(l))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new _h(l);a.push(Mh(e,h))}else{var f=Jb(n,r,c);a.push(f)}}return new uf(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function T_(t,e,n){if(n instanceof yb&&(n=n._delegate),"string"==typeof n){if(""===n)throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wf(e)&&-1!==n.indexOf("/"))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(vh.fromString(n));if(!_h.isDocumentKey(r))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Mh(t,new _h(r))}if(n instanceof vb)return Mh(t,n._key);throw new gh(ph.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hb(n)+".")}function S_(t,e){if(!Array.isArray(t)||0===t.length)throw new gh(ph.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new gh(ph.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function I_(t,e,n){if(!n.isEqual(e))throw new gh(ph.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var x_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ah(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ch(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Th(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw th()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ch(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Pb(Ch(t.latitude),Ch(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=xh(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(jh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Eh(t);return new Sh(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=vh.fromString(t);eh(Ep(n));var r=new Zm(n.get(1),n.get(3)),i=new _h(n.popFirst(5));return r.isEqual(e)||Jl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function j_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var A_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gl.c)(e,t),e.prototype.convertBytes=function(t){return new Nb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new vb(this.firestore,null,e)},e}(x_),k_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=N_(t,this._firestore),i=j_(r._converter,e,n),o=Bb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Zf.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=N_(t,this._firestore);return e instanceof yb&&(e=e._delegate),o="string"==typeof e||e instanceof kb?Yb(this._dataReader,"WriteBatch.update",s._key,e,n,r):$b(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Zf.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=N_(t,this._firestore);return this._mutations=this._mutations.concat(new gd(e._key,Zf.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new gh(ph.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function N_(t,e){if(t instanceof yb&&(t=t._delegate),t.firestore!==e)throw new gh(ph.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var R_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gl.c)(e,t),e.prototype.convertBytes=function(t){return new Nb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new vb(this.firestore,null,e)},e}(x_);function P_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=fb(t,vb);var o=fb(t.firestore,Sb),s=qb(o);return e instanceof yb&&(e=e._delegate),L_(o,[("string"==typeof e||e instanceof kb?Yb(s,"updateDoc",t._key,e,n,r):$b(s,"updateDoc",t._key,e)).toMutation(t._key,Zf.exists(!0))])}function D_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof yb&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Tb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Tb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof vb)c=fb(t.firestore,Sb),l=yf(t._key.path),u={next:function(e){i[a]&&i[a](M_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=fb(t,mb);c=fb(d.firestore,Sb),l=d._query;var p=new R_(c);u={next:function(t){i[a]&&i[a](new d_(c,p,d,t))},error:i[a+1],complete:i[a+2]},y_(t._query)}return function(t,e,n,r){var i=this,o=new Mm(r),s=new Kv(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(i,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e=Bv,[4,$m(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(i,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e=Hv,[4,$m(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Ib(c),l,h,u)}function L_(t,e){return function(t,e){var n=this,r=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var n;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return n=om,[4,Wm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Ib(t),e)}function M_(t,e,n){var r=n.docs.get(e._key),i=new R_(t);return new h_(t,i,e._key,r,new l_(n.hasPendingWrites,n.fromCache),e._converter)}var F_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Gl.c)(e,t),e.prototype.get=function(e){var n=this,r=N_(e,this._firestore),i=new R_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new h_(n._firestore,i,r._key,t._document,new l_(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=qb(t)}return t.prototype.get=function(t){var e=this,n=N_(t,this._firestore),r=new A_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return th();var i=t[0];if(i instanceof zh)return new a_(e._firestore,r,n._key,null,n._converter);if(i instanceof Qh)return new a_(e._firestore,r,i.key,i,n._converter);throw th()})},t.prototype.set=function(t,e,n){var r=N_(t,this._firestore),i=j_(r._converter,e,n),o=Bb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=N_(t,this._firestore);return e instanceof yb&&(e=e._delegate),o="string"==typeof e||e instanceof kb?Yb(this._dataReader,"Transaction.update",s._key,e,n,r):$b(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=N_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function U_(){if("undefined"==typeof Uint8Array)throw new gh(ph.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function V_(){if("undefined"==typeof atob)throw new gh(ph.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var q_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.fromBase64String=function(t){return V_(),new e(Nb.fromBase64String(t))},e.fromUint8Array=function(t){return U_(),new e(Nb.fromUint8Array(t))},e.prototype.toBase64=function(){return V_(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return U_(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(yb),B_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ab(t=fb(t,Sb));var n=Ib(t),r=t._freezeSettings(),i=new Lm;return jb(n,i,new Pm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ab(t=fb(t,Sb));var e=Ib(t),n=t._freezeSettings(),r=new Lm;return jb(e,r,new Dm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new gh(ph.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Kp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Gl.b)(e,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Gl.b)(this,void 0,void 0,function(){return Object(Gl.d)(this,function(e){switch(e.label){case 0:return Yp.At()?[4,Yp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ay(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),H_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Zm||(i.sa=e),i}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=fb(t,gb))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Gl.b)(e,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return[4,zm(t)];case 1:return e=r.sent(),[4,Km(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=nh(t);return e.Qr.delete(0),lv(e)}(n))]}})})})}(Ib(fb(this._delegate,Sb)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Gl.b)(e,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return[4,zm(t)];case 1:return e=r.sent(),[4,Km(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return(e=nh(t)).Qr.add(0),[4,hv(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Ib(fb(this._delegate,Sb)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ub("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(e,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return e=hm,[4,Wm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Ib(fb(this._delegate,Sb)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Mm(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){nh(t).Zr.add(e),e.next()},[4,$m(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){nh(t).Zr.delete(e)},[4,$m(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Ib(t=fb(t,Sb)),Tb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new gh(ph.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new rw(this,_b(this._delegate,t))}catch(t){throw $_(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new W_(this,wb(this._delegate,t))}catch(t){throw $_(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new tw(this,function(t,e){if(t=fb(t,gb),sb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gh(ph.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mb(t,null,function(t){return new pf(vh.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw $_(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var n;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Qm(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Um(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Ib(t),function(n){return e(new F_(t,n))})}(this._delegate,function(n){return t(new z_(e,n))})},e.prototype.batch=function(){var t=this;return Ib(this._delegate),new G_(new k_(this._delegate,function(e){return L_(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new gh(ph.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new gh(ph.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(yb),Q_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gl.c)(e,t),e.prototype.convertBytes=function(t){return new q_(new Nb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return W_.ia(e,this.firestore,null)},e}(x_),z_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Q_(e),r}return Object(Gl.c)(e,t),e.prototype.get=function(t){var e=this,n=iw(t);return this._delegate.get(n).then(function(t){return new X_(e._firestore,new h_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=iw(t);return n?(ab("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Gl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=iw(t);return this._delegate.delete(e),this},e}(yb),G_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.set=function(t,e,n){var r=iw(t);return n?(ab("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Gl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=iw(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(yb),K_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Gl.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new f_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Z_(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Q_(t),n),i.set(n,o)),o},e}(yb);K_.oa=new WeakMap;var W_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Q_(e),r}return Object(Gl.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new gh(ph.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new vb(n._delegate,r,new _h(t)))},e.ia=function(t,n,r){return new e(n,new vb(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new rw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new rw(this.firestore,_b(this._delegate,t))}catch(t){throw $_(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof yb&&(t=t._delegate),t instanceof vb&&Ob(this._delegate,t)},e.prototype.set=function(t,e){e=ab("DocumentReference.set",e);try{return function(t,e,n){t=fb(t,vb);var r=fb(t.firestore,Sb),i=j_(t._converter,e,n);return L_(r,[Bb(qb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Zf.none())])}(this._delegate,t,e)}catch(t){throw $_(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?P_(this._delegate,t):P_.apply(void 0,Object(Gl.f)([this._delegate,t,e],n))}catch(t){throw $_(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return L_(fb((t=this._delegate).firestore,Sb),[new gd(t._key,Zf.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Y_(e),i=J_(e,function(e){return new X_(t.firestore,new h_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return D_(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fb(t,vb);var e=fb(t.firestore,Sb),n=Ib(e),r=new R_(e);return function(t,e){var n=this,r=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var n;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=nh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Qh?n.resolve(i):i instanceof zh?n.resolve(null):n.reject(new gh(ph.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Lv(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Gm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new h_(e,r,t._key,n,new l_(n instanceof Qh&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fb(t,vb);var e=fb(t.firestore,Sb);return Ym(Ib(e),t._key,{source:"server"}).then(function(n){return M_(e,t,n)})}(this._delegate):function(t){t=fb(t,vb);var e=fb(t.firestore,Sb);return Ym(Ib(e),t._key).then(function(n){return M_(e,t,n)})}(this._delegate)).then(function(t){return new X_(e.firestore,new h_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?K_.ra(this.firestore,t):null))},e}(yb);function $_(t,e,n){return t.message=t.message.replace(e,n),t}function Y_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Tb(r))return r}return{}}function J_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Tb(t[0])?t[0]:Tb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var X_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new W_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return g_(this._delegate,t._delegate)},e}(yb),Z_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(X_),tw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Q_(e),r}return Object(Gl.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,m_(this._delegate,function(t,e,n){var r=e,i=c_("where",t);return new b_(i,r,n)}(t,n,r)))}catch(t){throw $_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,m_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=c_("orderBy",t);return new __(r,n)}(t,n)))}catch(t){throw $_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,m_(this._delegate,function(t){return db("limit",t),new w_("limit",t,"F")}(t)))}catch(t){throw $_(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,m_(this._delegate,function(t){return db("limitToLast",t),new w_("limitToLast",t,"L")}(t)))}catch(t){throw $_(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new O_("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw $_(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new O_("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw $_(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new E_("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw $_(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new E_("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw $_(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Eb(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fb(t,mb);var e=fb(t.firestore,Sb),n=Ib(e),r=new R_(e);return function(t,e){var n=this,r=new Kp;return t.asyncQueue.enqueueAndForget(function(){return Object(Gl.b)(n,void 0,void 0,function(){var n;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Gl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Oy(t,e,!0)];case 1:return a=u.sent(),r=new Xv(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Lv(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Gm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new d_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fb(t,mb);var e=fb(t.firestore,Sb),n=Ib(e),r=new R_(e);return Jm(n,t._query,{source:"server"}).then(function(n){return new d_(e,r,t,n)})}(this._delegate):function(t){t=fb(t,mb);var e=fb(t.firestore,Sb),n=Ib(e),r=new R_(e);return y_(t._query),Jm(n,t._query).then(function(n){return new d_(e,r,t,n)})}(this._delegate)).then(function(t){return new nw(e.firestore,new d_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Y_(e),i=J_(e,function(e){return new nw(t.firestore,new d_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return D_(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?K_.ra(this.firestore,t):null))},e}(yb),ew=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Z_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(yb),nw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new tw(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Z_(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new ew(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Z_(n._firestore,r))})},e.prototype.isEqual=function(t){return g_(this._delegate,t._delegate)},e}(yb),rw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Gl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new W_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new W_(this.firestore,void 0===t?wb(this._delegate):wb(this._delegate,t))}catch(t){throw $_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=fb(t.firestore,Sb),r=wb(t),i=j_(t._converter,e);return L_(n,[Bb(qb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Zf.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new W_(e.firestore,t)})},e.prototype.isEqual=function(t){return Ob(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?K_.ra(this.firestore,t):null))},e}(tw);function iw(t){return t instanceof yb&&(t=t._delegate),fb(t,vb)}var ow,sw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(kb.bind.apply(kb,Object(Gl.f)([void 0],e))))||this}return Object(Gl.c)(e,t),e.documentId=function(){return new e(bh.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof yb&&(t=t._delegate),t instanceof kb&&this._delegate._internalPath.isEqual(t._internalPath)},e}(yb),aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gl.c)(e,t),e.serverTimestamp=function(){var t=new zb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Hb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gb("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Wb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(yb),uw=n("/6Yf"),cw={Firestore:H_,GeoPoint:Pb,Timestamp:Sh,Blob:q_,Transaction:z_,WriteBatch:G_,DocumentReference:W_,DocumentSnapshot:X_,Query:tw,QueryDocumentSnapshot:Z_,QuerySnapshot:nw,CollectionReference:rw,FieldPath:sw,FieldValue:aw,setLogLevel:function(t){Wl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function lw(t,e){return function(t,e=Bo.b){return new dt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function hw(t,e){return lw(t,e).pipe(Object(gt.a)(t=>({payload:t,type:"query"})))}function fw(t,e){return hw(t,e).pipe(Le(void 0),Us(),Object(gt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function dw(t,e,n){return fw(t,n).pipe(Me((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return pw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return pw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),zo(),Object(gt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function pw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function gw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new uw.a("firestore",function(t){return function(t,e){return new H_(t,new Sb(t,e),new B_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},cw)))})(ow=Bs.a),ow.registerVersion("@firebase/firestore","2.2.1");class yw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=fw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(gt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Le(void 0),Us(),Ve(([t,e])=>e.length>0||!t),Object(gt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Me((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=gw(t);return dw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(gt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ft.a)(this.query.get(t)).pipe(Object(Zo.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new vw(this.ref.doc(t),this.afs)}}class vw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Ew(n,e);return new yw(r,i,this.afs)}snapshotChanges(){return lw(this.ref,this.afs.schedulers.outsideAngular).pipe(Le(void 0),Us(),Object(gt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(gt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ft.a)(this.ref.get(t)).pipe(Object(Zo.b)(this.afs.schedulers.insideAngular))}}class mw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?fw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(gt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ve(t=>t.length>0),this.afs.keepUnstableUntilFirst):fw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Me((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=gw(t);return dw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(gt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ft.a)(this.query.get(t)).pipe(Object(Zo.b)(this.afs.schedulers.insideAngular))}}const bw=new r.r("angularfire2.enableFirestorePersistence"),_w=new r.r("angularfire2.firestore.persistenceSettings"),ww=new r.r("angularfire2.firestore.settings"),Ow=new r.r("angularfire2.firestore.use-emulator");function Ew(t,e=(t=>t)){return{query:e(t),ref:t}}let Cw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Xo.e(o),this.keepUnstableUntilFirst=Object(Xo.i)(this.schedulers);const c=Object(Xo.h)(t,o,e);!gs.a.auth&&u&&Object(Xo.k)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Xo.g)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!k(i)){const e=()=>{try{return Object(ft.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(ow){return"undefined"!=typeof console&&console.warn(ow),Object(ue.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ue.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Ew(n,e),o=this.schedulers.ngZone.run(()=>r);return new yw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new mw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new vw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xo.c),r.Qb(Xo.b,8),r.Qb(bw,8),r.Qb(ww,8),r.Qb(r.C),r.Qb(r.A),r.Qb(_w,8),r.Qb(Ow,8),r.Qb(as,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Xo.c),Object(r.Qb)(Xo.b,8),Object(r.Qb)(bw,8),Object(r.Qb)(ww,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(_w,8),Object(r.Qb)(Ow,8),Object(r.Qb)(as,8))},token:t,providedIn:"any"}),t})(),Tw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:bw,useValue:!0},{provide:_w,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Cw]}),t})();class Sw{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new Iw(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class Iw extends de.a{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new ce.a,n.set(e,i);const t=new jw(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new jw(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new xw(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class xw extends de.a{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class jw extends dt.a{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new cn.a,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new Aw(n)),e.add(r.subscribe(t)),e}}class Aw extends cn.a{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const kw=new r.r("angularfire2.analytics.analyticsCollectionEnabled"),Nw=new r.r("angularfire2.analytics.appVersion"),Rw=new r.r("angularfire2.analytics.appName"),Pw=new r.r("angularfire2.analytics.debugMode"),Dw=new r.r("angularfire2.analytics.config");let Lw=(()=>{class t{constructor(t,e,r,i,o,s,a,u){if(this.analyticsInitialized=new Promise(()=>{}),A(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),o&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),s&&this.updateConfig(s),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=Object(ue.a)(void 0).pipe(Object(Zo.b)(new Xo.e(u).outsideAngular),je(()=>A(a)?u.runOutsideAngular(()=>n.e(4).then(n.bind(null,"AAub"))):Te.a),Object(gt.a)(()=>Object(Xo.g)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,s,o])),is({bufferSize:1,refCount:!1}));return Object(Xo.j)(this,c,u)}updateConfig(t){return Object(Gl.b)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xo.d),r.Qb(kw,8),r.Qb(Nw,8),r.Qb(Rw,8),r.Qb(Pw,8),r.Qb(Dw,8),r.Qb(r.C),r.Qb(r.A))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Xo.d),Object(r.Qb)(kw,8),Object(r.Qb)(Nw,8),Object(r.Qb)(Rw,8),Object(r.Qb)(Pw,8),Object(r.Qb)(Dw,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A))},token:t,providedIn:"any"}),t})();Object(Xo.f)(Lw,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}]);let Mw=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],k(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Lw),r.Qb(r.C),r.Qb(ds),r.Qb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Fw="screen_class";let Uw=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Vw={},qw=t=>{const e=[t.screen_class,t.outlet].join("#");if(Vw.hasOwnProperty(e))return Vw[e];{const t=Uw++;return Vw[e]=t,t}};let Bw=(()=>{class t{constructor(t,e,n,r,i,o,s){if(!e||!A(i))return this;o.runOutsideAngular(()=>{const i=e.events.pipe(Ve(t=>t instanceof In));var o;this.disposable=i.pipe(je(t=>{var i;const o=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",s=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!s)return Object(ue.a)(null);let a=s;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=s.component;if(l){if(l===Gr){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return Object(ue.a)(Object.assign(Object.assign({},c),{[Fw]:l}));if(l){const t=r.resolveComponentFactory(l);return Object(ue.a)(Object.assign(Object.assign({},c),{[Fw]:t.selector}))}return Object(ue.a)(null)}),Ve(t=>t),Object(gt.a)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:qw(t)},t)),(o=t=>t.outlet,t=>t.lift(new Sw(o,void 0,void 0,void 0))),Object(Ge.a)(e=>e.pipe(zo((t,e)=>JSON.stringify(t)===JSON.stringify(e)),Le(void 0),Us(),Object(gt.a)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),je(e=>Object(Gl.b)(this,void 0,void 0,function*(){return s&&(yield s.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Lw),r.Qb(Li,8),r.Qb(ht,8),r.Qb(r.j),r.Qb(r.C),r.Qb(r.A),r.Qb(Mw,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Hw=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Lw),r.Qb(Bw,8),r.Qb(Mw,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Lw]}),t})();class Qw{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new zw(t,this.dueTime,this.scheduler))}}class zw extends de.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Gw,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Gw(t){t.debouncedNext()}var Kw="firebasestorage.googleapis.com",Ww=function(t){function e(n,r){var i=t.call(this,$w(n),"Firebase Storage: "+r+" ("+$w(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Gl.c)(e,t),e.prototype._codeEquals=function(t){return $w(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Qs.c);function $w(t){return"storage/"+t}function Yw(){return new Ww("unknown","An unknown error occurred, please check the error payload for server response.")}function Jw(){return new Ww("canceled","User canceled the upload/download.")}function Xw(){return new Ww("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Zw(t){return new Ww("invalid-argument",t)}function tO(){return new Ww("app-deleted","The Firebase app was deleted.")}function eO(t){return new Ww("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nO(t,e){return new Ww("invalid-format","String does not match format '"+t+"': "+e)}function rO(t){throw new Ww("internal-error","Internal error: "+t)}var iO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},oO=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function sO(t,e){switch(t){case iO.RAW:return new oO(aO(e));case iO.BASE64:case iO.BASE64URL:return new oO(uO(t,e));case iO.DATA_URL:return new oO((n=new cO(e)).base64?uO(iO.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(ow){throw nO(iO.DATA_URL,"Malformed data URL.")}return aO(e)}(n.rest),new cO(e).contentType)}var n;throw Yw()}function aO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uO(t,e){switch(t){case iO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw nO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case iO.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw nO(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(ow){throw nO(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var cO=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw nO(iO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),lO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hO(t){switch(t){case"running":case"pausing":case"canceling":return lO.RUNNING;case"paused":return lO.PAUSED;case"success":return lO.SUCCESS;case"canceled":return lO.CANCELED;case"error":default:return lO.ERROR}}var fO=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),dO=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=fO.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=fO.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=fO.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw rO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw rO("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw rO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ow){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw rO("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),pO=function(){function t(){}return t.prototype.createXhrIo=function(){return new dO},t}(),gO=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(ow){return new t(e,"")}if(""===n.path)return n;throw new Ww("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=Kw.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new Ww("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),yO=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function vO(t){return"string"==typeof t||t instanceof String}function mO(t){return bO()&&t instanceof Blob}function bO(){return"undefined"!=typeof Blob}function _O(t,e,n,r){if(r<e)throw Zw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Zw("Invalid value for '"+t+"'. Expected "+n+" or less.")}function wO(t){return"https://"+Kw+"/v0"+t}function OO(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var EO=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(ow){o(ow)}else null!==s?((r=Yw()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?tO():Jw():new Ww("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new CO(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new CO(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===fO.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new CO(s,n))}else{var a=n.getErrorCode()===fO.ABORT;e(!1,new CO(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Gl.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Gl.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),CO=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function TO(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function SO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=TO();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(bO())return new Blob(t);throw new Ww("unsupported-environment","This browser doesn't seem to support creating Blobs")}var IO=function(){function t(t,e){var n=0,r="";mO(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(mO(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(bO()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(SO.apply(null,r))}var i=e.map(function(t){return vO(t)?sO(iO.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function xO(t){var e,n;try{e=JSON.parse(t)}catch(ow){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function jO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function AO(t,e){return e}var kO=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||AO}}(),NO=null;function RO(){if(NO)return NO;var t=[];t.push(new kO("bucket")),t.push(new kO("generation")),t.push(new kO("metageneration")),t.push(new kO("name","fullPath",!0));var e=new kO("name");e.xform=function(t,e){return function(t){return!vO(t)||t.length<2?t:jO(t)}(e)},t.push(e);var n=new kO("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new kO("timeCreated")),t.push(new kO("updated")),t.push(new kO("md5Hash",null,!0)),t.push(new kO("cacheControl",null,!0)),t.push(new kO("contentDisposition",null,!0)),t.push(new kO("contentEncoding",null,!0)),t.push(new kO("contentLanguage",null,!0)),t.push(new kO("contentType",null,!0)),t.push(new kO("metadata","customMetadata",!0)),NO=t}function PO(t,e,n){var r=xO(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new gO(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function DO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var LO=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function MO(t){if(!t)throw Yw()}function FO(t,e){return function(n,r){var i=PO(t,r,e);return MO(null!==i),i}}function UO(t){return function(e,n){var r;return(r=401===e.getStatus()?new Ww("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Ww("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Ww("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function VO(t){var e=UO(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Ww("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function qO(t,e,n){var r=wO(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new LO(r,"GET",FO(t,n),i);return o.errorHandler=VO(e),o}function BO(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var HO=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function QO(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(ow){MO(!1)}return MO(!!n&&-1!==(e||["active"]).indexOf(n)),n}var zO=262144,GO=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function KO(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var WO=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=RO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=BO(e,r,i),a={name:s.fullPath},u=wO(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=DO(s,n),h=new LO(u,"POST",function(t){var e;QO(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(ow){MO(!1)}return MO(vO(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=UO(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new LO(n,"POST",function(t){var e=QO(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ow){MO(!1)}n||MO(!1);var i=Number(n);return MO(!isNaN(i)),new HO(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=UO(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=zO*this._chunkMultiplier,n=new HO(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new HO(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Ww("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Xw();var p=new LO(n,"POST",function(t,n){var i,s=QO(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?FO(e,o)(t,n):null,new HO(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=UO(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(ow){return t._error=ow,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){zO*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=qO(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=BO(e,r,i),c=DO(u,n),l=IO.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Xw();var h={name:u.fullPath},f=wO(o),d=t.maxUploadRetryTime,p=new LO(f,"POST",FO(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=UO(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Jw(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=hO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new GO(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(hO(this._state)){case lO.SUCCESS:KO(this._resolve.bind(null,this.snapshot))();break;case lO.CANCELED:case lO.ERROR:KO(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(hO(this._state)){case lO.RUNNING:case lO.PAUSED:t.next&&KO(t.next.bind(t,this.snapshot))();break;case lO.SUCCESS:t.complete&&KO(t.complete.bind(t))();break;case lO.CANCELED:case lO.ERROR:t.error&&KO(t.error.bind(t,this._error))();break;default:t.error&&KO(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),$O=function(){function t(t,e){this._service=t,this._location=e instanceof gO?e:gO.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new gO(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return jO(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new gO(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw eO(t)},t}();function YO(t){var e={prefixes:[],items:[]};return JO(t,e).then(function(){return e})}function JO(t,e,n){return Object(Gl.b)(this,void 0,void 0,function(){var r,i,o;return Object(Gl.d)(this,function(s){switch(s.label){case 0:return[4,XO(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,JO(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function XO(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gl.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&_O("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=wO(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new LO(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=xO(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new gO(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new gO(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return MO(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=UO(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function ZO(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new gO(t._location.bucket,n);return new $O(t.storage,r)}function tE(t){return/^[A-Za-z]+:\/\//.test(t)}function eE(t,e){if(t instanceof rE){var n=t;if(null==n._bucket)throw new Ww("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new $O(n,n._bucket);return null!=e?eE(r,e):r}if(void 0!==e){if(e.includes(".."))throw Zw('`path` param cannot contain ".."');return ZO(t,e)}return t}function nE(t,e){if(e&&tE(e)){if(t instanceof rE)return new $O(t,e);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}return eE(t,e)}var rE=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?gO.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:gO.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){_O("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){_O("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Gl.b)(this,void 0,void 0,function(){var t,e;return Object(Gl.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new $O(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new yO(tO());var r=function(t,e,n,r,i){var o=OO(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new EO(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}();function iE(t,e){return nE(t,e)}var oE,sE,aE=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),uE=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new aE(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new aE(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new aE(t,i,i._ref))}:{next:e.next?function(t){return e.next(new aE(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),cE=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new lE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new lE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),lE=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return ZO(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new uE(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new WO(t,new IO(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=iO.RAW),this._throwIfRoot("putString");var r=sO(e,t),i=Object(Gl.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new uE(new WO(this._delegate,new IO(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,YO(t)).then(function(t){return new cE(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return XO(t,e)}(this._delegate,t||void 0).then(function(t){return new cE(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=qO(t.storage,t._location,RO()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Gl.b)(this,void 0,void 0,function(){var n,r;return Object(Gl.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=wO(e.fullServerUrl()),o=DO(n,r),s=t.maxOperationRetryTime,a=new LO(i,"PATCH",FO(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=VO(e),a}(t.storage,t._location,e,RO()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=wO(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new LO(r,"GET",function(t,e){return function(n,r){var i=PO(t,r,e);return MO(null!==i),function(t,e){var n=xO(e);if(null===n)return null;if(!vO(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return wO("/b/"+i(t.bucket)+"/o/"+i(n))+OO({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=VO(e),o}(t.storage,t._location,RO()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new Ww("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Gl.b)(this,void 0,void 0,function(){var e,n;return Object(Gl.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=wO(e.fullServerUrl()),r=new LO(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=VO(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw eO(t)},t}(),hE=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(tE(t))throw Zw("ref() expected a child path but got a URL, use refFromURL instead.");return new lE(iE(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!tE(t))throw Zw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gO.makeFromUrl(t)}catch(ow){throw Zw("refFromUrl() expected a valid full URL but got an invalid one.")}return new lE(iE(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function fE(t){const e=function(t){return new dt.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Bo.a){return n=>n.lift(new Qw(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(gt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function dE(t,e,n){return{getDownloadURL:()=>Object(ue.a)(void 0).pipe(Object(Zo.b)(e.outsideAngular),je(()=>t.getDownloadURL()),n),getMetadata:()=>Object(ue.a)(void 0).pipe(Object(Zo.b)(e.outsideAngular),je(()=>t.getMetadata()),n),delete:()=>Object(ft.a)(t.delete()),child:r=>dE(t.child(r),e,n),updateMetadata:e=>Object(ft.a)(t.updateMetadata(e)),put:(e,n)=>fE(t.put(e,n)),putString:(e,n,r)=>fE(t.putString(e,n,r)),listAll:()=>Object(ft.a)(t.listAll())}}sE={TaskState:lO,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:iO,Storage:rE,Reference:lE},(oE=Bs.a).INTERNAL.registerComponent(new uw.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new hE(r,new rE(r,i,new pO,n,Bs.a.SDK_VERSION))},"PUBLIC").setServiceProps(sE).setMultipleInstances(!0)),oE.registerVersion("@firebase/storage","0.4.5");const pE=new r.r("angularfire2.storageBucket"),gE=new r.r("angularfire2.storage.maxUploadRetryTime"),yE=new r.r("angularfire2.storage.maxOperationRetryTime");let vE=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Xo.e(i),this.keepUnstableUntilFirst=Object(Xo.i)(this.schedulers);const a=Object(Xo.h)(t,i,e);this.storage=Object(Xo.g)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return dE(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return dE(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return dE(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xo.c),r.Qb(Xo.b,8),r.Qb(pE,8),r.Qb(r.C),r.Qb(r.A),r.Qb(gE,8),r.Qb(yE,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Xo.c),Object(r.Qb)(Xo.b,8),Object(r.Qb)(pE,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(gE,8),Object(r.Qb)(yE,8))},token:t,providedIn:"any"}),t})(),mE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),bE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[vE],imports:[mE]}),t})(),_E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[Fs]}),t.\u0275inj=r.Hb({providers:[Rs,Ns],imports:[[ct,Ms,ae,qo,ks,bE,Tw,Hw,ps,Xo.a.initializeApp(uo)]]}),t})();Object(r.T)(),at().bootstrapModule(_E).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);